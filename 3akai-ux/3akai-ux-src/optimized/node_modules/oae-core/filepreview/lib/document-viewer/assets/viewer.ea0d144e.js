define([],function(){(function(e,t){function s(e,n,s){if(s===t&&e.nodeType===1){s=e.getAttribute("data-"+n);if(typeof s=="string"){try{s=s==="true"?!0:s==="false"?!1:s==="null"?null:r.isNaN(s)?i.test(s)?r.parseJSON(s):s:parseFloat(s)}catch(o){}r.data(e,n,s)}else s=t}return s}function o(e){for(var t in e)if(t!=="toJSON")return!1;return!0}function E(){return!1}function S(){return!0}function L(e,n,i){var s=r.extend({},i[0]);s.type=e,s.originalEvent={},s.liveFired=t,r.event.handle.call(n,s),s.isDefaultPrevented()&&i[0].preventDefault()}function O(e){var t,n,i,s,o,u,a,f,l,c,h,p,d,m=[],g=[],y=r._data(this,"events");if(e.liveFired===this||!y||!y.live||e.target.disabled||e.button&&e.type==="click")return;e.namespace&&(p=new RegExp("(^|\\.)"+e.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)")),e.liveFired=this;var b=y.live.slice(0);for(a=0;a<b.length;a++)o=b[a],o.origType.replace(v,"")===e.type?g.push(o.selector):b.splice(a--,1);s=r(e.target).closest(g,e.currentTarget);for(f=0,l=s.length;f<l;f++){h=s[f];for(a=0;a<b.length;a++){o=b[a];if(h.selector===o.selector&&(!p||p.test(o.namespace))&&!h.elem.disabled){u=h.elem,i=null;if(o.preType==="mouseenter"||o.preType==="mouseleave")e.type=o.preType,i=r(e.relatedTarget).closest(o.selector)[0];(!i||i!==u)&&m.push({elem:u,handleObj:o,level:h.level})}}}for(f=0,l=m.length;f<l;f++){s=m[f];if(n&&s.level>n)break;e.currentTarget=s.elem,e.data=s.handleObj.data,e.handleObj=s.handleObj,d=s.handleObj.origHandler.apply(s.elem,arguments);if(d===!1||e.isPropagationStopped()){n=s.level,d===!1&&(t=!1);if(e.isImmediatePropagationStopped())break}}return t}function M(e,t){return(e&&e!=="*"?e+".":"")+t.replace(g,"`").replace(y,"&")}function I(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function q(e,t,n){if(r.isFunction(t))return r.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return r.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var i=r.grep(e,function(e){return e.nodeType===1});if(H.test(t))return r.filter(t,i,!n);t=r.filter(t,i)}return r.grep(e,function(e,i){return r.inArray(e,t)>=0===n})}function Q(e,t){return r.nodeName(e,"table")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function G(e,t){if(t.nodeType!==1||!r.hasData(e))return;var n=r.expando,i=r.data(e),s=r.data(t,i);if(i=i[n]){var o=i.events;s=s[n]=r.extend({},i);if(o){delete s.handle,s.events={};for(var u in o)for(var a=0,f=o[u].length;a<f;a++)r.event.add(t,u+(o[u][a].namespace?".":"")+o[u][a].namespace,o[u][a],o[u][a].data)}}}function Y(e,t){if(t.nodeType!==1)return;var n=t.nodeName.toLowerCase();t.clearAttributes(),t.mergeAttributes(e);if(n==="object")t.outerHTML=e.outerHTML;else if(n!=="input"||e.type!=="checkbox"&&e.type!=="radio"){if(n==="option")t.selected=e.defaultSelected;else if(n==="input"||n==="textarea")t.defaultValue=e.defaultValue}else e.checked&&(t.defaultChecked=t.checked=e.checked),t.value!==e.value&&(t.value=e.value);t.removeAttribute(r.expando)}function Z(e){return"getElementsByTagName"in e?e.getElementsByTagName("*"):"querySelectorAll"in e?e.querySelectorAll("*"):[]}function et(e,t){t.src?r.ajax({url:t.src,async:!1,dataType:"script"}):r.globalEval(t.text||t.textContent||t.innerHTML||""),t.parentNode&&t.parentNode.removeChild(t)}function dt(e,t,n){var i=t==="width"?at:ft,s=t==="width"?e.offsetWidth:e.offsetHeight;return n==="border"?s:(r.each(i,function(){n||(s-=parseFloat(r.css(e,"padding"+this))||0),n==="margin"?s+=parseFloat(r.css(e,"margin"+this))||0:s-=parseFloat(r.css(e,"border"+this+"Width"))||0}),s)}function Ft(e){return function(t,n){typeof t!="string"&&(n=t,t="*");if(r.isFunction(n)){var i=t.toLowerCase().split(kt),s=0,o=i.length,u,a,f;for(;s<o;s++)u=i[s],f=/^\+/.test(u),f&&(u=u.substr(1)||"*"),a=e[u]=e[u]||[],a[f?"unshift":"push"](n)}}}function It(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u=e[s],a=0,f=u?u.length:0,l=e===Dt,c;for(;a<f&&(l||!c);a++)c=u[a](n,r,i),typeof c=="string"&&(!l||o[c]?c=t:(n.dataTypes.unshift(c),c=It(e,n,r,i,c,o)));return(l||!c)&&!o["*"]&&(c=It(e,n,r,i,"*",o)),c}function qt(e,t,n,i){if(r.isArray(t)&&t.length)r.each(t,function(t,s){n||mt.test(e)?i(e,s):qt(e+"["+(typeof s=="object"||r.isArray(s)?t:"")+"]",s,n,i)});else if(!n&&t!=null&&typeof t=="object")if(r.isArray(t)||r.isEmptyObject(t))i(e,"");else for(var s in t)qt(e+"["+s+"]",t[s],n,i);else i(e,t)}function Rt(e,n,r){var i=e.contents,s=e.dataTypes,o=e.responseFields,u,a,f,l;for(a in o)a in r&&(n[o[a]]=r[a]);while(s[0]==="*")s.shift(),u===t&&(u=e.mimeType||n.getResponseHeader("content-type"));if(u)for(a in i)if(i[a]&&i[a].test(u)){s.unshift(a);break}if(s[0]in r)f=s[0];else{for(a in r){if(!s[0]||e.converters[a+" "+s[0]]){f=a;break}l||(l=a)}f=f||l}if(f)return f!==s[0]&&s.unshift(f),r[f]}function Ut(e,n){e.dataFilter&&(n=e.dataFilter(n,e.dataType));var i=e.dataTypes,s={},o,u,a=i.length,f,l=i[0],c,h,p,d,v;for(o=1;o<a;o++){if(o===1)for(u in e.converters)typeof u=="string"&&(s[u.toLowerCase()]=e.converters[u]);c=l,l=i[o];if(l==="*")l=c;else if(c!=="*"&&c!==l){h=c+" "+l,p=s[h]||s["* "+l];if(!p){v=t;for(d in s){f=d.split(" ");if(f[0]===c||f[0]==="*"){v=s[f[1]+" "+l];if(v){d=s[d],d===!0?p=v:v===!0&&(p=d);break}}}}!p&&!v&&r.error("No conversion from "+h.replace(" "," to ")),p!==!0&&(n=p?p(n):v(d(n)))}}return n}function Jt(){r(e).unload(function(){for(var e in Vt)Vt[e](0,1)})}function Kt(){try{return new e.XMLHttpRequest}catch(t){}}function Qt(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function nn(e,t){var n={};return r.each(tn.concat.apply([],tn.slice(0,t)),function(){n[this]=e}),n}function rn(e){if(!Gt[e]){var t=r("<"+e+">").appendTo("body"),n=t.css("display");t.remove();if(n==="none"||n==="")n="block";Gt[e]=n}return Gt[e]}function un(e){return r.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n=e.document,r=function(){function P(){if(r.isReady)return;try{n.documentElement.doScroll("left")}catch(e){setTimeout(P,1);return}r.ready()}var r=function(e,t){return new r.fn.init(e,t,o)},i=e.jQuery,s=e.$,o,u=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]+)$)/,a=/\S/,f=/^\s+/,l=/\s+$/,c=/\d/,h=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,p=/^[\],:{}\s]*$/,d=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,v=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,m=/(?:^|:|,)(?:\s*\[)+/g,g=/(webkit)[ \/]([\w.]+)/,y=/(opera)(?:.*version)?[ \/]([\w.]+)/,b=/(msie) ([\w.]+)/,w=/(mozilla)(?:.*? rv:([\w.]+))?/,E=navigator.userAgent,S,x=!1,T,N="then done fail isResolved isRejected promise".split(" "),C,k=Object.prototype.toString,L=Object.prototype.hasOwnProperty,A=Array.prototype.push,O=Array.prototype.slice,M=String.prototype.trim,_=Array.prototype.indexOf,D={};return r.fn=r.prototype={constructor:r,init:function(e,i,s){var o,a,f,l;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(e==="body"&&!i&&n.body)return this.context=n,this[0]=n.body,this.selector="body",this.length=1,this;if(typeof e=="string"){o=u.exec(e);if(o&&(o[1]||!i)){if(o[1])return i=i instanceof r?i[0]:i,l=i?i.ownerDocument||i:n,f=h.exec(e),f?r.isPlainObject(i)?(e=[n.createElement(f[1])],r.fn.attr.call(e,i,!0)):e=[l.createElement(f[1])]:(f=r.buildFragment([o[1]],[l]),e=(f.cacheable?r.clone(f.fragment):f.fragment).childNodes),r.merge(this,e);a=n.getElementById(o[2]);if(a&&a.parentNode){if(a.id!==o[2])return s.find(e);this.length=1,this[0]=a}return this.context=n,this.selector=e,this}return!i||i.jquery?(i||s).find(e):this.constructor(i).find(e)}return r.isFunction(e)?s.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),r.makeArray(e,this))},selector:"",jquery:"1.5.1",length:0,size:function(){return this.length},toArray:function(){return O.call(this,0)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var i=this.constructor();return r.isArray(e)?A.apply(i,e):r.merge(i,e),i.prevObject=this,i.context=this.context,t==="find"?i.selector=this.selector+(this.selector?" ":"")+n:t&&(i.selector=this.selector+"."+t+"("+n+")"),i},each:function(e,t){return r.each(this,e,t)},ready:function(e){return r.bindReady(),T.done(e),this},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(O.apply(this,arguments),"slice",O.call(arguments).join(","))},map:function(e){return this.pushStack(r.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:A,sort:[].sort,splice:[].splice},r.fn.init.prototype=r.fn,r.extend=r.fn.extend=function(){var e,n,i,s,o,u,a=arguments[0]||{},f=1,l=arguments.length,c=!1;typeof a=="boolean"&&(c=a,a=arguments[1]||{},f=2),typeof a!="object"&&!r.isFunction(a)&&(a={}),l===f&&(a=this,--f);for(;f<l;f++)if((e=arguments[f])!=null)for(n in e){i=a[n],s=e[n];if(a===s)continue;c&&s&&(r.isPlainObject(s)||(o=r.isArray(s)))?(o?(o=!1,u=i&&r.isArray(i)?i:[]):u=i&&r.isPlainObject(i)?i:{},a[n]=r.extend(c,u,s)):s!==t&&(a[n]=s)}return a},r.extend({noConflict:function(t){return e.$=s,t&&(e.jQuery=i),r},isReady:!1,readyWait:1,ready:function(e){e===!0&&r.readyWait--;if(!r.readyWait||e!==!0&&!r.isReady){if(!n.body)return setTimeout(r.ready,1);r.isReady=!0;if(e!==!0&&--r.readyWait>0)return;T.resolveWith(n,[r]),r.fn.trigger&&r(n).trigger("ready").unbind("ready")}},bindReady:function(){if(x)return;x=!0;if(n.readyState==="complete")return setTimeout(r.ready,1);if(n.addEventListener)n.addEventListener("DOMContentLoaded",C,!1),e.addEventListener("load",r.ready,!1);else if(n.attachEvent){n.attachEvent("onreadystatechange",C),e.attachEvent("onload",r.ready);var t=!1;try{t=e.frameElement==null}catch(i){}n.documentElement.doScroll&&t&&P()}},isFunction:function(e){return r.type(e)==="function"},isArray:Array.isArray||function(e){return r.type(e)==="array"},isWindow:function(e){return e&&typeof e=="object"&&"setInterval"in e},isNaN:function(e){return e==null||!c.test(e)||isNaN(e)},type:function(e){return e==null?String(e):D[k.call(e)]||"object"},isPlainObject:function(e){if(!e||r.type(e)!=="object"||e.nodeType||r.isWindow(e))return!1;if(e.constructor&&!L.call(e,"constructor")&&!L.call(e.constructor.prototype,"isPrototypeOf"))return!1;var n;for(n in e);return n===t||L.call(e,n)},isEmptyObject:function(e){for(var t in e)return!1;return!0},error:function(e){throw e},parseJSON:function(t){if(typeof t!="string"||!t)return null;t=r.trim(t);if(p.test(t.replace(d,"@").replace(v,"]").replace(m,"")))return e.JSON&&e.JSON.parse?e.JSON.parse(t):(new Function("return "+t))();r.error("Invalid JSON: "+t)},parseXML:function(t,n,i){return e.DOMParser?(i=new DOMParser,n=i.parseFromString(t,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t)),i=n.documentElement,(!i||!i.nodeName||i.nodeName==="parsererror")&&r.error("Invalid XML: "+t),n},noop:function(){},globalEval:function(e){if(e&&a.test(e)){var t=n.head||n.getElementsByTagName("head")[0]||n.documentElement,i=n.createElement("script");r.support.scriptEval()?i.appendChild(n.createTextNode(e)):i.text=e,t.insertBefore(i,t.firstChild),t.removeChild(i)}},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,n,i){var s,o=0,u=e.length,a=u===t||r.isFunction(e);if(i){if(a){for(s in e)if(n.apply(e[s],i)===!1)break}else for(;o<u;)if(n.apply(e[o++],i)===!1)break}else if(a){for(s in e)if(n.call(e[s],s,e[s])===!1)break}else for(var f=e[0];o<u&&n.call(f,o,f)!==!1;f=e[++o]);return e},trim:M?function(e){return e==null?"":M.call(e)}:function(e){return e==null?"":e.toString().replace(f,"").replace(l,"")},makeArray:function(e,t){var n=t||[];if(e!=null){var i=r.type(e);e.length==null||i==="string"||i==="function"||i==="regexp"||r.isWindow(e)?A.call(n,e):r.merge(n,e)}return n},inArray:function(e,t){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},merge:function(e,n){var r=e.length,i=0;if(typeof n.length=="number")for(var s=n.length;i<s;i++)e[r++]=n[i];else while(n[i]!==t)e[r++]=n[i++];return e.length=r,e},grep:function(e,t,n){var r=[],i;n=!!n;for(var s=0,o=e.length;s<o;s++)i=!!t(e[s],s),n!==i&&r.push(e[s]);return r},map:function(e,t,n){var r=[],i;for(var s=0,o=e.length;s<o;s++)i=t(e[s],s,n),i!=null&&(r[r.length]=i);return r.concat.apply([],r)},guid:1,proxy:function(e,n,i){return arguments.length===2&&(typeof n=="string"?(i=e,e=i[n],n=t):n&&!r.isFunction(n)&&(i=n,n=t)),!n&&e&&(n=function(){return e.apply(i||this,arguments)}),e&&(n.guid=e.guid=e.guid||n.guid||r.guid++),n},access:function(e,n,i,s,o,u){var a=e.length;if(typeof n=="object"){for(var f in n)r.access(e,f,n[f],s,o,i);return e}if(i!==t){s=!u&&s&&r.isFunction(i);for(var l=0;l<a;l++)o(e[l],n,s?i.call(e[l],l,o(e[l],n)):i,u);return e}return a?o(e[0],n):t},now:function(){return(new Date).getTime()},_Deferred:function(){var e=[],t,n,i,s={done:function(){if(!i){var n=arguments,o,u,a,f,l;t&&(l=t,t=0);for(o=0,u=n.length;o<u;o++)a=n[o],f=r.type(a),f==="array"?s.done.apply(s,a):f==="function"&&e.push(a);l&&s.resolveWith(l[0],l[1])}return this},resolveWith:function(r,s){if(!i&&!t&&!n){n=1;try{while(e[0])e.shift().apply(r,s)}catch(o){throw o}finally{t=[r,s],n=0}}return this},resolve:function(){return s.resolveWith(r.isFunction(this.promise)?this.promise():this,arguments),this},isResolved:function(){return!!n||!!t},cancel:function(){return i=1,e=[],this}};return s},Deferred:function(e){var t=r._Deferred(),n=r._Deferred(),i;return r.extend(t,{then:function(e,n){return t.done(e).fail(n),this},fail:n.done,rejectWith:n.resolveWith,reject:n.resolve,isRejected:n.isResolved,promise:function(e){if(e==null){if(i)return i;i=e={}}var n=N.length;while(n--)e[N[n]]=t[N[n]];return e}}),t.done(n.cancel).fail(t.cancel),delete t.cancel,e&&e.call(t,t),t},when:function(e){var t=arguments.length,n=t<=1&&e&&r.isFunction(e.promise)?e:r.Deferred(),i=n.promise();if(t>1){var s=O.call(arguments,0),o=t,u=function(e){return function(t){s[e]=arguments.length>1?O.call(arguments,0):t,--o||n.resolveWith(i,s)}};while(t--)e=s[t],e&&r.isFunction(e.promise)?e.promise().then(u(t),n.reject):--o;o||n.resolveWith(i,s)}else n!==e&&n.resolve(e);return i},uaMatch:function(e){e=e.toLowerCase();var t=g.exec(e)||y.exec(e)||b.exec(e)||e.indexOf("compatible")<0&&w.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},sub:function(){function e(t,n){return new e.fn.init(t,n)}r.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.subclass=this.subclass,e.fn.init=function(i,s){return s&&s instanceof r&&!(s instanceof e)&&(s=e(s)),r.fn.init.call(this,i,s,t)},e.fn.init.prototype=e.fn;var t=e(n);return e},browser:{}}),T=r._Deferred(),r.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){D["[object "+t+"]"]=t.toLowerCase()}),S=r.uaMatch(E),S.browser&&(r.browser[S.browser]=!0,r.browser.version=S.version),r.browser.webkit&&(r.browser.safari=!0),_&&(r.inArray=function(e,t){return _.call(t,e)}),a.test(" ")&&(f=/^[\s\xA0]+/,l=/[\s\xA0]+$/),o=r(n),n.addEventListener?C=function(){n.removeEventListener("DOMContentLoaded",C,!1),r.ready()}:n.attachEvent&&(C=function(){n.readyState==="complete"&&(n.detachEvent("onreadystatechange",C),r.ready())}),r}();(function(){r.support={};var t=n.createElement("div");t.style.display="none",t.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";var i=t.getElementsByTagName("*"),s=t.getElementsByTagName("a")[0],o=n.createElement("select"),u=o.appendChild(n.createElement("option")),a=t.getElementsByTagName("input")[0];if(!i||!i.length||!s)return;r.support={leadingWhitespace:t.firstChild.nodeType===3,tbody:!t.getElementsByTagName("tbody").length,htmlSerialize:!!t.getElementsByTagName("link").length,style:/red/.test(s.getAttribute("style")),hrefNormalized:s.getAttribute("href")==="/a",opacity:/^0.55$/.test(s.style.opacity),cssFloat:!!s.style.cssFloat,checkOn:a.value==="on",optSelected:u.selected,deleteExpando:!0,optDisabled:!1,checkClone:!1,noCloneEvent:!0,noCloneChecked:!0,boxModel:null,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableHiddenOffsets:!0},a.checked=!0,r.support.noCloneChecked=a.cloneNode(!0).checked,o.disabled=!0,r.support.optDisabled=!u.disabled;var f=null;r.support.scriptEval=function(){if(f===null){var t=n.documentElement,i=n.createElement("script"),s="script"+r.now();try{i.appendChild(n.createTextNode("window."+s+"=1;"))}catch(o){}t.insertBefore(i,t.firstChild),e[s]?(f=!0,delete e[s]):f=!1,t.removeChild(i),t=i=s=null}return f};try{delete t.test}catch(l){r.support.deleteExpando=!1}!t.addEventListener&&t.attachEvent&&t.fireEvent&&(t.attachEvent("onclick",function p(){r.support.noCloneEvent=!1,t.detachEvent("onclick",p)}),t.cloneNode(!0).fireEvent("onclick")),t=n.createElement("div"),t.innerHTML="<input type='radio' name='radiotest' checked='checked'/>";var c=n.createDocumentFragment();c.appendChild(t.firstChild),r.support.checkClone=c.cloneNode(!0).cloneNode(!0).lastChild.checked,r(function(){var e=n.createElement("div"),t=n.getElementsByTagName("body")[0];if(!t)return;e.style.width=e.style.paddingLeft="1px",t.appendChild(e),r.boxModel=r.support.boxModel=e.offsetWidth===2,"zoom"in e.style&&(e.style.display="inline",e.style.zoom=1,r.support.inlineBlockNeedsLayout=e.offsetWidth===2,e.style.display="",e.innerHTML="<div style='width:4px;'></div>",r.support.shrinkWrapBlocks=e.offsetWidth!==2),e.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";var i=e.getElementsByTagName("td");r.support.reliableHiddenOffsets=i[0].offsetHeight===0,i[0].style.display="",i[1].style.display="none",r.support.reliableHiddenOffsets=r.support.reliableHiddenOffsets&&i[0].offsetHeight===0,e.innerHTML="",t.removeChild(e).style.display="none",e=i=null});var h=function(e){var t=n.createElement("div");e="on"+e;if(!t.attachEvent)return!0;var r=e in t;return r||(t.setAttribute(e,"return;"),r=typeof t[e]=="function"),t=null,r};r.support.submitBubbles=h("submit"),r.support.changeBubbles=h("change"),t=i=s=null})();var i=/^(?:\{.*\}|\[.*\])$/;r.extend({cache:{},uuid:0,expando:"jQuery"+(r.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?r.cache[e[r.expando]]:e[r.expando],!!e&&!o(e)},data:function(e,n,i,s){if(!r.acceptData(e))return;var o=r.expando,u=typeof n=="string",a,f=e.nodeType,l=f?r.cache:e,c=f?e[r.expando]:e[r.expando]&&r.expando;if((!c||s&&c&&!l[c][o])&&u&&i===t)return;c||(f?e[r.expando]=c=++r.uuid:c=r.expando),l[c]||(l[c]={},f||(l[c].toJSON=r.noop));if(typeof n=="object"||typeof n=="function")s?l[c][o]=r.extend(l[c][o],n):l[c]=r.extend(l[c],n);return a=l[c],s&&(a[o]||(a[o]={}),a=a[o]),i!==t&&(a[n]=i),n==="events"&&!a[n]?a[o]&&a[o].events:u?a[n]:a},removeData:function(t,n,i){if(!r.acceptData(t))return;var s=r.expando,u=t.nodeType,a=u?r.cache:t,f=u?t[r.expando]:r.expando;if(!a[f])return;if(n){var l=i?a[f][s]:a[f];if(l){delete l[n];if(!o(l))return}}if(i){delete a[f][s];if(!o(a[f]))return}var c=a[f][s];r.support.deleteExpando||a!=e?delete a[f]:a[f]=null,c?(a[f]={},u||(a[f].toJSON=r.noop),a[f][s]=c):u&&(r.support.deleteExpando?delete t[r.expando]:t.removeAttribute?t.removeAttribute(r.expando):t[r.expando]=null)},_data:function(e,t,n){return r.data(e,t,n,!0)},acceptData:function(e){if(e.nodeName){var t=r.noData[e.nodeName.toLowerCase()];if(t)return t!==!0&&e.getAttribute("classid")===t}return!0}}),r.fn.extend({data:function(e,n){var i=null;if(typeof e=="undefined"){if(this.length){i=r.data(this[0]);if(this[0].nodeType===1){var o=this[0].attributes,u;for(var a=0,f=o.length;a<f;a++)u=o[a].name,u.indexOf("data-")===0&&(u=u.substr(5),s(this[0],u,i[u]))}}return i}if(typeof e=="object")return this.each(function(){r.data(this,e)});var l=e.split(".");return l[1]=l[1]?"."+l[1]:"",n===t?(i=this.triggerHandler("getData"+l[1]+"!",[l[0]]),i===t&&this.length&&(i=r.data(this[0],e),i=s(this[0],e,i)),i===t&&l[1]?this.data(l[0]):i):this.each(function(){var t=r(this),i=[l[0],n];t.triggerHandler("setData"+l[1]+"!",i),r.data(this,e,n),t.triggerHandler("changeData"+l[1]+"!",i)})},removeData:function(e){return this.each(function(){r.removeData(this,e)})}}),r.extend({queue:function(e,t,n){if(!e)return;t=(t||"fx")+"queue";var i=r._data(e,t);return n?(!i||r.isArray(n)?i=r._data(e,t,r.makeArray(n)):i.push(n),i):i||[]},dequeue:function(e,t){t=t||"fx";var n=r.queue(e,t),i=n.shift();i==="inprogress"&&(i=n.shift()),i&&(t==="fx"&&n.unshift("inprogress"),i.call(e,function(){r.dequeue(e,t)})),n.length||r.removeData(e,t+"queue",!0)}}),r.fn.extend({queue:function(e,n){return typeof e!="string"&&(n=e,e="fx"),n===t?r.queue(this[0],e):this.each(function(t){var i=r.queue(this,e,n);e==="fx"&&i[0]!=="inprogress"&&r.dequeue(this,e)})},dequeue:function(e){return this.each(function(){r.dequeue(this,e)})},delay:function(e,t){return e=r.fx?r.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(){var n=this;setTimeout(function(){r.dequeue(n,t)},e)})},clearQueue:function(e){return this.queue(e||"fx",[])}});var u=/[\n\t\r]/g,a=/\s+/,f=/\r/g,l=/^(?:href|src|style)$/,c=/^(?:button|input)$/i,h=/^(?:button|input|object|select|textarea)$/i,p=/^a(?:rea)?$/i,d=/^(?:radio|checkbox)$/i;r.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"},r.fn.extend({attr:function(e,t){return r.access(this,e,t,!0,r.attr)},removeAttr:function(e,t){return this.each(function(){r.attr(this,e,""),this.nodeType===1&&this.removeAttribute(e)})},addClass:function(e){if(r.isFunction(e))return this.each(function(t){var n=r(this);n.addClass(e.call(this,t,n.attr("class")))});if(e&&typeof e=="string"){var t=(e||"").split(a);for(var n=0,i=this.length;n<i;n++){var s=this[n];if(s.nodeType===1)if(!s.className)s.className=e;else{var o=" "+s.className+" ",u=s.className;for(var f=0,l=t.length;f<l;f++)o.indexOf(" "+t[f]+" ")<0&&(u+=" "+t[f]);s.className=r.trim(u)}}}return this},removeClass:function(e){if(r.isFunction(e))return this.each(function(t){var n=r(this);n.removeClass(e.call(this,t,n.attr("class")))});if(e&&typeof e=="string"||e===t){var n=(e||"").split(a);for(var i=0,s=this.length;i<s;i++){var o=this[i];if(o.nodeType===1&&o.className)if(e){var f=(" "+o.className+" ").replace(u," ");for(var l=0,c=n.length;l<c;l++)f=f.replace(" "+n[l]+" "," ");o.className=r.trim(f)}else o.className=""}}return this},toggleClass:function(e,t){var n=typeof e,i=typeof t=="boolean";return r.isFunction(e)?this.each(function(n){var i=r(this);i.toggleClass(e.call(this,n,i.attr("class"),t),t)}):this.each(function(){if(n==="string"){var s,o=0,u=r(this),f=t,l=e.split(a);while(s=l[o++])f=i?f:!u.hasClass(s),u[f?"addClass":"removeClass"](s)}else if(n==="undefined"||n==="boolean")this.className&&r._data(this,"__className__",this.className),this.className=this.className||e===!1?"":r._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ";for(var n=0,r=this.length;n<r;n++)if((" "+this[n].className+" ").replace(u," ").indexOf(t)>-1)return!0;return!1},val:function(e){if(!arguments.length){var n=this[0];if(n){if(r.nodeName(n,"option")){var i=n.attributes.value;return!i||i.specified?n.value:n.text}if(r.nodeName(n,"select")){var s=n.selectedIndex,o=[],u=n.options,a=n.type==="select-one";if(s<0)return null;for(var l=a?s:0,c=a?s+1:u.length;l<c;l++){var h=u[l];if(h.selected&&(r.support.optDisabled?!h.disabled:h.getAttribute("disabled")===null)&&(!h.parentNode.disabled||!r.nodeName(h.parentNode,"optgroup"))){e=r(h).val();if(a)return e;o.push(e)}}return a&&!o.length&&u.length?r(u[s]).val():o}return d.test(n.type)&&!r.support.checkOn?n.getAttribute("value")===null?"on":n.value:(n.value||"").replace(f,"")}return t}var p=r.isFunction(e);return this.each(function(t){var n=r(this),i=e;if(this.nodeType!==1)return;p&&(i=e.call(this,t,n.val())),i==null?i="":typeof i=="number"?i+="":r.isArray(i)&&(i=r.map(i,function(e){return e==null?"":e+""}));if(r.isArray(i)&&d.test(this.type))this.checked=r.inArray(n.val(),i)>=0;else if(r.nodeName(this,"select")){var s=r.makeArray(i);r("option",this).each(function(){this.selected=r.inArray(r(this).val(),s)>=0}),s.length||(this.selectedIndex=-1)}else this.value=i})}}),r.extend({attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(e,n,i,s){if(!e||e.nodeType===3||e.nodeType===8||e.nodeType===2)return t;if(s&&n in r.attrFn)return r(e)[n](i);var o=e.nodeType!==1||!r.isXMLDoc(e),u=i!==t;n=o&&r.props[n]||n;if(e.nodeType===1){var a=l.test(n);if(n==="selected"&&!r.support.optSelected){var f=e.parentNode;f&&(f.selectedIndex,f.parentNode&&f.parentNode.selectedIndex)}if((n in e||e[n]!==t)&&o&&!a){u&&(n==="type"&&c.test(e.nodeName)&&e.parentNode&&r.error("type property can't be changed"),i===null?e.nodeType===1&&e.removeAttribute(n):e[n]=i);if(r.nodeName(e,"form")&&e.getAttributeNode(n))return e.getAttributeNode(n).nodeValue;if(n==="tabIndex"){var d=e.getAttributeNode("tabIndex");return d&&d.specified?d.value:h.test(e.nodeName)||p.test(e.nodeName)&&e.href?0:t}return e[n]}if(!r.support.style&&o&&n==="style")return u&&(e.style.cssText=""+i),e.style.cssText;u&&e.setAttribute(n,""+i);if(!e.attributes[n]&&e.hasAttribute&&!e.hasAttribute(n))return t;var v=!r.support.hrefNormalized&&o&&a?e.getAttribute(n,2):e.getAttribute(n);return v===null?t:v}return u&&(e[n]=i),e[n]}});var v=/\.(.*)$/,m=/^(?:textarea|input|select)$/i,g=/\./g,y=/ /g,b=/[^\w\s.|`]/g,w=function(e){return e.replace(b,"\\$&")};r.event={add:function(n,i,s,o){if(n.nodeType===3||n.nodeType===8)return;try{r.isWindow(n)&&n!==e&&!n.frameElement&&(n=e)}catch(u){}if(s===!1)s=E;else if(!s)return;var a,f;s.handler&&(a=s,s=a.handler),s.guid||(s.guid=r.guid++);var l=r._data(n);if(!l)return;var c=l.events,h=l.handle;c||(l.events=c={}),h||(l.handle=h=function(){return typeof r!="undefined"&&!r.event.triggered?r.event.handle.apply(h.elem,arguments):t}),h.elem=n,i=i.split(" ");var p,d=0,v;while(p=i[d++]){f=a?r.extend({},a):{handler:s,data:o},p.indexOf(".")>-1?(v=p.split("."),p=v.shift(),f.namespace=v.slice(0).sort().join(".")):(v=[],f.namespace=""),f.type=p,f.guid||(f.guid=s.guid);var m=c[p],g=r.event.special[p]||{};if(!m){m=c[p]=[];if(!g.setup||g.setup.call(n,o,v,h)===!1)n.addEventListener?n.addEventListener(p,h,!1):n.attachEvent&&n.attachEvent("on"+p,h)}g.add&&(g.add.call(n,f),f.handler.guid||(f.handler.guid=s.guid)),m.push(f),r.event.global[p]=!0}n=null},global:{},remove:function(e,n,i,s){if(e.nodeType===3||e.nodeType===8)return;i===!1&&(i=E);var o,u,a,f,l=0,c,h,p,d,v,m,g,y=r.hasData(e)&&r._data(e),b=y&&y.events;if(!y||!b)return;n&&n.type&&(i=n.handler,n=n.type);if(!n||typeof n=="string"&&n.charAt(0)==="."){n=n||"";for(u in b)r.event.remove(e,u+n);return}n=n.split(" ");while(u=n[l++]){g=u,m=null,c=u.indexOf(".")<0,h=[],c||(h=u.split("."),u=h.shift(),p=new RegExp("(^|\\.)"+r.map(h.slice(0).sort(),w).join("\\.(?:.*\\.)?")+"(\\.|$)")),v=b[u];if(!v)continue;if(!i){for(f=0;f<v.length;f++){m=v[f];if(c||p.test(m.namespace))r.event.remove(e,g,m.handler,f),v.splice(f--,1)}continue}d=r.event.special[u]||{};for(f=s||0;f<v.length;f++){m=v[f];if(i.guid===m.guid){if(c||p.test(m.namespace))s==null&&v.splice(f--,1),d.remove&&d.remove.call(e,m);if(s!=null)break}}if(v.length===0||s!=null&&v.length===1)(!d.teardown||d.teardown.call(e,h)===!1)&&r.removeEvent(e,u,y.handle),o=null,delete b[u]}if(r.isEmptyObject(b)){var S=y.handle;S&&(S.elem=null),delete y.events,delete y.handle,r.isEmptyObject(y)&&r.removeData(e,t,!0)}},trigger:function(e,n,i){var s=e.type||e,o=arguments[3];if(!o){e=typeof e=="object"?e[r.expando]?e:r.extend(r.Event(s),e):r.Event(s),s.indexOf("!")>=0&&(e.type=s=s.slice(0,-1),e.exclusive=!0),i||(e.stopPropagation(),r.event.global[s]&&r.each(r.cache,function(){var t=r.expando,i=this[t];i&&i.events&&i.events[s]&&r.event.trigger(e,n,i.handle.elem)}));if(!i||i.nodeType===3||i.nodeType===8)return t;e.result=t,e.target=i,n=r.makeArray(n),n.unshift(e)}e.currentTarget=i;var u=r._data(i,"handle");u&&u.apply(i,n);var a=i.parentNode||i.ownerDocument;try{i&&i.nodeName&&r.noData[i.nodeName.toLowerCase()]||i["on"+s]&&i["on"+s].apply(i,n)===!1&&(e.result=!1,e.preventDefault())}catch(f){}if(!e.isPropagationStopped()&&a)r.event.trigger(e,n,a,!0);else if(!e.isDefaultPrevented()){var l,c=e.target,h=s.replace(v,""),p=r.nodeName(c,"a")&&h==="click",d=r.event.special[h]||{};if((!d._default||d._default.call(i,e)===!1)&&!p&&!(c&&c.nodeName&&r.noData[c.nodeName.toLowerCase()])){try{c[h]&&(l=c["on"+h],l&&(c["on"+h]=null),r.event.triggered=!0,c[h]())}catch(m){}l&&(c["on"+h]=l),r.event.triggered=!1}}},handle:function(n){var i,s,o,u,a,f=[],l=r.makeArray(arguments);n=l[0]=r.event.fix(n||e.event),n.currentTarget=this,i=n.type.indexOf(".")<0&&!n.exclusive,i||(o=n.type.split("."),n.type=o.shift(),f=o.slice(0).sort(),u=new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.)?")+"(\\.|$)")),n.namespace=n.namespace||f.join("."),a=r._data(this,"events"),s=(a||{})[n.type];if(a&&s){s=s.slice(0);for(var c=0,h=s.length;c<h;c++){var p=s[c];if(i||u.test(p.namespace)){n.handler=p.handler,n.data=p.data,n.handleObj=p;var d=p.handler.apply(this,l);d!==t&&(n.result=d,d===!1&&(n.preventDefault(),n.stopPropagation()));if(n.isImmediatePropagationStopped())break}}}return n.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(e){if(e[r.expando])return e;var i=e;e=r.Event(i);for(var s=this.props.length,o;s;)o=this.props[--s],e[o]=i[o];e.target||(e.target=e.srcElement||n),e.target.nodeType===3&&(e.target=e.target.parentNode),!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement);if(e.pageX==null&&e.clientX!=null){var u=n.documentElement,a=n.body;e.pageX=e.clientX+(u&&u.scrollLeft||a&&a.scrollLeft||0)-(u&&u.clientLeft||a&&a.clientLeft||0),e.pageY=e.clientY+(u&&u.scrollTop||a&&a.scrollTop||0)-(u&&u.clientTop||a&&a.clientTop||0)}return e.which==null&&(e.charCode!=null||e.keyCode!=null)&&(e.which=e.charCode!=null?e.charCode:e.keyCode),!e.metaKey&&e.ctrlKey&&(e.metaKey=e.ctrlKey),!e.which&&e.button!==t&&(e.which=e.button&1?1:e.button&2?3:e.button&4?2:0),e},guid:1e8,proxy:r.proxy,special:{ready:{setup:r.bindReady,teardown:r.noop},live:{add:function(e){r.event.add(this,M(e.origType,e.selector),r.extend({},e,{handler:O,guid:e.handler.guid}))},remove:function(e){r.event.remove(this,M(e.origType,e.selector),e)}},beforeunload:{setup:function(e,t,n){r.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}}},r.removeEvent=n.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent&&e.detachEvent("on"+t,n)},r.Event=function(e){if(!this.preventDefault)return new r.Event(e);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?S:E):this.type=e,this.timeStamp=r.now(),this[r.expando]=!0},r.Event.prototype={preventDefault:function(){this.isDefaultPrevented=S;var e=this.originalEvent;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=S;var e=this.originalEvent;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=S,this.stopPropagation()},isDefaultPrevented:E,isPropagationStopped:E,isImmediatePropagationStopped:E};var x=function(e){var t=e.relatedTarget;try{if(t!==n&&!t.parentNode)return;while(t&&t!==this)t=t.parentNode;t!==this&&(e.type=e.data,r.event.handle.apply(this,arguments))}catch(i){}},T=function(e){e.type=e.data,r.event.handle.apply(this,arguments)};r.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){r.event.special[e]={setup:function(n){r.event.add(this,t,n&&n.selector?T:x,e)},teardown:function(e){r.event.remove(this,t,e&&e.selector?T:x)}}}),r.support.submitBubbles||(r.event.special.submit={setup:function(e,t){if(!this.nodeName||this.nodeName.toLowerCase()==="form")return!1;r.event.add(this,"click.specialSubmit",function(e){var t=e.target,n=t.type;(n==="submit"||n==="image")&&r(t).closest("form").length&&L("submit",this,arguments)}),r.event.add(this,"keypress.specialSubmit",function(e){var t=e.target,n=t.type;(n==="text"||n==="password")&&r(t).closest("form").length&&e.keyCode===13&&L("submit",this,arguments)})},teardown:function(e){r.event.remove(this,".specialSubmit")}});if(!r.support.changeBubbles){var N,C=function(e){var t=e.type,n=e.value;return t==="radio"||t==="checkbox"?n=e.checked:t==="select-multiple"?n=e.selectedIndex>-1?r.map(e.options,function(e){return e.selected}).join("-"):"":e.nodeName.toLowerCase()==="select"&&(n=e.selectedIndex),n},k=function(n){var i=n.target,s,o;if(!m.test(i.nodeName)||i.readOnly)return;s=r._data(i,"_change_data"),o=C(i),(n.type!=="focusout"||i.type!=="radio")&&r._data(i,"_change_data",o);if(s===t||o===s)return;if(s!=null||o)n.type="change",n.liveFired=t,r.event.trigger(n,arguments[1],i)};r.event.special.change={filters:{focusout:k,beforedeactivate:k,click:function(e){var t=e.target,n=t.type;(n==="radio"||n==="checkbox"||t.nodeName.toLowerCase()==="select")&&k.call(this,e)},keydown:function(e){var t=e.target,n=t.type;(e.keyCode===13&&t.nodeName.toLowerCase()!=="textarea"||e.keyCode===32&&(n==="checkbox"||n==="radio")||n==="select-multiple")&&k.call(this,e)},beforeactivate:function(e){var t=e.target;r._data(t,"_change_data",C(t))}},setup:function(e,t){if(this.type==="file")return!1;for(var n in N)r.event.add(this,n+".specialChange",N[n]);return m.test(this.nodeName)},teardown:function(e){return r.event.remove(this,".specialChange"),m.test(this.nodeName)}},N=r.event.special.change.filters,N.focus=N.beforeactivate}n.addEventListener&&r.each({focus:"focusin",blur:"focusout"},function(e,t){function n(e){return e=r.event.fix(e),e.type=t,r.event.handle.call(this,e)}r.event.special[t]={setup:function(){this.addEventListener(e,n,!0)},teardown:function(){this.removeEventListener(e,n,!0)}}}),r.each(["bind","one"],function(e,n){r.fn[n]=function(e,i,s){if(typeof e=="object"){for(var o in e)this[n](o,i,e[o],s);return this}if(r.isFunction(i)||i===!1)s=i,i=t;var u=n==="one"?r.proxy(s,function(e){return r(this).unbind(e,u),s.apply(this,arguments)}):s;if(e==="unload"&&n!=="one")this.one(e,i,s);else for(var a=0,f=this.length;a<f;a++)r.event.add(this[a],e,u,i);return this}}),r.fn.extend({unbind:function(e,t){if(typeof e=="object"&&!e.preventDefault)for(var n in e)this.unbind(n,e[n]);else for(var i=0,s=this.length;i<s;i++)r.event.remove(this[i],e,t);return this},delegate:function(e,t,n,r){return this.live(t,n,r,e)},undelegate:function(e,t,n){return arguments.length===0?this.unbind("live"):this.die(t,null,n,e)},trigger:function(e,t){return this.each(function(){r.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0]){var n=r.Event(e);return n.preventDefault(),n.stopPropagation(),r.event.trigger(n,t,this[0]),n.result}},toggle:function(e){var t=arguments,n=1;while(n<t.length)r.proxy(e,t[n++]);return this.click(r.proxy(e,function(i){var s=(r._data(this,"lastToggle"+e.guid)||0)%n;return r._data(this,"lastToggle"+e.guid,s+1),i.preventDefault(),t[s].apply(this,arguments)||!1}))},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}});var A={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};r.each(["live","die"],function(e,n){r.fn[n]=function(e,i,s,o){var u,a=0,f,l,c,h=o||this.selector,p=o?this:r(this.context);if(typeof e=="object"&&!e.preventDefault){for(var d in e)p[n](d,i,e[d],h);return this}r.isFunction(i)&&(s=i,i=t),e=(e||"").split(" ");while((u=e[a++])!=null){f=v.exec(u),l="",f&&(l=f[0],u=u.replace(v,""));if(u==="hover"){e.push("mouseenter"+l,"mouseleave"+l);continue}c=u,u==="focus"||u==="blur"?(e.push(A[u]+l),u+=l):u=(A[u]||u)+l;if(n==="live")for(var m=0,g=p.length;m<g;m++)r.event.add(p[m],"live."+M(u,h),{data:i,selector:h,handler:s,origType:u,origHandler:s,preType:c});else p.unbind("live."+M(u,h),s)}return this}}),r.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(e,t){r.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.bind(t,e,n):this.trigger(t)},r.attrFn&&(r.attrFn[t]=!0)}),function(){function b(e,t,n,r,i,s){for(var o=0,u=r.length;o<u;o++){var a=r[o];if(a){var f=!1;a=a[e];while(a){if(a.sizcache===n){f=r[a.sizset];break}a.nodeType===1&&!s&&(a.sizcache=n,a.sizset=o);if(a.nodeName.toLowerCase()===t){f=a;break}a=a[e]}r[o]=f}}}function w(e,t,n,r,i,s){for(var o=0,u=r.length;o<u;o++){var a=r[o];if(a){var f=!1;a=a[e];while(a){if(a.sizcache===n){f=r[a.sizset];break}if(a.nodeType===1){s||(a.sizcache=n,a.sizset=o);if(typeof t!="string"){if(a===t){f=!0;break}}else if(l.filter(t,[a]).length>0){f=a;break}}a=a[e]}r[o]=f}}}var e=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,i=0,s=Object.prototype.toString,o=!1,u=!0,a=/\\/g,f=/\W/;[0,0].sort(function(){return u=!1,0});var l=function(t,r,i,o){i=i||[],r=r||n;var u=r;if(r.nodeType!==1&&r.nodeType!==9)return[];if(!t||typeof t!="string")return i;var a,f,p,d,m,g,y,b,w=!0,S=l.isXML(r),x=[],T=t;do{e.exec(""),a=e.exec(T);if(a){T=a[3],x.push(a[1]);if(a[2]){d=a[3];break}}}while(a);if(x.length>1&&h.exec(t))if(x.length===2&&c.relative[x[0]])f=E(x[0]+x[1],r);else{f=c.relative[x[0]]?[r]:l(x.shift(),r);while(x.length)t=x.shift(),c.relative[t]&&(t+=x.shift()),f=E(t,f)}else{!o&&x.length>1&&r.nodeType===9&&!S&&c.match.ID.test(x[0])&&!c.match.ID.test(x[x.length-1])&&(m=l.find(x.shift(),r,S),r=m.expr?l.filter(m.expr,m.set)[0]:m.set[0]);if(r){m=o?{expr:x.pop(),set:v(o)}:l.find(x.pop(),x.length!==1||x[0]!=="~"&&x[0]!=="+"||!r.parentNode?r:r.parentNode,S),f=m.expr?l.filter(m.expr,m.set):m.set,x.length>0?p=v(f):w=!1;while(x.length)g=x.pop(),y=g,c.relative[g]?y=x.pop():g="",y==null&&(y=r),c.relative[g](p,y,S)}else p=x=[]}p||(p=f),p||l.error(g||t);if(s.call(p)==="[object Array]")if(!w)i.push.apply(i,p);else if(r&&r.nodeType===1)for(b=0;p[b]!=null;b++)p[b]&&(p[b]===!0||p[b].nodeType===1&&l.contains(r,p[b]))&&i.push(f[b]);else for(b=0;p[b]!=null;b++)p[b]&&p[b].nodeType===1&&i.push(f[b]);else v(p,i);return d&&(l(d,u,i,o),l.uniqueSort(i)),i};l.uniqueSort=function(e){if(g){o=u,e.sort(g);if(o)for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1)}return e},l.matches=function(e,t){return l(e,null,null,t)},l.matchesSelector=function(e,t){return l(t,null,null,[e]).length>0},l.find=function(e,t,n){var r;if(!e)return[];for(var i=0,s=c.order.length;i<s;i++){var o,u=c.order[i];if(o=c.leftMatch[u].exec(e)){var f=o[1];o.splice(1,1);if(f.substr(f.length-1)!=="\\"){o[1]=(o[1]||"").replace(a,""),r=c.find[u](o,t,n);if(r!=null){e=e.replace(c.match[u],"");break}}}}return r||(r=typeof t.getElementsByTagName!="undefined"?t.getElementsByTagName("*"):[]),{set:r,expr:e}},l.filter=function(e,n,r,i){var s,o,u=e,a=[],f=n,h=n&&n[0]&&l.isXML(n[0]);while(e&&n.length){for(var p in c.filter)if((s=c.leftMatch[p].exec(e))!=null&&s[2]){var d,v,m=c.filter[p],g=s[1];o=!1,s.splice(1,1);if(g.substr(g.length-1)==="\\")continue;f===a&&(a=[]);if(c.preFilter[p]){s=c.preFilter[p](s,f,r,a,i,h);if(!s)o=d=!0;else if(s===!0)continue}if(s)for(var y=0;(v=f[y])!=null;y++)if(v){d=m(v,s,y,f);var b=i^!!d;r&&d!=null?b?o=!0:f[y]=!1:b&&(a.push(v),o=!0)}if(d!==t){r||(f=a),e=e.replace(c.match[p],"");if(!o)return[];break}}if(e===u){if(o!=null)break;l.error(e)}u=e}return f},l.error=function(e){throw"Syntax error, unrecognized expression: "+e};var c=l.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(e,t){var n=typeof t=="string",r=n&&!f.test(t),i=n&&!r;r&&(t=t.toLowerCase());for(var s=0,o=e.length,u;s<o;s++)if(u=e[s]){while((u=u.previousSibling)&&u.nodeType!==1);e[s]=i||u&&u.nodeName.toLowerCase()===t?u||!1:u===t}i&&l.filter(t,e,!0)},">":function(e,t){var n,r=typeof t=="string",i=0,s=e.length;if(r&&!f.test(t)){t=t.toLowerCase();for(;i<s;i++){n=e[i];if(n){var o=n.parentNode;e[i]=o.nodeName.toLowerCase()===t?o:!1}}}else{for(;i<s;i++)n=e[i],n&&(e[i]=r?n.parentNode:n.parentNode===t);r&&l.filter(t,e,!0)}},"":function(e,t,n){var r,s=i++,o=w;typeof t=="string"&&!f.test(t)&&(t=t.toLowerCase(),r=t,o=b),o("parentNode",t,s,e,r,n)},"~":function(e,t,n){var r,s=i++,o=w;typeof t=="string"&&!f.test(t)&&(t=t.toLowerCase(),r=t,o=b),o("previousSibling",t,s,e,r,n)}},find:{ID:function(e,t,n){if(typeof t.getElementById!="undefined"&&!n){var r=t.getElementById(e[1]);return r&&r.parentNode?[r]:[]}},NAME:function(e,t){if(typeof t.getElementsByName!="undefined"){var n=[],r=t.getElementsByName(e[1]);for(var i=0,s=r.length;i<s;i++)r[i].getAttribute("name")===e[1]&&n.push(r[i]);return n.length===0?null:n}},TAG:function(e,t){if(typeof t.getElementsByTagName!="undefined")return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(e,t,n,r,i,s){e=" "+e[1].replace(a,"")+" ";if(s)return e;for(var o=0,u;(u=t[o])!=null;o++)u&&(i^(u.className&&(" "+u.className+" ").replace(/[\t\n\r]/g," ").indexOf(e)>=0)?n||r.push(u):n&&(t[o]=!1));return!1},ID:function(e){return e[1].replace(a,"")},TAG:function(e,t){return e[1].replace(a,"").toLowerCase()},CHILD:function(e){if(e[1]==="nth"){e[2]||l.error(e[0]),e[2]=e[2].replace(/^\+|\s*/g,"");var t=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}else e[2]&&l.error(e[0]);return e[0]=i++,e},ATTR:function(e,t,n,r,i,s){var o=e[1]=e[1].replace(a,"");return!s&&c.attrMap[o]&&(e[1]=c.attrMap[o]),e[4]=(e[4]||e[5]||"").replace(a,""),e[2]==="~="&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(t,n,r,i,s){if(t[1]==="not"){if(!((e.exec(t[3])||"").length>1||/^\w/.test(t[3]))){var o=l.filter(t[3],n,r,!0^s);return r||i.push.apply(i,o),!1}t[3]=l(t[3],null,null,n)}else if(c.match.POS.test(t[0])||c.match.CHILD.test(t[0]))return!0;return t},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return e.disabled===!1&&e.type!=="hidden"},disabled:function(e){return e.disabled===!0},checked:function(e){return e.checked===!0},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!l(n[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){return"text"===e.getAttribute("type")},radio:function(e){return"radio"===e.type},checkbox:function(e){return"checkbox"===e.type},file:function(e){return"file"===e.type},password:function(e){return"password"===e.type},submit:function(e){return"submit"===e.type},image:function(e){return"image"===e.type},reset:function(e){return"reset"===e.type},button:function(e){return"button"===e.type||e.nodeName.toLowerCase()==="button"},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)}},setFilters:{first:function(e,t){return t===0},last:function(e,t,n,r){return t===r.length-1},even:function(e,t){return t%2===0},odd:function(e,t){return t%2===1},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0===t},eq:function(e,t,n){return n[3]-0===t}},filter:{PSEUDO:function(e,t,n,r){var i=t[1],s=c.filters[i];if(s)return s(e,n,t,r);if(i==="contains")return(e.textContent||e.innerText||l.getText([e])||"").indexOf(t[3])>=0;if(i==="not"){var o=t[3];for(var u=0,a=o.length;u<a;u++)if(o[u]===e)return!1;return!0}l.error(i)},CHILD:function(e,t){var n=t[1],r=e;switch(n){case"only":case"first":while(r=r.previousSibling)if(r.nodeType===1)return!1;if(n==="first")return!0;r=e;case"last":while(r=r.nextSibling)if(r.nodeType===1)return!1;return!0;case"nth":var i=t[2],s=t[3];if(i===1&&s===0)return!0;var o=t[0],u=e.parentNode;if(u&&(u.sizcache!==o||!e.nodeIndex)){var a=0;for(r=u.firstChild;r;r=r.nextSibling)r.nodeType===1&&(r.nodeIndex=++a);u.sizcache=o}var f=e.nodeIndex-s;return i===0?f===0:f%i===0&&f/i>=0}},ID:function(e,t){return e.nodeType===1&&e.getAttribute("id")===t},TAG:function(e,t){return t==="*"&&e.nodeType===1||e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var n=t[1],r=c.attrHandle[n]?c.attrHandle[n](e):e[n]!=null?e[n]:e.getAttribute(n),i=r+"",s=t[2],o=t[4];return r==null?s==="!=":s==="="?i===o:s==="*="?i.indexOf(o)>=0:s==="~="?(" "+i+" ").indexOf(o)>=0:o?s==="!="?i!==o:s==="^="?i.indexOf(o)===0:s==="$="?i.substr(i.length-o.length)===o:s==="|="?i===o||i.substr(0,o.length+1)===o+"-":!1:i&&r!==!1},POS:function(e,t,n,r){var i=t[2],s=c.setFilters[i];if(s)return s(e,n,t,r)}}},h=c.match.POS,p=function(e,t){return"\\"+(t-0+1)};for(var d in c.match)c.match[d]=new RegExp(c.match[d].source+/(?![^\[]*\])(?![^\(]*\))/.source),c.leftMatch[d]=new RegExp(/(^(?:.|\r|\n)*?)/.source+c.match[d].source.replace(/\\(\d+)/g,p));var v=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(n.documentElement.childNodes,0)[0].nodeType}catch(m){v=function(e,t){var n=0,r=t||[];if(s.call(e)==="[object Array]")Array.prototype.push.apply(r,e);else if(typeof e.length=="number")for(var i=e.length;n<i;n++)r.push(e[n]);else for(;e[n];n++)r.push(e[n]);return r}}var g,y;n.documentElement.compareDocumentPosition?g=function(e,t){return e===t?(o=!0,0):!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition?-1:1:e.compareDocumentPosition(t)&4?-1:1}:(g=function(e,t){var n,r,i=[],s=[],u=e.parentNode,a=t.parentNode,f=u;if(e===t)return o=!0,0;if(u===a)return y(e,t);if(!u)return-1;if(!a)return 1;while(f)i.unshift(f),f=f.parentNode;f=a;while(f)s.unshift(f),f=f.parentNode;n=i.length,r=s.length;for(var l=0;l<n&&l<r;l++)if(i[l]!==s[l])return y(i[l],s[l]);return l===n?y(e,s[l],-1):y(i[l],t,1)},y=function(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}),l.getText=function(e){var t="",n;for(var r=0;e[r];r++)n=e[r],n.nodeType===3||n.nodeType===4?t+=n.nodeValue:n.nodeType!==8&&(t+=l.getText(n.childNodes));return t},function(){var e=n.createElement("div"),r="script"+(new Date).getTime(),i=n.documentElement;e.innerHTML="<a name='"+r+"'/>",i.insertBefore(e,i.firstChild),n.getElementById(r)&&(c.find.ID=function(e,n,r){if(typeof n.getElementById!="undefined"&&!r){var i=n.getElementById(e[1]);return i?i.id===e[1]||typeof i.getAttributeNode!="undefined"&&i.getAttributeNode("id").nodeValue===e[1]?[i]:t:[]}},c.filter.ID=function(e,t){var n=typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id");return e.nodeType===1&&n&&n.nodeValue===t}),i.removeChild(e),i=e=null}(),function(){var e=n.createElement("div");e.appendChild(n.createComment("")),e.getElementsByTagName("*").length>0&&(c.find.TAG=function(e,t){var n=t.getElementsByTagName(e[1]);if(e[1]==="*"){var r=[];for(var i=0;n[i];i++)n[i].nodeType===1&&r.push(n[i]);n=r}return n}),e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!="undefined"&&e.firstChild.getAttribute("href")!=="#"&&(c.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),n.querySelectorAll&&function(){var e=l,t=n.createElement("div"),r="__sizzle__";t.innerHTML="<p class='TEST'></p>";if(t.querySelectorAll&&t.querySelectorAll(".TEST").length===0)return;l=function(t,i,s,o){i=i||n;if(!o&&!l.isXML(i)){var u=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t);if(u&&(i.nodeType===1||i.nodeType===9)){if(u[1])return v(i.getElementsByTagName(t),s);if(u[2]&&c.find.CLASS&&i.getElementsByClassName)return v(i.getElementsByClassName(u[2]),s)}if(i.nodeType===9){if(t==="body"&&i.body)return v([i.body],s);if(u&&u[3]){var a=i.getElementById(u[3]);if(!a||!a.parentNode)return v([],s);if(a.id===u[3])return v([a],s)}try{return v(i.querySelectorAll(t),s)}catch(f){}}else if(i.nodeType===1&&i.nodeName.toLowerCase()!=="object"){var h=i,p=i.getAttribute("id"),d=p||r,m=i.parentNode,g=/^\s*[+~]/.test(t);p?d=d.replace(/'/g,"\\$&"):i.setAttribute("id",d),g&&m&&(i=i.parentNode);try{if(!g||m)return v(i.querySelectorAll("[id='"+d+"'] "+t),s)}catch(y){}finally{p||h.removeAttribute("id")}}}return e(t,i,s,o)};for(var i in e)l[i]=e[i];t=null}(),function(){var e=n.documentElement,t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector,r=!1;try{t.call(n.documentElement,"[test!='']:sizzle")}catch(i){r=!0}t&&(l.matchesSelector=function(e,n){n=n.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!l.isXML(e))try{if(r||!c.match.PSEUDO.test(n)&&!/!=/.test(n))return t.call(e,n)}catch(i){}return l(n,null,null,[e]).length>0})}(),function(){var e=n.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0)return;e.lastChild.className="e";if(e.getElementsByClassName("e").length===1)return;c.order.splice(1,0,"CLASS"),c.find.CLASS=function(e,t,n){if(typeof t.getElementsByClassName!="undefined"&&!n)return t.getElementsByClassName(e[1])},e=null}(),n.documentElement.contains?l.contains=function(e,t){return e!==t&&(e.contains?e.contains(t):!0)}:n.documentElement.compareDocumentPosition?l.contains=function(e,t){return!!(e.compareDocumentPosition(t)&16)}:l.contains=function(){return!1},l.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?t.nodeName!=="HTML":!1};var E=function(e,t){var n,r=[],i="",s=t.nodeType?[t]:t;while(n=c.match.PSEUDO.exec(e))i+=n[0],e=e.replace(c.match.PSEUDO,"");e=c.relative[e]?e+"*":e;for(var o=0,u=s.length;o<u;o++)l(e,s[o],r);return l.filter(i,r)};r.find=l,r.expr=l.selectors,r.expr[":"]=r.expr.filters,r.unique=l.uniqueSort,r.text=l.getText,r.isXMLDoc=l.isXML,r.contains=l.contains}();var _=/Until$/,D=/^(?:parents|prevUntil|prevAll)/,P=/,/,H=/^.[^:#\[\.,]*$/,B=Array.prototype.slice,j=r.expr.match.POS,F={children:!0,contents:!0,next:!0,prev:!0};r.fn.extend({find:function(e){var t=this.pushStack("","find",e),n=0;for(var i=0,s=this.length;i<s;i++){n=t.length,r.find(e,this[i],t);if(i>0)for(var o=n;o<t.length;o++)for(var u=0;u<n;u++)if(t[u]===t[o]){t.splice(o--,1);break}}return t},has:function(e){var t=r(e);return this.filter(function(){for(var e=0,n=t.length;e<n;e++)if(r.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(q(this,e,!1),"not",e)},filter:function(e){return this.pushStack(q(this,e,!0),"filter",e)},is:function(e){return!!e&&r.filter(e,this).length>0},closest:function(e,t){var n=[],i,s,o=this[0];if(r.isArray(e)){var u,a,f={},l=1;if(o&&e.length){for(i=0,s=e.length;i<s;i++)a=e[i],f[a]||(f[a]=r.expr.match.POS.test(a)?r(a,t||this.context):a);while(o&&o.ownerDocument&&o!==t){for(a in f)u=f[a],(u.jquery?u.index(o)>-1:r(o).is(u))&&n.push({selector:a,elem:o,level:l});o=o.parentNode,l++}}return n}var c=j.test(e)?r(e,t||this.context):null;for(i=0,s=this.length;i<s;i++){o=this[i];while(o){if(c?c.index(o)>-1:r.find.matchesSelector(o,e)){n.push(o);break}o=o.parentNode;if(!o||!o.ownerDocument||o===t)break}}return n=n.length>1?r.unique(n):n,this.pushStack(n,"closest",e)},index:function(e){return!e||typeof e=="string"?r.inArray(this[0],e?r(e):this.parent().children()):r.inArray(e.jquery?e[0]:e,this)},add:function(e,t){var n=typeof e=="string"?r(e,t):r.makeArray(e),i=r.merge(this.get(),n);return this.pushStack(I(n[0])||I(i[0])?i:r.unique(i))},andSelf:function(){return this.add(this.prevObject)}}),r.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return r.dir(e,"parentNode")},parentsUntil:function(e,t,n){return r.dir(e,"parentNode",n)},next:function(e){return r.nth(e,2,"nextSibling")},prev:function(e){return r.nth(e,2,"previousSibling")},nextAll:function(e){return r.dir(e,"nextSibling")},prevAll:function(e){return r.dir(e,"previousSibling")},nextUntil:function(e,t,n){return r.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return r.dir(e,"previousSibling",n)},siblings:function(e){return r.sibling(e.parentNode.firstChild,e)},children:function(e){return r.sibling(e.firstChild)},contents:function(e){return r.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:r.makeArray(e.childNodes)}},function(e,t){r.fn[e]=function(n,i){var s=r.map(this,t,n),o=B.call(arguments);return _.test(e)||(i=n),i&&typeof i=="string"&&(s=r.filter(i,s)),s=this.length>1&&!F[e]?r.unique(s):s,(this.length>1||P.test(i))&&D.test(e)&&(s=s.reverse()),this.pushStack(s,e,o.join(","))}}),r.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?r.find.matchesSelector(t[0],e)?[t[0]]:[]:r.find.matches(e,t)},dir:function(e,n,i){var s=[],o=e[n];while(o&&o.nodeType!==9&&(i===t||o.nodeType!==1||!r(o).is(i)))o.nodeType===1&&s.push(o),o=o[n];return s},nth:function(e,t,n,r){t=t||1;var i=0;for(;e;e=e[n])if(e.nodeType===1&&++i===t)break;return e},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var R=/ jQuery\d+="(?:\d+|null)"/g,U=/^\s+/,z=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,W=/<([\w:]+)/,X=/<tbody/i,V=/<|&#?\w+;/,$=/<(?:script|object|embed|option|style)/i,J=/checked\s*(?:[^=]|=\s*.checked.)/i,K={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};K.optgroup=K.option,K.tbody=K.tfoot=K.colgroup=K.caption=K.thead,K.th=K.td,r.support.htmlSerialize||(K._default=[1,"div<div>","</div>"]),r.fn.extend({text:function(e){return r.isFunction(e)?this.each(function(t){var n=r(this);n.text(e.call(this,t,n.text()))}):typeof e!="object"&&e!==t?this.empty().append((this[0]&&this[0].ownerDocument||n).createTextNode(e)):r.text(this)},wrapAll:function(e){if(r.isFunction(e))return this.each(function(t){r(this).wrapAll(e.call(this,t))});if(this[0]){var t=r(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return r.isFunction(e)?this.each(function(t){r(this).wrapInner(e.call(this,t))}):this.each(function(){var t=r(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){return this.each(function(){r(this).wrapAll(e)})},unwrap:function(){return this.parent().each(function(){r.nodeName(this,"body")||r(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){this.nodeType===1&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){this.nodeType===1&&this.insertBefore(e,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=r(arguments[0]);return e.push.apply(e,this.toArray()),this.pushStack(e,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=this.pushStack(this,"after",arguments);return e.push.apply(e,r(arguments[0]).toArray()),e}},remove:function(e,t){for(var n=0,i;(i=this[n])!=null;n++)if(!e||r.filter(e,[i]).length)!t&&i.nodeType===1&&(r.cleanData(i.getElementsByTagName("*")),r.cleanData([i])),i.parentNode&&i.parentNode.removeChild(i);return this},empty:function(){for(var e=0,t;(t=this[e])!=null;e++){t.nodeType===1&&r.cleanData(t.getElementsByTagName("*"));while(t.firstChild)t.removeChild(t.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return r.clone(this,e,t)})},html:function(e){if(e===t)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(R,""):null;if(typeof e=="string"&&!$.test(e)&&(r.support.leadingWhitespace||!U.test(e))&&!K[(W.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(z,"<$1></$2>");try{for(var n=0,i=this.length;n<i;n++)this[n].nodeType===1&&(r.cleanData(this[n].getElementsByTagName("*")),this[n].innerHTML=e)}catch(s){this.empty().append(e)}}else r.isFunction(e)?this.each(function(t){var n=r(this);n.html(e.call(this,t,n.html()))}):this.empty().append(e);return this},replaceWith:function(e){return this[0]&&this[0].parentNode?r.isFunction(e)?this.each(function(t){var n=r(this),i=n.html();n.replaceWith(e.call(this,t,i))}):(typeof e!="string"&&(e=r(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;r(this).remove(),t?r(t).before(e):r(n).append(e)})):this.pushStack(r(r.isFunction(e)?e():e),"replaceWith",e)},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,i){var s,o,u,a,f=e[0],l=[];if(!r.support.checkClone&&arguments.length===3&&typeof f=="string"&&J.test(f))return this.each(function(){r(this).domManip(e,n,i,!0)});if(r.isFunction(f))return this.each(function(s){var o=r(this);e[0]=f.call(this,s,n?o.html():t),o.domManip(e,n,i)});if(this[0]){a=f&&f.parentNode,r.support.parentNode&&a&&a.nodeType===11&&a.childNodes.length===this.length?s={fragment:a}:s=r.buildFragment(e,this,l),u=s.fragment,u.childNodes.length===1?o=u=u.firstChild:o=u.firstChild;if(o){n=n&&r.nodeName(o,"tr");for(var c=0,h=this.length,p=h-1;c<h;c++)i.call(n?Q(this[c],o):this[c],s.cacheable||h>1&&c<p?r.clone(u,!0,!0):u)}l.length&&r.each(l,et)}return this}}),r.buildFragment=function(e,t,i){var s,o,u,a=t&&t[0]?t[0].ownerDocument||t[0]:n;return e.length===1&&typeof e[0]=="string"&&e[0].length<512&&a===n&&e[0].charAt(0)==="<"&&!$.test(e[0])&&(r.support.checkClone||!J.test(e[0]))&&(o=!0,u=r.fragments[e[0]],u&&u!==1&&(s=u)),s||(s=a.createDocumentFragment(),r.clean(e,a,s,i)),o&&(r.fragments[e[0]]=u?s:1),{fragment:s,cacheable:o}},r.fragments={},r.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){r.fn[e]=function(n){var i=[],s=r(n),o=this.length===1&&this[0].parentNode;if(o&&o.nodeType===11&&o.childNodes.length===1&&s.length===1)return s[t](this[0]),this;for(var u=0,a=s.length;u<a;u++){var f=(u>0?this.clone(!0):this).get();r(s[u])[t](f),i=i.concat(f)}return this.pushStack(i,e,s.selector)}}),r.extend({clone:function(e,t,n){var i=e.cloneNode(!0),s,o,u;if((!r.support.noCloneEvent||!r.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!r.isXMLDoc(e)){Y(e,i),s=Z(e),o=Z(i);for(u=0;s[u];++u)Y(s[u],o[u])}if(t){G(e,i);if(n){s=Z(e),o=Z(i);for(u=0;s[u];++u)G(s[u],o[u])}}return i},clean:function(e,t,i,s){t=t||n,typeof t.createElement=="undefined"&&(t=t.ownerDocument||t[0]&&t[0].ownerDocument||n);var o=[];for(var u=0,a;(a=e[u])!=null;u++){typeof a=="number"&&(a+="");if(!a)continue;if(typeof a=="string"&&!V.test(a))a=t.createTextNode(a);else if(typeof a=="string"){a=a.replace(z,"<$1></$2>");var f=(W.exec(a)||["",""])[1].toLowerCase(),l=K[f]||K._default,c=l[0],h=t.createElement("div");h.innerHTML=l[1]+a+l[2];while(c--)h=h.lastChild;if(!r.support.tbody){var p=X.test(a),d=f==="table"&&!p?h.firstChild&&h.firstChild.childNodes:l[1]==="<table>"&&!p?h.childNodes:[];for(var v=d.length-1;v>=0;--v)r.nodeName(d[v],"tbody")&&!d[v].childNodes.length&&d[v].parentNode.removeChild(d[v])}!r.support.leadingWhitespace&&U.test(a)&&h.insertBefore(t.createTextNode(U.exec(a)[0]),h.firstChild),a=h.childNodes}a.nodeType?o.push(a):o=r.merge(o,a)}if(i)for(u=0;o[u];u++)s&&r.nodeName(o[u],"script")&&(!o[u].type||o[u].type.toLowerCase()==="text/javascript")?s.push(o[u].parentNode?o[u].parentNode.removeChild(o[u]):o[u]):(o[u].nodeType===1&&o.splice.apply(o,[u+1,0].concat(r.makeArray(o[u].getElementsByTagName("script")))),i.appendChild(o[u]));return o},cleanData:function(e){var t,n,i=r.cache,s=r.expando,o=r.event.special,u=r.support.deleteExpando;for(var a=0,f;(f=e[a])!=null;a++){if(f.nodeName&&r.noData[f.nodeName.toLowerCase()])continue;n=f[r.expando];if(n){t=i[n]&&i[n][s];if(t&&t.events){for(var l in t.events)o[l]?r.event.remove(f,l):r.removeEvent(f,l,t.handle);t.handle&&(t.handle.elem=null)}u?delete f[r.expando]:f.removeAttribute&&f.removeAttribute(r.expando),delete i[n]}}}});var tt=/alpha\([^)]*\)/i,nt=/opacity=([^)]*)/,rt=/-([a-z])/ig,it=/([A-Z])/g,st=/^-?\d+(?:px)?$/i,ot=/^-?\d/,ut={position:"absolute",visibility:"hidden",display:"block"},at=["Left","Right"],ft=["Top","Bottom"],lt,ct,ht,pt=function(e,t){return t.toUpperCase()};r.fn.css=function(e,n){return arguments.length===2&&n===t?this:r.access(this,e,n,!0,function(e,n,i){return i!==t?r.style(e,n,i):r.css(e,n)})},r.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=lt(e,"opacity","opacity");return n===""?"1":n}return e.style.opacity}}},cssNumber:{zIndex:!0,fontWeight:!0,opacity:!0,zoom:!0,lineHeight:!0},cssProps:{"float":r.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,i,s){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var o,u=r.camelCase(n),a=e.style,f=r.cssHooks[u];n=r.cssProps[u]||u;if(i===t)return f&&"get"in f&&(o=f.get(e,!1,s))!==t?o:a[n];if(typeof i=="number"&&isNaN(i)||i==null)return;typeof i=="number"&&!r.cssNumber[u]&&(i+="px");if(!f||!("set"in f)||(i=f.set(e,i))!==t)try{a[n]=i}catch(l){}},css:function(e,n,i){var s,o=r.camelCase(n),u=r.cssHooks[o];n=r.cssProps[o]||o;if(u&&"get"in u&&(s=u.get(e,!0,i))!==t)return s;if(lt)return lt(e,n,o)},swap:function(e,t,n){var r={};for(var i in t)r[i]=e.style[i],e.style[i]=t[i];n.call(e);for(i in t)e.style[i]=r[i]},camelCase:function(e){return e.replace(rt,pt)}}),r.curCSS=r.css,r.each(["height","width"],function(e,t){r.cssHooks[t]={get:function(e,n,i){var s;if(n){e.offsetWidth!==0?s=dt(e,t,i):r.swap(e,ut,function(){s=dt(e,t,i)});if(s<=0){s=lt(e,t,t),s==="0px"&&ht&&(s=ht(e,t,t));if(s!=null)return s===""||s==="auto"?"0px":s}return s<0||s==null?(s=e.style[t],s===""||s==="auto"?"0px":s):typeof s=="string"?s:s+"px"}},set:function(e,t){if(!st.test(t))return t;t=parseFloat(t);if(t>=0)return t+"px"}}}),r.support.opacity||(r.cssHooks.opacity={get:function(e,t){return nt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100+"":t?"1":""},set:function(e,t){var n=e.style;n.zoom=1;var i=r.isNaN(t)?"":"alpha(opacity="+t*100+")",s=n.filter||"";n.filter=tt.test(s)?s.replace(tt,i):n.filter+" "+i}}),n.defaultView&&n.defaultView.getComputedStyle&&(ct=function(e,n,i){var s,o,u;i=i.replace(it,"-$1").toLowerCase();if(!(o=e.ownerDocument.defaultView))return t;if(u=o.getComputedStyle(e,null))s=u.getPropertyValue(i),s===""&&!r.contains(e.ownerDocument.documentElement,e)&&(s=r.style(e,i));return s}),n.documentElement.currentStyle&&(ht=function(e,t){var n,r=e.currentStyle&&e.currentStyle[t],i=e.runtimeStyle&&e.runtimeStyle[t],s=e.style;return!st.test(r)&&ot.test(r)&&(n=s.left,i&&(e.runtimeStyle.left=e.currentStyle.left),s.left=t==="fontSize"?"1em":r||0,r=s.pixelLeft+"px",s.left=n,i&&(e.runtimeStyle.left=i)),r===""?"auto":r}),lt=ct||ht,r.expr&&r.expr.filters&&(r.expr.filters.hidden=function(e){var t=e.offsetWidth,n=e.offsetHeight;return t===0&&n===0||!r.support.reliableHiddenOffsets&&(e.style.display||r.css(e,"display"))==="none"},r.expr.filters.visible=function(e){return!r.expr.filters.hidden(e)});var vt=/%20/g,mt=/\[\]$/,gt=/\r?\n/g,yt=/#.*$/,bt=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,wt=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Et=/(?:^file|^widget|\-extension):$/,St=/^(?:GET|HEAD)$/,xt=/^\/\//,Tt=/\?/,Nt=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Ct=/^(?:select|textarea)/i,kt=/\s+/,Lt=/([?&])_=[^&]*/,At=/(^|\-)([a-z])/g,Ot=function(e,t,n){return t+n.toUpperCase()},Mt=/^([\w\+\.\-]+:)\/\/([^\/?#:]*)(?::(\d+))?/,_t=r.fn.load,Dt={},Pt={},Ht,Bt;try{Ht=n.location.href}catch(jt){Ht=n.createElement("a"),Ht.href="",Ht=Ht.href}Bt=Mt.exec(Ht.toLowerCase()),r.fn.extend({load:function(e,n,i){if(typeof e!="string"&&_t)return _t.apply(this,arguments);if(!this.length)return this;var s=e.indexOf(" ");if(s>=0){var o=e.slice(s,e.length);e=e.slice(0,s)}var u="GET";n&&(r.isFunction(n)?(i=n,n=t):typeof n=="object"&&(n=r.param(n,r.ajaxSettings.traditional),u="POST"));var a=this;return r.ajax({url:e,type:u,dataType:"html",data:n,complete:function(e,t,n){n=e.responseText,e.isResolved()&&(e.done(function(e){n=e}),a.html(o?r("<div>").append(n.replace(Nt,"")).find(o):n)),i&&a.each(i,[n,t,e])}}),this},serialize:function(){return r.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?r.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Ct.test(this.nodeName)||wt.test(this.type))}).map(function(e,t){var n=r(this).val();return n==null?null:r.isArray(n)?r.map(n,function(e,n){return{name:t.name,value:e.replace(gt,"\r\n")}}):{name:t.name,value:n.replace(gt,"\r\n")}}).get()}}),r.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){r.fn[t]=function(e){return this.bind(t,e)}}),r.each(["get","post"],function(e,n){r[n]=function(e,i,s,o){return r.isFunction(i)&&(o=o||s,s=i,i=t),r.ajax({type:n,url:e,data:i,success:s,dataType:o})}}),r.extend({getScript:function(e,n){return r.get(e,t,n,"script")},getJSON:function(e,t,n){return r.get(e,t,n,"json")},ajaxSetup:function(e,t){t?r.extend(!0,e,r.ajaxSettings,t):(t=e,e=r.extend(!0,r.ajaxSettings,t));for(var n in{context:1,url:1})n in t?e[n]=t[n]:n in r.ajaxSettings&&(e[n]=r.ajaxSettings[n]);return e},ajaxSettings:{url:Ht,isLocal:Et.test(Bt[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":r.parseJSON,"text xml":r.parseXML}},ajaxPrefilter:Ft(Dt),ajaxTransport:Ft(Pt),ajax:function(e,n){function E(e,n,c,p){if(g===2)return;g=2,v&&clearTimeout(v),d=t,h=p||"",w.readyState=e?4:0;var m,b,E,S=c?Rt(i,w,c):t,x,T;if(e>=200&&e<300||e===304){if(i.ifModified){if(x=w.getResponseHeader("Last-Modified"))r.lastModified[l]=x;if(T=w.getResponseHeader("Etag"))r.etag[l]=T}if(e===304)n="notmodified",m=!0;else try{b=Ut(i,S),n="success",m=!0}catch(N){n="parsererror",E=N}}else{E=n;if(!n||e)n="error",e<0&&(e=0)}w.status=e,w.statusText=n,m?u.resolveWith(s,[b,n,w]):u.rejectWith(s,[w,n,E]),w.statusCode(f),f=t,y&&o.trigger("ajax"+(m?"Success":"Error"),[w,i,m?b:E]),a.resolveWith(s,[w,n]),y&&(o.trigger("ajaxComplete",[w,i]),--r.active||r.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var i=r.ajaxSetup({},n),s=i.context||i,o=s!==i&&(s.nodeType||s instanceof r)?r(s):r.event,u=r.Deferred(),a=r._Deferred(),f=i.statusCode||{},l,c={},h,p,d,v,m,g=0,y,b,w={readyState:0,setRequestHeader:function(e,t){return g||(c[e.toLowerCase().replace(At,Ot)]=t),this},getAllResponseHeaders:function(){return g===2?h:null},getResponseHeader:function(e){var n;if(g===2){if(!p){p={};while(n=bt.exec(h))p[n[1].toLowerCase()]=n[2]}n=p[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return g||(i.mimeType=e),this},abort:function(e){return e=e||"abort",d&&d.abort(e),E(0,e),this}};u.promise(w),w.success=w.done,w.error=w.fail,w.complete=a.done,w.statusCode=function(e){if(e){var t;if(g<2)for(t in e)f[t]=[f[t],e[t]];else t=e[w.status],w.then(t,t)}return this},i.url=((e||i.url)+"").replace(yt,"").replace(xt,Bt[1]+"//"),i.dataTypes=r.trim(i.dataType||"*").toLowerCase().split(kt),i.crossDomain||(m=Mt.exec(i.url.toLowerCase()),i.crossDomain=!(!m||m[1]==Bt[1]&&m[2]==Bt[2]&&(m[3]||(m[1]==="http:"?80:443))==(Bt[3]||(Bt[1]==="http:"?80:443)))),i.data&&i.processData&&typeof i.data!="string"&&(i.data=r.param(i.data,i.traditional)),It(Dt,i,n,w);if(g===2)return!1;y=i.global,i.type=i.type.toUpperCase(),i.hasContent=!St.test(i.type),y&&r.active++===0&&r.event.trigger("ajaxStart");if(!i.hasContent){i.data&&(i.url+=(Tt.test(i.url)?"&":"?")+i.data),l=i.url;if(i.cache===!1){var S=r.now(),x=i.url.replace(Lt,"$1_="+S);i.url=x+(x===i.url?(Tt.test(i.url)?"&":"?")+"_="+S:"")}}if(i.data&&i.hasContent&&i.contentType!==!1||n.contentType)c["Content-Type"]=i.contentType;i.ifModified&&(l=l||i.url,r.lastModified[l]&&(c["If-Modified-Since"]=r.lastModified[l]),r.etag[l]&&(c["If-None-Match"]=r.etag[l])),c.Accept=i.dataTypes[0]&&i.accepts[i.dataTypes[0]]?i.accepts[i.dataTypes[0]]+(i.dataTypes[0]!=="*"?", */*; q=0.01":""):i.accepts["*"];for(b in i.headers)w.setRequestHeader(b,i.headers[b]);if(!i.beforeSend||i.beforeSend.call(s,w,i)!==!1&&g!==2){for(b in{success:1,error:1,complete:1})w[b](i[b]);d=It(Pt,i,n,w);if(!d)E(-1,"No Transport");else{w.readyState=1,y&&o.trigger("ajaxSend",[w,i]),i.async&&i.timeout>0&&(v=setTimeout(function(){w.abort("timeout")},i.timeout));try{g=1,d.send(c,E)}catch(T){status<2?E(-1,T):r.error(T)}}return w}return w.abort(),!1},param:function(e,n){var i=[],s=function(e,t){t=r.isFunction(t)?t():t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=r.ajaxSettings.traditional);if(r.isArray(e)||e.jquery&&!r.isPlainObject(e))r.each(e,function(){s(this.name,this.value)});else for(var o in e)qt(o,e[o],n,s);return i.join("&").replace(vt,"+")}}),r.extend({active:0,lastModified:{},etag:{}});var zt=r.now(),Wt=/(\=)\?(&|$)|()\?\?()/i;r.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return r.expando+"_"+zt++}}),r.ajaxPrefilter("json jsonp",function(t,n,i){var s=typeof t.data=="string";if(t.dataTypes[0]==="jsonp"||n.jsonpCallback||n.jsonp!=null||t.jsonp!==!1&&(Wt.test(t.url)||s&&Wt.test(t.data))){var o,u=t.jsonpCallback=r.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a=e[u],f=t.url,l=t.data,c="$1"+u+"$2",h=function(){e[u]=a,o&&r.isFunction(a)&&e[u](o[0])};return t.jsonp!==!1&&(f=f.replace(Wt,c),t.url===f&&(s&&(l=l.replace(Wt,c)),t.data===l&&(f+=(/\?/.test(f)?"&":"?")+t.jsonp+"="+u))),t.url=f,t.data=l,e[u]=function(e){o=[e]},i.then(h,h),t.converters["script json"]=function(){return o||r.error(u+" was not called"),o[0]},t.dataTypes[0]="json","script"}}),r.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return r.globalEval(e),e}}}),r.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),r.ajaxTransport("script",function(e){if(e.crossDomain){var r,i=n.head||n.getElementsByTagName("head")[0]||n.documentElement;return{send:function(s,o){r=n.createElement("script"),r.async="async",e.scriptCharset&&(r.charset=e.scriptCharset),r.src=e.url,r.onload=r.onreadystatechange=function(e,n){if(!r.readyState||/loaded|complete/.test(r.readyState))r.onload=r.onreadystatechange=null,i&&r.parentNode&&i.removeChild(r),r=t,n||o(200,"success")},i.insertBefore(r,i.firstChild)},abort:function(){r&&r.onload(0,1)}}}});var Xt=r.now(),Vt,$t;r.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&Kt()||Qt()}:Kt,$t=r.ajaxSettings.xhr(),r.support.ajax=!!$t,r.support.cors=$t&&"withCredentials"in $t,$t=t,r.support.ajax&&r.ajaxTransport(function(e){if(!e.crossDomain||r.support.cors){var n;return{send:function(i,s){var o=e.xhr(),u,a;e.username?o.open(e.type,e.url,e.async,e.username,e.password):o.open(e.type,e.url,e.async);if(e.xhrFields)for(a in e.xhrFields)o[a]=e.xhrFields[a];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),(!e.crossDomain||!!e.hasContent)&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(a in i)o.setRequestHeader(a,i[a])}catch(f){}o.send(e.hasContent&&e.data||null),n=function(i,a){var f,l,c,h,p;try{if(n&&(a||o.readyState===4)){n=t,u&&(o.onreadystatechange=r.noop,delete Vt[u]);if(a)o.readyState!==4&&o.abort();else{f=o.status,c=o.getAllResponseHeaders(),h={},p=o.responseXML,p&&p.documentElement&&(h.xml=p),h.text=o.responseText;try{l=o.statusText}catch(d){l=""}!f&&e.isLocal&&!e.crossDomain?f=h.text?200:404:f===1223&&(f=204)}}}catch(v){a||s(-1,v)}h&&s(f,l,h,c)},!e.async||o.readyState===4?n():(Vt||(Vt={},Jt()),u=Xt++,o.onreadystatechange=Vt[u]=n)},abort:function(){n&&n(0,1)}}}});var Gt={},Yt=/^(?:toggle|show|hide)$/,Zt=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,en,tn=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];r.fn.extend({show:function(e,t,n){var i,s;if(e||e===0)return this.animate(nn("show",3),e,t,n);for(var o=0,u=this.length;o<u;o++)i=this[o],s=i.style.display,!r._data(i,"olddisplay")&&s==="none"&&(s=i.style.display=""),s===""&&r.css(i,"display")==="none"&&r._data(i,"olddisplay",rn(i.nodeName));for(o=0;o<u;o++){i=this[o],s=i.style.display;if(s===""||s==="none")i.style.display=r._data(i,"olddisplay")||""}return this},hide:function(e,t,n){if(e||e===0)return this.animate(nn("hide",3),e,t,n);for(var i=0,s=this.length;i<s;i++){var o=r.css(this[i],"display");o!=="none"&&!r._data(this[i],"olddisplay")&&r._data(this[i],"olddisplay",o)}for(i=0;i<s;i++)this[i].style.display="none";return this},_toggle:r.fn.toggle,toggle:function(e,t,n){var i=typeof e=="boolean";return r.isFunction(e)&&r.isFunction(t)?this._toggle.apply(this,arguments):e==null||i?this.each(function(){var t=i?e:r(this).is(":hidden");r(this)[t?"show":"hide"]()}):this.animate(nn("toggle",3),e,t,n),this},fadeTo:function(e,t,n,r){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,i){var s=r.speed(t,n,i);return r.isEmptyObject(e)?this.each(s.complete):this[s.queue===!1?"each":"queue"](function(){var t=r.extend({},s),n,i=this.nodeType===1,o=i&&r(this).is(":hidden"),u=this;for(n in e){var a=r.camelCase(n);n!==a&&(e[a]=e[n],delete e[n],n=a);if(e[n]==="hide"&&o||e[n]==="show"&&!o)return t.complete.call(this);if(i&&(n==="height"||n==="width")){t.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(r.css(this,"display")==="inline"&&r.css(this,"float")==="none")if(!r.support.inlineBlockNeedsLayout)this.style.display="inline-block";else{var f=rn(this.nodeName);f==="inline"?this.style.display="inline-block":(this.style.display="inline",this.style.zoom=1)}}r.isArray(e[n])&&((t.specialEasing=t.specialEasing||{})[n]=e[n][1],e[n]=e[n][0])}return t.overflow!=null&&(this.style.overflow="hidden"),t.curAnim=r.extend({},e),r.each(e,function(n,i){var s=new r.fx(u,t,n);if(Yt.test(i))s[i==="toggle"?o?"show":"hide":i](e);else{var a=Zt.exec(i),f=s.cur();if(a){var l=parseFloat(a[2]),c=a[3]||(r.cssNumber[n]?"":"px");c!=="px"&&(r.style(u,n,(l||1)+c),f=(l||1)/s.cur()*f,r.style(u,n,f+c)),a[1]&&(l=(a[1]==="-="?-1:1)*l+f),s.custom(f,l,c)}else s.custom(f,i,"")}}),!0})},stop:function(e,t){var n=r.timers;return e&&this.queue([]),this.each(function(){for(var e=n.length-1;e>=0;e--)n[e].elem===this&&(t&&n[e](!0),n.splice(e,1))}),t||this.dequeue(),this}}),r.each({slideDown:nn("show",1),slideUp:nn("hide",1),slideToggle:nn("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){r.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),r.extend({speed:function(e,t,n){var i=e&&typeof e=="object"?r.extend({},e):{complete:n||!n&&t||r.isFunction(e)&&e,duration:e,easing:n&&t||t&&!r.isFunction(t)&&t};return i.duration=r.fx.off?0:typeof i.duration=="number"?i.duration:i.duration in r.fx.speeds?r.fx.speeds[i.duration]:r.fx.speeds._default,i.old=i.complete,i.complete=function(){i.queue!==!1&&r(this).dequeue(),r.isFunction(i.old)&&i.old.call(this)},i},easing:{linear:function(e,t,n,r){return n+r*e},swing:function(e,t,n,r){return(-Math.cos(e*Math.PI)/2+.5)*r+n}},timers:[],fx:function(e,t,n){this.options=t,this.elem=e,this.prop=n,t.orig||(t.orig={})}}),r.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(r.fx.step[this.prop]||r.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]==null||!!this.elem.style&&this.elem.style[this.prop]!=null){var e,t=r.css(this.elem,this.prop);return isNaN(e=parseFloat(t))?!t||t==="auto"?0:t:e}return this.elem[this.prop]},custom:function(e,t,n){function o(e){return i.step(e)}var i=this,s=r.fx;this.startTime=r.now(),this.start=e,this.end=t,this.unit=n||this.unit||(r.cssNumber[this.prop]?"":"px"),this.now=this.start,this.pos=this.state=0,o.elem=this.elem,o()&&r.timers.push(o)&&!en&&(en=setInterval(s.tick,s.interval))},show:function(){this.options.orig[this.prop]=r.style(this.elem,this.prop),this.options.show=!0,this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),r(this.elem).show()},hide:function(){this.options.orig[this.prop]=r.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(e){var t=r.now(),n=!0;if(e||t>=this.options.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),this.options.curAnim[this.prop]=!0;for(var i in this.options.curAnim)this.options.curAnim[i]!==!0&&(n=!1);if(n){if(this.options.overflow!=null&&!r.support.shrinkWrapBlocks){var s=this.elem,o=this.options;r.each(["","X","Y"],function(e,t){s.style["overflow"+t]=o.overflow[e]})}this.options.hide&&r(this.elem).hide();if(this.options.hide||this.options.show)for(var u in this.options.curAnim)r.style(this.elem,u,this.options.orig[u]);this.options.complete.call(this.elem)}return!1}var a=t-this.startTime;this.state=a/this.options.duration;var f=this.options.specialEasing&&this.options.specialEasing[this.prop],l=this.options.easing||(r.easing.swing?"swing":"linear");return this.pos=r.easing[f||l](this.state,a,0,1,this.options.duration),this.now=this.start+(this.end-this.start)*this.pos,this.update(),!0}},r.extend(r.fx,{tick:function(){var e=r.timers;for(var t=0;t<e.length;t++)e[t]()||e.splice(t--,1);e.length||r.fx.stop()},interval:13,stop:function(){clearInterval(en),en=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){r.style(e.elem,"opacity",e.now)},_default:function(e){e.elem.style&&e.elem.style[e.prop]!=null?e.elem.style[e.prop]=(e.prop==="width"||e.prop==="height"?Math.max(0,e.now):e.now)+e.unit:e.elem[e.prop]=e.now}}}),r.expr&&r.expr.filters&&(r.expr.filters.animated=function(e){return r.grep(r.timers,function(t){return e===t.elem}).length});var sn=/^t(?:able|d|h)$/i,on=/^(?:body|html)$/i;"getBoundingClientRect"in n.documentElement?r.fn.offset=function(e){var t=this[0],n;if(e)return this.each(function(t){r.offset.setOffset(this,e,t)});if(!t||!t.ownerDocument)return null;if(t===t.ownerDocument.body)return r.offset.bodyOffset(t);try{n=t.getBoundingClientRect()}catch(i){}var s=t.ownerDocument,o=s.documentElement;if(!n||!r.contains(o,t))return n?{top:n.top,left:n.left}:{top:0,left:0};var u=s.body,a=un(s),f=o.clientTop||u.clientTop||0,l=o.clientLeft||u.clientLeft||0,c=a.pageYOffset||r.support.boxModel&&o.scrollTop||u.scrollTop,h=a.pageXOffset||r.support.boxModel&&o.scrollLeft||u.scrollLeft,p=n.top+c-f,d=n.left+h-l;return{top:p,left:d}}:r.fn.offset=function(e){var t=this[0];if(e)return this.each(function(t){r.offset.setOffset(this,e,t)});if(!t||!t.ownerDocument)return null;if(t===t.ownerDocument.body)return r.offset.bodyOffset(t);r.offset.initialize();var n,i=t.offsetParent,s=t,o=t.ownerDocument,u=o.documentElement,a=o.body,f=o.defaultView,l=f?f.getComputedStyle(t,null):t.currentStyle,c=t.offsetTop,h=t.offsetLeft;while((t=t.parentNode)&&t!==a&&t!==u){if(r.offset.supportsFixedPosition&&l.position==="fixed")break;n=f?f.getComputedStyle(t,null):t.currentStyle,c-=t.scrollTop,h-=t.scrollLeft,t===i&&(c+=t.offsetTop,h+=t.offsetLeft,r.offset.doesNotAddBorder&&(!r.offset.doesAddBorderForTableAndCells||!sn.test(t.nodeName))&&(c+=parseFloat(n.borderTopWidth)||0,h+=parseFloat(n.borderLeftWidth)||0),s=i,i=t.offsetParent),r.offset.subtractsBorderForOverflowNotVisible&&n.overflow!=="visible"&&(c+=parseFloat(n.borderTopWidth)||0,h+=parseFloat(n.borderLeftWidth)||0),l=n}if(l.position==="relative"||l.position==="static")c+=a.offsetTop,h+=a.offsetLeft;return r.offset.supportsFixedPosition&&l.position==="fixed"&&(c+=Math.max(u.scrollTop,a.scrollTop),h+=Math.max(u.scrollLeft,a.scrollLeft)),{top:c,left:h}},r.offset={initialize:function(){var e=n.body,t=n.createElement("div"),i,s,o,u,a=parseFloat(r.css(e,"marginTop"))||0,f="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";r.extend(t.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"}),t.innerHTML=f,e.insertBefore(t,e.firstChild),i=t.firstChild,s=i.firstChild,u=i.nextSibling.firstChild.firstChild,this.doesNotAddBorder=s.offsetTop!==5,this.doesAddBorderForTableAndCells=u.offsetTop===5,s.style.position="fixed",s.style.top="20px",this.supportsFixedPosition=s.offsetTop===20||s.offsetTop===15,s.style.position=s.style.top="",i.style.overflow="hidden",i.style.position="relative",this.subtractsBorderForOverflowNotVisible=s.offsetTop===-5,this.doesNotIncludeMarginInBodyOffset=e.offsetTop!==a,e.removeChild(t),e=t=i=s=o=u=null,r.offset.initialize=r.noop},bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return r.offset.initialize(),r.offset.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(r.css(e,"marginTop"))||0,n+=parseFloat(r.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var i=r.css(e,"position");i==="static"&&(e.style.position="relative");var s=r(e),o=s.offset(),u=r.css(e,"top"),a=r.css(e,"left"),f=i==="absolute"&&r.inArray("auto",[u,a])>-1,l={},c={},h,p;f&&(c=s.position()),h=f?c.top:parseInt(u,10)||0,p=f?c.left:parseInt(a,10)||0,r.isFunction(t)&&(t=t.call(e,n,o)),t.top!=null&&(l.top=t.top-o.top+h),t.left!=null&&(l.left=t.left-o.left+p),"using"in t?t.using.call(e,l):s.css(l)}},r.fn.extend({position:function(){if(!this[0])return null;var e=this[0],t=this.offsetParent(),n=this.offset(),i=on.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(r.css(e,"marginTop"))||0,n.left-=parseFloat(r.css(e,"marginLeft"))||0,i.top+=parseFloat(r.css(t[0],"borderTopWidth"))||0,i.left+=parseFloat(r.css(t[0],"borderLeftWidth"))||0,{top:n.top-i.top,left:n.left-i.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||n.body;while(e&&!on.test(e.nodeName)&&r.css(e,"position")==="static")e=e.offsetParent;return e})}}),r.each(["Left","Top"],function(e,n){var i="scroll"+n;r.fn[i]=function(n){var s=this[0],o;return s?n!==t?this.each(function(){o=un(this),o?o.scrollTo(e?r(o).scrollLeft():n,e?n:r(o).scrollTop()):this[i]=n}):(o=un(s),o?"pageXOffset"in o?o[e?"pageYOffset":"pageXOffset"]:r.support.boxModel&&o.document.documentElement[i]||o.document.body[i]:s[i]):null}}),r.each(["Height","Width"],function(e,n){var i=n.toLowerCase();r.fn["inner"+n]=function(){return this[0]?parseFloat(r.css(this[0],i,"padding")):null},r.fn["outer"+n]=function(e){return this[0]?parseFloat(r.css(this[0],i,e?"margin":"border")):null},r.fn[i]=function(e){var s=this[0];if(!s)return e==null?null:this;if(r.isFunction(e))return this.each(function(t){var n=r(this);n[i](e.call(this,t,n[i]()))});if(r.isWindow(s)){var o=s.document.documentElement["client"+n];return s.document.compatMode==="CSS1Compat"&&o||s.document.body["client"+n]||o}if(s.nodeType===9)return Math.max(s.documentElement["client"+n],s.body["scroll"+n],s.documentElement["scroll"+n],s.body["offset"+n],s.documentElement["offset"+n]);if(e===t){var u=r.css(s,i),a=parseFloat(u);return r.isNaN(a)?u:a}return this.css(i,typeof e=="string"?e:e+"px")}}),e.jQuery=e.$=r})(window),jQuery.ui||function(e){e.ui={version:"1.8.1",plugin:{add:function(t,n,r){t=e.ui[t].prototype;for(var i in r)t.plugins[i]=t.plugins[i]||[],t.plugins[i].push([n,r[i]])},call:function(e,t,n){if((t=e.plugins[t])&&e.element[0].parentNode)for(var r=0;r<t.length;r++)e.options[t[r][0]]&&t[r][1].apply(e.element,n)}},contains:function(e,t){return document.compareDocumentPosition?e.compareDocumentPosition(t)&16:e!==t&&e.contains(t)},hasScroll:function(t,n){if(e(t).css("overflow")=="hidden")return!1;n=n&&n=="left"?"scrollLeft":"scrollTop";var r=!1;return t[n]>0?!0:(t[n]=1,r=t[n]>0,t[n]=0,r)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,r,i,s,o){return e.ui.isOverAxis(t,r,s)&&e.ui.isOverAxis(n,i,o)},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38}},e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},enableSelection:function(){return this.attr("unselectable","off").css("MozUserSelect","")},disableSelection:function(){return this.attr("unselectable","on").css("MozUserSelect","none")},scrollParent:function(){var t;return t=e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.curCSS(this,"position",1))&&/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(t){if(t!==undefined)return this.css("zIndex",t);if(this.length){t=e(this[0]);for(var n;t.length&&t[0]!==document;){n=t.css("position");if(n=="absolute"||n=="relative"||n=="fixed"){n=parseInt(t.css("zIndex"));if(!isNaN(n)&&n!=0)return n}t=t.parent()}}return 0}}),e.extend(e.expr[":"],{data:function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){var n=t.nodeName.toLowerCase(),r=e.attr(t,"tabindex");return(/input|select|textarea|button|object/.test(n)?!t.disabled:"a"==n||"area"==n?t.href||!isNaN(r):!isNaN(r))&&!e(t)["area"==n?"parents":"closest"](":hidden").length},tabbable:function(t){var n=e.attr(t,"tabindex");return(isNaN(n)||n>=0)&&e(t).is(":focusable")}})}(jQuery),function(e){var t=e.fn.remove;e.fn.remove=function(n,r){return this.each(function(){return r||(!n||e.filter(n,[this]).length)&&e("*",this).add(this).each(function(){e(this).triggerHandler("remove")}),t.call(e(this),n,r)})},e.widget=function(t,n,r){var i=t.split(".")[0],s;t=t.split(".")[1],s=i+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][s]=function(n){return!!e.data(n,t)},e[i]=e[i]||{},e[i][t]=function(e,t){arguments.length&&this._createWidget(e,t)},n=new n,n.options=e.extend({},n.options),e[i][t].prototype=e.extend(!0,n,{namespace:i,widgetName:t,widgetEventPrefix:e[i][t].prototype.widgetEventPrefix||t,widgetBaseClass:s},r),e.widget.bridge(t,e[i][t])},e.widget.bridge=function(t,n){e.fn[t]=function(r){var i=typeof r=="string",s=Array.prototype.slice.call(arguments,1),o=this;return r=!i&&s.length?e.extend.apply(null,[!0,r].concat(s)):r,i&&r.substring(0,1)==="_"?o:(i?this.each(function(){var n=e.data(this,t),i=n&&e.isFunction(n[r])?n[r].apply(n,s):n;if(i!==n&&i!==undefined)return o=i,!1}):this.each(function(){var i=e.data(this,t);i?(r&&i.option(r),i._init()):e.data(this,t,new n(r,this))}),o)}},e.Widget=function(e,t){arguments.length&&this._createWidget(e,t)},e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(t,n){this.element=e(n).data(this.widgetName,this),this.options=e.extend(!0,{},this.options,e.metadata&&e.metadata.get(n)[this.widgetName],t);var r=this;this.element.bind("remove."+this.widgetName,function(){r.destroy()}),this._create(),this._init()},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(t,n){var r=t,i=this;if(arguments.length===0)return e.extend({},i.options);if(typeof t=="string"){if(n===undefined)return this.options[t];r={},r[t]=n}return e.each(r,function(e,t){i._setOption(e,t)}),i},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&this.widget()[t?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",t),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(t,n,r){var i=this.options[t];n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),r=r||{};if(n.originalEvent){t=e.event.props.length;for(var s;t;)s=e.event.props[--t],n[s]=n.originalEvent[s]}return this.element.trigger(n,r),!(e.isFunction(i)&&i.call(this.element[0],n,r)===!1||n.isDefaultPrevented())}}}(jQuery),function(e){e.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(t){if(e._preventClickEvent)return e._preventClickEvent=!1,t.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(t){t.originalEvent=t.originalEvent||{};if(!t.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,r=t.which==1,i=typeof this.options.cancel=="string"?e(t.target).parents().add(t.target).filter(this.options.cancel).length:!1;if(!r||i||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.browser.safari||t.preventDefault(),t.originalEvent.mouseHandled=!0}},_mouseMove:function(t){return e.browser.msie&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&((this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1)?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,this._preventClickEvent=t.target==this._mouseDownEvent.target,this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e){e.ui=e.ui||{};var t=/left|center|right/,n=/top|center|bottom/,r=e.fn.position,i=e.fn.offset;e.fn.position=function(i){if(!i||!i.of)return r.apply(this,arguments);i=e.extend({},i);var s=e(i.of),o=(i.collision||"flip").split(" "),u=i.offset?i.offset.split(" "):[0,0],l,c,h;return i.of.nodeType===9?(l=s.width(),c=s.height(),h={top:0,left:0}):i.of.scrollTo&&i.of.document?(l=s.width(),c=s.height(),h={top:s.scrollTop(),left:s.scrollLeft()}):i.of.preventDefault?(i.at="left top",l=c=0,h={top:i.of.pageY,left:i.of.pageX}):(l=s.outerWidth(),c=s.outerHeight(),h=s.offset()),e.each(["my","at"],function(){var e=(i[this]||"").split(" ");e.length===1&&(e=t.test(e[0])?e.concat(["center"]):n.test(e[0])?["center"].concat(e):["center","center"]),e[0]=t.test(e[0])?e[0]:"center",e[1]=n.test(e[1])?e[1]:"center",i[this]=e}),o.length===1&&(o[1]=o[0]),u[0]=parseInt(u[0],10)||0,u.length===1&&(u[1]=u[0]),u[1]=parseInt(u[1],10)||0,i.at[0]==="right"?h.left+=l:i.at[0]==="center"&&(h.left+=l/2),i.at[1]==="bottom"?h.top+=c:i.at[1]==="center"&&(h.top+=c/2),h.left+=u[0],h.top+=u[1],this.each(function(){var t=e(this),n=t.outerWidth(),r=t.outerHeight(),s=e.extend({},h);i.my[0]==="right"?s.left-=n:i.my[0]==="center"&&(s.left-=n/2),i.my[1]==="bottom"?s.top-=r:i.my[1]==="center"&&(s.top-=r/2),s.left=parseInt(s.left),s.top=parseInt(s.top),e.each(["left","top"],function(t,a){e.ui.position[o[t]]&&e.ui.position[o[t]][a](s,{targetWidth:l,targetHeight:c,elemWidth:n,elemHeight:r,offset:u,my:i.my,at:i.at})}),e.fn.bgiframe&&t.bgiframe(),t.offset(e.extend(s,{using:i.using}))})},e.ui.position={fit:{left:function(t,n){var r=e(window);n=t.left+n.elemWidth-r.width()-r.scrollLeft(),t.left=n>0?t.left-n:Math.max(0,t.left)},top:function(t,n){var r=e(window);n=t.top+n.elemHeight-r.height()-r.scrollTop(),t.top=n>0?t.top-n:Math.max(0,t.top)}},flip:{left:function(t,n){if(n.at[0]!=="center"){var r=e(window);r=t.left+n.elemWidth-r.width()-r.scrollLeft();var i=n.my[0]==="left"?-n.elemWidth:n.my[0]==="right"?n.elemWidth:0,s=-2*n.offset[0];t.left+=t.left<0?i+n.targetWidth+s:r>0?i-n.targetWidth+s:0}},top:function(t,n){if(n.at[1]!=="center"){var r=e(window);r=t.top+n.elemHeight-r.height()-r.scrollTop();var i=n.my[1]==="top"?-n.elemHeight:n.my[1]==="bottom"?n.elemHeight:0,s=n.at[1]==="top"?n.targetHeight:-n.targetHeight,o=-2*n.offset[1];t.top+=t.top<0?i+n.targetHeight+o:r>0?i+s+o:0}}}},e.offset.setOffset||(e.offset.setOffset=function(t,n){/static/.test(e.curCSS(t,"position"))&&(t.style.position="relative");var r=e(t),i=r.offset(),s=parseInt(e.curCSS(t,"top",!0),10)||0,o=parseInt(e.curCSS(t,"left",!0),10)||0;i={top:n.top-i.top+s,left:n.left-i.left+o},"using"in n?n.using.call(t,i):r.css(i)},e.fn.offset=function(t){var n=this[0];return!n||!n.ownerDocument?null:t?this.each(function(){e.offset.setOffset(this,t)}):i.call(this)})}(jQuery),function(e){e.widget("ui.slider",e.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var t=this,n=this.options;this._mouseSliding=this._keySliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),n.disabled&&this.element.addClass("ui-slider-disabled ui-disabled"),this.range=e([]),n.range&&(n.range===!0?(this.range=e("<div></div>"),n.values||(n.values=[this._valueMin(),this._valueMin()]),n.values.length&&n.values.length!==2&&(n.values=[n.values[0],n.values[0]])):this.range=e("<div></div>"),this.range.appendTo(this.element).addClass("ui-slider-range"),(n.range==="min"||n.range==="max")&&this.range.addClass("ui-slider-range-"+n.range),this.range.addClass("ui-widget-header")),e(".ui-slider-handle",this.element).length===0&&e("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle");if(n.values&&n.values.length)for(;e(".ui-slider-handle",this.element).length<n.values.length;)e("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle");this.handles=e(".ui-slider-handle",this.element).addClass("ui-state-default ui-corner-all"),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).hover(function(){n.disabled||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).focus(function(){n.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("index.ui-slider-handle",t)}),this.handles.keydown(function(n){var r=!0,i=e(this).data("index.ui-slider-handle"),s,o,u;if(!t.options.disabled){switch(n.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:r=!1;if(!t._keySliding){t._keySliding=!0,e(this).addClass("ui-state-active"),s=t._start(n,i);if(s===!1)return}}u=t.options.step,s=t.options.values&&t.options.values.length?o=t.values(i):o=t.value();switch(n.keyCode){case e.ui.keyCode.HOME:o=t._valueMin();break;case e.ui.keyCode.END:o=t._valueMax();break;case e.ui.keyCode.PAGE_UP:o=s+(t._valueMax()-t._valueMin())/5;break;case e.ui.keyCode.PAGE_DOWN:o=s-(t._valueMax()-t._valueMin())/5;break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(s===t._valueMax())return;o=s+u;break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(s===t._valueMin())return;o=s-u}return t._slide(n,i,o),r}}).keyup(function(n){var r=e(this).data("index.ui-slider-handle");t._keySliding&&(t._keySliding=!1,t._stop(n,r),t._change(n,r),e(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(t){var n=this.options,r,i,s,o,u,f;return n.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),r={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(r),s=this._valueMax()-this._valueMin()+1,u=this,this.handles.each(function(t){var n=Math.abs(i-u.values(t));s>n&&(s=n,o=e(this),f=t)}),n.range===!0&&this.values(1)===n.min&&(f+=1,o=e(this.handles[f])),this._start(t,f)===!1?!1:(this._mouseSliding=!0,u._handleIndex=f,o.addClass("ui-state-active").focus(),n=o.offset(),this._clickOffset=e(t.target).parents().andSelf().is(".ui-slider-handle")?{left:t.pageX-n.left-o.width()/2,top:t.pageY-n.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)}:{left:0,top:0},i=this._normValueFromMouse(r),this._slide(t,f,i),this._animateOff=!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t=this._normValueFromMouse({x:e.pageX,y:e.pageY});return this._slide(e,this._handleIndex,t),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._clickOffset=this._handleIndex=null,this._animateOff=!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t;return this.orientation==="horizontal"?(t=this.elementSize.width,e=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,e=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),t=e/t,t>1&&(t=1),t<0&&(t=0),this.orientation==="vertical"&&(t=1-t),e=this._valueMax()-this._valueMin(),this._trimAlignValue(this._valueMin()+t*e)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var r;this.options.values&&this.options.values.length?(r=this.values(t?0:1),this.options.values.length===2&&this.options.range===!0&&(t===0&&n>r||t===1&&n<r)&&(n=r),n!==this.values(t)&&(r=this.values(),r[t]=n,e=this._trigger("slide",e,{handle:this.handles[t],value:n,values:r}),this.values(t?0:1),e!==!1&&this.values(t,n,!0))):n!==this.value()&&(e=this._trigger("slide",e,{handle:this.handles[t],value:n}),e!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("change",e,n)}},value:function(e){return arguments.length&&(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0)),this._value()},values:function(t,n){var r,i,s;arguments.length>1&&(this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t));if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();r=this.options.values,i=arguments[0];for(s=0;s<r.length;s+=1)r[s]=this._trimAlignValue(i[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,n){var r,i=0;e.isArray(this.options.values)&&(i=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments);switch(t){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.attr("disabled","disabled"),this.element.addClass("ui-disabled")):(this.handles.removeAttr("disabled"),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(r=0;r<i;r+=1)this._change(null,r);this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,n;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);t=this.options.values.slice();for(n=0;n<t.length;n+=1)t[n]=this._trimAlignValue(t[n]);return t},_trimAlignValue:function(e){if(e<this._valueMin())return this._valueMin();if(e>this._valueMax())return this._valueMax();var t=this.options.step,n=e%t;return e-=n,n>=t/2&&(e+=t),parseFloat(e.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t=this.options.range,n=this.options,r=this,i=this._animateOff?!1:n.animate,s,o={},u,f,l,c;this.options.values&&this.options.values.length?this.handles.each(function(t){s=(r.values(t)-r._valueMin())/(r._valueMax()-r._valueMin())*100,o[r.orientation==="horizontal"?"left":"bottom"]=s+"%",e(this).stop(1,1)[i?"animate":"css"](o,n.animate),r.options.range===!0&&(r.orientation==="horizontal"?(t===0&&r.range.stop(1,1)[i?"animate":"css"]({left:s+"%"},n.animate),t===1&&r.range[i?"animate":"css"]({width:s-u+"%"},{queue:!1,duration:n.animate})):(t===0&&r.range.stop(1,1)[i?"animate":"css"]({bottom:s+"%"},n.animate),t===1&&r.range[i?"animate":"css"]({height:s-u+"%"},{queue:!1,duration:n.animate}))),u=s}):(f=this.value(),l=this._valueMin(),c=this._valueMax(),s=c!==l?(f-l)/(c-l)*100:0,o[r.orientation==="horizontal"?"left":"bottom"]=s+"%",this.handle.stop(1,1)[i?"animate":"css"](o,n.animate),t==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[i?"animate":"css"]({width:s+"%"},n.animate),t==="max"&&this.orientation==="horizontal"&&this.range[i?"animate":"css"]({width:100-s+"%"},{queue:!1,duration:n.animate}),t==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[i?"animate":"css"]({height:s+"%"},n.animate),t==="max"&&this.orientation==="vertical"&&this.range[i?"animate":"css"]({height:100-s+"%"},{queue:!1,duration:n.animate}))}}),e.extend(e.ui.slider,{version:"1.8.1"})}(jQuery),jQuery.effects||function(e){function t(t){var n;return t&&t.constructor==Array&&t.length==3?t:(n=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))?[parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10)]:(n=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t))?[parseFloat(n[1])*2.55,parseFloat(n[2])*2.55,parseFloat(n[3])*2.55]:(n=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:(n=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t))?[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16)]:/rgba\(0, 0, 0, 0\)/.exec(t)?u.transparent:u[e.trim(t).toLowerCase()]}function n(n,r){var i;do{i=e.curCSS(n,r);if(i!=""&&i!="transparent"||e.nodeName(n,"body"))break;r="backgroundColor"}while(n=n.parentNode);return t(i)}function r(){var e=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,t={},n,r;if(e&&e.length&&e[0]&&e[e[0]])for(var i=e.length;i--;)n=e[i],typeof e[n]=="string"&&(r=n.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),t[r]=e[n]);else for(n in e)typeof e[n]=="string"&&(t[n]=e[n]);return t}function i(t){var n,r;for(n in t)r=t[n],(r==null||e.isFunction(r)||n in f||/scrollbar/.test(n)||!/color/i.test(n)&&isNaN(parseFloat(r)))&&delete t[n];return t}function s(e,t){var n={_:0},r;for(r in t)e[r]!=t[r]&&(n[r]=t[r]);return n}function o(t,n,r,i){typeof t=="object"&&(i=n,r=null,n=t,t=n.effect),e.isFunction(n)&&(i=n,r=null,n={}),e.isFunction(r)&&(i=r,r=null);if(typeof n=="number"||e.fx.speeds[n])i=r,r=n,n={};return n=n||{},r=r||n.duration,r=e.fx.off?0:typeof r=="number"?r:e.fx.speeds[r]||e.fx.speeds._default,i=i||n.complete,[t,n,r,i]}e.effects={},e.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(r,i){e.fx.step[i]=function(e){e.colorInit||(e.start=n(e.elem,i),e.end=t(e.end),e.colorInit=!0),e.elem.style[i]="rgb("+Math.max(Math.min(parseInt(e.pos*(e.end[0]-e.start[0])+e.start[0],10),255),0)+","+Math.max(Math.min(parseInt(e.pos*(e.end[1]-e.start[1])+e.start[1],10),255),0)+","+Math.max(Math.min(parseInt(e.pos*(e.end[2]-e.start[2])+e.start[2],10),255),0)+")"}});var u={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},a=["add","remove","toggle"],f={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.effects.animateClass=function(t,n,o,u){return e.isFunction(o)&&(u=o,o=null),this.each(function(){var f=e(this),h=f.attr("style")||" ",v=i(r.call(this)),m,g=f.attr("className");e.each(a,function(e,n){t[n]&&f[n+"Class"](t[n])}),m=i(r.call(this)),f.attr("className",g),f.animate(s(v,m),n,o,function(){e.each(a,function(e,n){t[n]&&f[n+"Class"](t[n])}),typeof f.attr("style")=="object"?(f.attr("style").cssText="",f.attr("style").cssText=h):f.attr("style",h),u&&u.apply(this,arguments)})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,n,r,i){return n?e.effects.animateClass.apply(this,[{add:t},n,r,i]):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,n,r,i){return n?e.effects.animateClass.apply(this,[{remove:t},n,r,i]):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(t,n,r,i,s){return typeof n=="boolean"||n===undefined?r?e.effects.animateClass.apply(this,[n?{add:t}:{remove:t},r,i,s]):this._toggleClass(t,n):e.effects.animateClass.apply(this,[{toggle:t},n,r,i])},switchClass:function(t,n,r,i,s){return e.effects.animateClass.apply(this,[{add:n,remove:t},r,i,s])}}),e.extend(e.effects,{version:"1.8.1",save:function(e,t){for(var n=0;n<t.length;n++)t[n]!==null&&e.data("ec.storage."+t[n],e[0].style[t[n]])},restore:function(e,t){for(var n=0;n<t.length;n++)t[n]!==null&&e.css(t[n],e.data("ec.storage."+t[n]))},setMode:function(e,t){return t=="toggle"&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":e=0;break;case"center":e=.5;break;case"right":e=1;break;default:e=e[1]/t.width}return{x:e,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},r=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0});return t.wrap(r),r=t.parent(),t.css("position")=="static"?(r.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,r){n[r]=t.css(r),isNaN(parseInt(n[r],10))&&(n[r]="auto")}),t.css({position:"relative",top:0,left:0})),r.css(n).show()},removeWrapper:function(e){return e.parent().is(".ui-effects-wrapper")?e.parent().replaceWith(e):e},setTransition:function(t,n,r,i){return i=i||{},e.each(n,function(e,n){unit=t.cssUnit(n),unit[0]>0&&(i[n]=unit[0]*r+unit[1])}),i}}),e.fn.extend({effect:function(t){var n=o.apply(this,arguments);n={options:n[1],duration:n[2],callback:n[3]};var r=e.effects[t];return r&&!e.fx.off?r.call(this,n):this},_show:e.fn.show,show:function(t){if(!t||typeof t=="number"||e.fx.speeds[t])return this._show.apply(this,arguments);var n=o.apply(this,arguments);return n[1].mode="show",this.effect.apply(this,n)},_hide:e.fn.hide,hide:function(t){if(!t||typeof t=="number"||e.fx.speeds[t])return this._hide.apply(this,arguments);var n=o.apply(this,arguments);return n[1].mode="hide",this.effect.apply(this,n)},__toggle:e.fn.toggle,toggle:function(t){if(!t||typeof t=="number"||e.fx.speeds[t]||typeof t=="boolean"||e.isFunction(t))return this.__toggle.apply(this,arguments);var n=o.apply(this,arguments);return n[1].mode="toggle",this.effect.apply(this,n)},cssUnit:function(t){var n=this.css(t),r=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(r=[parseFloat(n),t])}),r}}),e.easing.jswing=e.easing.swing,e.extend(e.easing,{def:"easeOutQuad",swing:function(t,n,r,i,s){return e.easing[e.easing.def](t,n,r,i,s)},easeInQuad:function(e,t,n,r,i){return r*(t/=i)*t+n},easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n},easeInOutQuad:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t+n:-r/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,r,i){return r*(t/=i)*t*t+n},easeOutCubic:function(e,t,n,r,i){return r*((t=t/i-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t+n:r/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,r,i){return r*(t/=i)*t*t*t+n},easeOutQuart:function(e,t,n,r,i){return-r*((t=t/i-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t+n:-r/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,r,i){return r*(t/=i)*t*t*t*t+n},easeOutQuint:function(e,t,n,r,i){return r*((t=t/i-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t*t+n:r/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,r,i){return-r*Math.cos(t/i*(Math.PI/2))+r+n},easeOutSine:function(e,t,n,r,i){return r*Math.sin(t/i*(Math.PI/2))+n},easeInOutSine:function(e,t,n,r,i){return-r/2*(Math.cos(Math.PI*t/i)-1)+n},easeInExpo:function(e,t,n,r,i){return t==0?n:r*Math.pow(2,10*(t/i-1))+n},easeOutExpo:function(e,t,n,r,i){return t==i?n+r:r*(-Math.pow(2,-10*t/i)+1)+n},easeInOutExpo:function(e,t,n,r,i){return t==0?n:t==i?n+r:(t/=i/2)<1?r/2*Math.pow(2,10*(t-1))+n:r/2*(-Math.pow(2,-10*--t)+2)+n},easeInCirc:function(e,t,n,r,i){return-r*(Math.sqrt(1-(t/=i)*t)-1)+n},easeOutCirc:function(e,t,n,r,i){return r*Math.sqrt(1-(t=t/i-1)*t)+n},easeInOutCirc:function(e,t,n,r,i){return(t/=i/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+n:r/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,r,i){e=1.70158;var s=0,o=r;return t==0?n:(t/=i)==1?n+r:(s||(s=i*.3),o<Math.abs(r)?(o=r,e=s/4):e=s/(2*Math.PI)*Math.asin(r/o),-(o*Math.pow(2,10*(t-=1))*Math.sin((t*i-e)*2*Math.PI/s))+n)},easeOutElastic:function(e,t,n,r,i){e=1.70158;var s=0,o=r;return t==0?n:(t/=i)==1?n+r:(s||(s=i*.3),o<Math.abs(r)?(o=r,e=s/4):e=s/(2*Math.PI)*Math.asin(r/o),o*Math.pow(2,-10*t)*Math.sin((t*i-e)*2*Math.PI/s)+r+n)},easeInOutElastic:function(e,t,n,r,i){e=1.70158;var s=0,o=r;return t==0?n:(t/=i/2)==2?n+r:(s||(s=i*.3*1.5),o<Math.abs(r)?(o=r,e=s/4):e=s/(2*Math.PI)*Math.asin(r/o),t<1?-0.5*o*Math.pow(2,10*(t-=1))*Math.sin((t*i-e)*2*Math.PI/s)+n:o*Math.pow(2,-10*(t-=1))*Math.sin((t*i-e)*2*Math.PI/s)*.5+r+n)},easeInBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),r*(t/=i)*t*((s+1)*t-s)+n},easeOutBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),r*((t=t/i-1)*t*((s+1)*t+s)+1)+n},easeInOutBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),(t/=i/2)<1?r/2*t*t*(((s*=1.525)+1)*t-s)+n:r/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+n},easeInBounce:function(t,n,r,i,s){return i-e.easing.easeOutBounce(t,s-n,0,i,s)+r},easeOutBounce:function(e,t,n,r,i){return(t/=i)<1/2.75?r*7.5625*t*t+n:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+n:r*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(t,n,r,i,s){return n<s/2?e.easing.easeInBounce(t,n*2,0,i,s)*.5+r:e.easing.easeOutBounce(t,n*2-s,0,i,s)*.5+i*.5+r}})}(jQuery),function(e){e.effects.blind=function(t){return this.queue(function(){var n=e(this),r=["position","top","left"],i=e.effects.setMode(n,t.options.mode||"hide"),s=t.options.direction||"vertical";e.effects.save(n,r),n.show();var o=e.effects.createWrapper(n).css({overflow:"hidden"}),u=s=="vertical"?"height":"width";s=s=="vertical"?o.height():o.width(),i=="show"&&o.css(u,0);var f={};f[u]=i=="show"?s:0,o.animate(f,t.duration,t.options.easing,function(){i=="hide"&&n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(n[0],arguments),n.dequeue()})})}}(jQuery),function(){function C(e,t,n){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e._chain&&(e=e._wrapped),t._chain&&(t=t._wrapped);if(e.isEqual&&S.isFunction(e.isEqual))return e.isEqual(t);if(t.isEqual&&S.isFunction(t.isEqual))return t.isEqual(e);var r=a.call(e);if(r!=a.call(t))return!1;switch(r){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var i=n.length;while(i--)if(n[i]==e)return!0;n.push(e);var s=0,o=!0;if(r=="[object Array]"){s=e.length,o=s==t.length;if(o)while(s--)if(!(o=s in e==s in t&&C(e[s],t[s],n)))break}else{if("constructor"in e!="constructor"in t||e.constructor!=t.constructor)return!1;for(var u in e)if(f.call(e,u)){s++;if(!(o=f.call(t,u)&&C(e[u],t[u],n)))break}if(o){for(u in t)if(f.call(t,u)&&!(s--))break;o=!s}}return n.pop(),o}var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.slice,u=r.unshift,a=i.toString,f=i.hasOwnProperty,l=r.forEach,c=r.map,h=r.reduce,p=r.reduceRight,d=r.filter,v=r.every,m=r.some,g=r.indexOf,y=r.lastIndexOf,b=Array.isArray,w=Object.keys,E=s.bind,S=function(e){return new A(e)};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=S),exports._=S):e._=S,S.VERSION="1.3.0";var x=S.each=S.forEach=function(e,t,r){if(e==null)return;if(l&&e.forEach===l)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(i in e&&t.call(r,e[i],i,e)===n)return}else for(var o in e)if(f.call(e,o)&&t.call(r,e[o],o,e)===n)return};S.map=function(e,t,n){var r=[];return e==null?r:c&&e.map===c?e.map(t,n):(x(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),e.length===+e.length&&(r.length=e.length),r)},S.reduce=S.foldl=S.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(h&&e.reduce===h)return r&&(t=S.bind(t,r)),i?e.reduce(t,n):e.reduce(t);x(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError("Reduce of empty array with no initial value");return n},S.reduceRight=S.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduceRight===p)return r&&(t=S.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=S.toArray(e).reverse();return r&&!i&&(t=S.bind(t,r)),i?S.reduce(s,t,n,r):S.reduce(s,t)},S.find=S.detect=function(e,t,n){var r;return T(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},S.filter=S.select=function(e,t,n){var r=[];return e==null?r:d&&e.filter===d?e.filter(t,n):(x(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},S.reject=function(e,t,n){var r=[];return e==null?r:(x(e,function(e,i,s){t.call(n,e,i,s)||(r[r.length]=e)}),r)},S.every=S.all=function(e,t,r){var i=!0;return e==null?i:v&&e.every===v?e.every(t,r):(x(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),i)};var T=S.some=S.any=function(e,t,r){t||(t=S.identity);var i=!1;return e==null?i:m&&e.some===m?e.some(t,r):(x(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};S.include=S.contains=function(e,t){var n=!1;return e==null?n:g&&e.indexOf===g?e.indexOf(t)!=-1:(n=T(e,function(e){return e===t}),n)},S.invoke=function(e,t){var n=o.call(arguments,2);return S.map(e,function(e){return(S.isFunction(t)?t||e:e[t]).apply(e,n)})},S.pluck=function(e,t){return S.map(e,function(e){return e[t]})},S.max=function(e,t,n){if(!t&&S.isArray(e))return Math.max.apply(Math,e);if(!t&&S.isEmpty(e))return-Infinity;var r={computed:-Infinity};return x(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},S.min=function(e,t,n){if(!t&&S.isArray(e))return Math.min.apply(Math,e);if(!t&&S.isEmpty(e))return Infinity;var r={computed:Infinity};return x(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},S.shuffle=function(e){var t=[],n;return x(e,function(e,r,i){r==0?t[0]=e:(n=Math.floor(Math.random()*(r+1)),t[r]=t[n],t[n]=e)}),t},S.sortBy=function(e,t,n){return S.pluck(S.map(e,function(e,r,i){return{value:e,criteria:t.call(n,e,r,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;return n<r?-1:n>r?1:0}),"value")},S.groupBy=function(e,t){var n={},r=S.isFunction(t)?t:function(e){return e[t]};return x(e,function(e,t){var i=r(e,t);(n[i]||(n[i]=[])).push(e)}),n},S.sortedIndex=function(e,t,n){n||(n=S.identity);var r=0,i=e.length;while(r<i){var s=r+i>>1;n(e[s])<n(t)?r=s+1:i=s}return r},S.toArray=function(e){return e?e.toArray?e.toArray():S.isArray(e)?o.call(e):S.isArguments(e)?o.call(e):S.values(e):[]},S.size=function(e){return S.toArray(e).length},S.first=S.head=function(e,t,n){return t!=null&&!n?o.call(e,0,t):e[0]},S.initial=function(e,t,n){return o.call(e,0,e.length-(t==null||n?1:t))},S.last=function(e,t,n){return t!=null&&!n?o.call(e,Math.max(e.length-t,0)):e[e.length-1]},S.rest=S.tail=function(e,t,n){return o.call(e,t==null||n?1:t)},S.compact=function(e){return S.filter(e,function(e){return!!e})},S.flatten=function(e,t){return S.reduce(e,function(e,n){return S.isArray(n)?e.concat(t?n:S.flatten(n)):(e[e.length]=n,e)},[])},S.without=function(e){return S.difference(e,o.call(arguments,1))},S.uniq=S.unique=function(e,t,n){var r=n?S.map(e,n):e,i=[];return S.reduce(r,function(n,r,s){if(0==s||(t===!0?S.last(n)!=r:!S.include(n,r)))n[n.length]=r,i[i.length]=e[s];return n},[]),i},S.union=function(){return S.uniq(S.flatten(arguments,!0))},S.intersection=S.intersect=function(e){var t=o.call(arguments,1);return S.filter(S.uniq(e),function(e){return S.every(t,function(t){return S.indexOf(t,e)>=0})})},S.difference=function(e){var t=S.flatten(o.call(arguments,1));return S.filter(e,function(e){return!S.include(t,e)})},S.zip=function(){var e=o.call(arguments),t=S.max(S.pluck(e,"length")),n=new Array(t);for(var r=0;r<t;r++)n[r]=S.pluck(e,""+r);return n},S.indexOf=function(e,t,n){if(e==null)return-1;var r,i;if(n)return r=S.sortedIndex(e,t),e[r]===t?r:-1;if(g&&e.indexOf===g)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(r in e&&e[r]===t)return r;return-1},S.lastIndexOf=function(e,t){if(e==null)return-1;if(y&&e.lastIndexOf===y)return e.lastIndexOf(t);var n=e.length;while(n--)if(n in e&&e[n]===t)return n;return-1},S.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var N=function(){};S.bind=function(t,n){var r,i;if(t.bind===E&&E)return E.apply(t,o.call(arguments,1));if(!S.isFunction(t))throw new TypeError;return i=o.call(arguments,2),r=function(){if(this instanceof r){N.prototype=t.prototype;var e=new N,s=t.apply(e,i.concat(o.call(arguments)));return Object(s)===s?s:e}return t.apply(n,i.concat(o.call(arguments)))}},S.bindAll=function(e){var t=o.call(arguments,1);return t.length==0&&(t=S.functions(e)),x(t,function(t){e[t]=S.bind(e[t],e)}),e},S.memoize=function(e,t){var n={};return t||(t=S.identity),function(){var r=t.apply(this,arguments);return f.call(n,r)?n[r]:n[r]=e.apply(this,arguments)}},S.delay=function(e,t){var n=o.call(arguments,2);return setTimeout(function(){return e.apply(e,n)},t)},S.defer=function(e){return S.delay.apply(S,[e,1].concat(o.call(arguments,1)))},S.throttle=function(e,t){var n,r,i,s,o,u=S.debounce(function(){o=s=!1},t);return function(){n=this,r=arguments;var a=function(){i=null,o&&e.apply(n,r),u()};i||(i=setTimeout(a,t)),s?o=!0:e.apply(n,r),u(),s=!0}},S.debounce=function(e,t){var n;return function(){var r=this,i=arguments,s=function(){n=null,e.apply(r,i)};clearTimeout(n),n=setTimeout(s,t)}},S.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments))}},S.wrap=function(e,t){return function(){var n=[e].concat(o.call(arguments,0));return t.apply(this,n)}},S.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},S.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},S.keys=w||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)f.call(e,n)&&(t[t.length]=n);return t},S.values=function(e){return S.map(e,S.identity)},S.functions=S.methods=function(e){var t=[];for(var n in e)S.isFunction(e[n])&&t.push(n);return t.sort()},S.extend=function(e){return x(o.call(arguments,1),function(t){for(var n in t)t[n]!==void 0&&(e[n]=t[n])}),e},S.defaults=function(e){return x(o.call(arguments,1),function(t){for(var n in t)e[n]==null&&(e[n]=t[n])}),e},S.clone=function(e){return S.isObject(e)?S.isArray(e)?e.slice():S.extend({},e):e},S.tap=function(e,t){return t(e),e},S.isEqual=function(e,t){return C(e,t,[])},S.isEmpty=function(e){if(S.isArray(e)||S.isString(e))return e.length===0;for(var t in e)if(f.call(e,t))return!1;return!0},S.isElement=function(e){return!!e&&e.nodeType==1},S.isArray=b||function(e){return a.call(e)=="[object Array]"},S.isObject=function(e){return e===Object(e)},S.isArguments=function(e){return a.call(e)=="[object Arguments]"},S.isArguments(arguments)||(S.isArguments=function(e){return!!e&&!!f.call(e,"callee")}),S.isFunction=function(e){return a.call(e)=="[object Function]"},S.isString=function(e){return a.call(e)=="[object String]"},S.isNumber=function(e){return a.call(e)=="[object Number]"},S.isNaN=function(e){return e!==e},S.isBoolean=function(e){return e===!0||e===!1||a.call(e)=="[object Boolean]"},S.isDate=function(e){return a.call(e)=="[object Date]"},S.isRegExp=function(e){return a.call(e)=="[object RegExp]"},S.isNull=function(e){return e===null},S.isUndefined=function(e){return e===void 0},S.noConflict=function(){return e._=t,this},S.identity=function(e){return e},S.times=function(e,t,n){for(var r=0;r<e;r++)t.call(n,r)},S.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},S.mixin=function(e){x(S.functions(e),function(t){M(t,S[t]=e[t])})};var k=0;S.uniqueId=function(e){var t=k++;return e?e+t:t},S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/.^/;S.template=function(e,t){var n=S.templateSettings,r="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(n.escape||L,function(e,t){return"',_.escape("+t.replace(/\\'/g,"'")+"),'"}).replace(n.interpolate||L,function(e,t){return"',"+t.replace(/\\'/g,"'")+",'"}).replace(n.evaluate||L,function(e,t){return"');"+t.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ").replace(/\\\\/g,"\\")+";__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",i=new Function("obj","_",r);return t?i(t,S):function(e){return i.call(this,e,S)}},S.chain=function(e){return S(e).chain()};var A=function(e){this._wrapped=e};S.prototype=A.prototype;var O=function(e,t){return t?S(e).chain():e},M=function(e,t){A.prototype[e]=function(){var e=o.call(arguments);return u.call(e,this._wrapped),O(t.apply(S,e),this._chain)}};S.mixin(S),x(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];A.prototype[e]=function(){var n=this._wrapped;t.apply(n,arguments);var r=n.length;return(e=="shift"||e=="splice")&&r===0&&delete n[0],O(n,this._chain)}}),x(["concat","join","slice"],function(e){var t=r[e];A.prototype[e]=function(){return O(t.apply(this._wrapped,arguments),this._chain)}}),A.prototype.chain=function(){return this._chain=!0,this},A.prototype.value=function(){return this._wrapped}}.call(this),function(){jQuery.fn.autohide=function(t){var n=this;t=_.extend({clickable:null,onHide:null},t||{}),n._autoignore=!0,setTimeout(function(){delete n._autoignore},0),n._autohider||(n.forceHide=function(r){!r&&t.onHide&&t.onHide(),n.hide(),e.jQuery(document).unbind("click",n._autohider),e.jQuery(document).unbind("keypress",n._autohider),n._autohider=null,n.forceHide=null},n._autohider=function(r){if(n._autoignore)return;if(t.clickable&&(n[0]==r.target||_.include(e.jQuery(r.target).parents(),n[0])))return;if(t.onHide&&!t.onHide(r))return;n.forceHide(r)},e.jQuery(document).bind("click",this._autohider),e.jQuery(document).bind("keypress",this._autohider))},jQuery.fn.acceptInput=function(t){var n={delay:1e3,callback:null,className:"acceptInput",initialStateClassName:"acceptInput-awaitingActivity",typingStateClassName:"acceptInput-acceptingInput",inputClassName:"acceptInput-textField"};return t&&e.jQuery.extend(n,t),this.editTimer=null,this.deny=function(){this.parent().addClass("stopAcceptingInput")},this.allow=function(){this.parent().removeClass("stopAcceptingInput")},this.each(function(t,r){if(e.jQuery(r).parent().hasClass(n.initialStateClassName))return!0;r=e.jQuery(r);var i=r.wrap('<span class="'+n.initialStateClassName+'"></span>');i=i.parent();var s=e.jQuery('<input type="text" class="'+n.inputClassName+'" style="display:none;" />').appendTo(i);s.bind("blur",function(){i.addClass(n.initialStateClassName).removeClass(n.typingStateClassName),s.hide(),r.show()}),s.bind("keyup",function(){var t=s.attr("value");r.text(t),n.changeCallBack&&(e.jQuery.fn.acceptInput.editTimer=setTimeout(n.changeCallBack,500))}),s.bind("keydown",function(){e.jQuery.fn.acceptInput.editTimer&&clearTimeout(e.jQuery.fn.acceptInput.editTimer)}),i.bind("click",function(){if(i.hasClass("stopAcceptingInput"))return;if(i.hasClass(n.initialStateClassName)){var t=function(){i.addClass(n.initialStateClassName).removeClass(n.typingStateClassName)};e.jQuery(s).autohide({clickable:!0,onHide:e.jQuery.proxy(t,this)}),r.hide(),s.attr("value",r.text()).show()[0].focus(),s[0].select(),i.addClass(n.typingStateClassName).removeClass(n.initialStateClassName)}})}),this}}.call(this),function(e){e.fn.placeholder=function(t){var n={message:"...",className:"placeholder",clearClassName:"show_cancel_search"},r=e.extend({},n,t),i=function(e){e.val(e.attr("placeholder")||r.message),e.addClass(r.className)};return this.each(function(){var t=e(this);if(t.attr("type")=="search")return;t.bind("blur",function(){t.val()==""&&i(t)}).bind("focus",function(){t.val()==(t.attr("placeholder")||r.message)&&t.val(""),t.removeClass(r.className)}).bind("keyup",function(){var e=t.val();e!=""&&e!=r.message?t.parent().addClass(r.clearClassName):t.parent().removeClass(r.clearClassName)}),_.defer(function(){t.keyup().blur()})})}}(jQuery),window.console||(window.console={}),console.log||(console.log=_.identity);var e={};return e.jQuery=jQuery.noConflict(!0),e.viewers=e.viewers||{},e.model=e.model||{},e.Annotation=function(e){this.position={top:e.top,left:e.left},this.dimensions={width:e.width,height:e.height},this.page=e.page,this.pageEl=e.pageEl,this.annotationContainerEl=e.annotationContainerEl,this.viewer=this.page.set.viewer,this.annotationEl=null,this.renderedHTML=e.renderedHTML,this.type=e.type,this.id=e.id,this.model=this.viewer.models.annotations.getAnnotation(this.id),this.state="collapsed",this.active=!1,this.remove(),this.add(),e.active&&(this.viewer.helpers.setActiveAnnotationLimits(this),this.viewer.events.resetTracker(),this.active=null,this.show(),e.showEdit&&this.showEdit())},e.Annotation.prototype.add=function(){if(this.type==="page")this.annotationEl=this.renderedHTML.insertBefore(this.annotationContainerEl);else if(this.page.annotations.length>0)for(var e=0,t=this.page.annotations.length;e<t;e++){if(this.page.annotations[e].id===this.id)return!1;this.annotationEl=this.renderedHTML.appendTo(this.annotationContainerEl)}else this.annotationEl=this.renderedHTML.appendTo(this.annotationContainerEl)},e.Annotation.prototype.next=function(){this.hide.preventRemovalOfCoverClass=!0;var e=this.viewer.models.annotations.getNextAnnotation(this.id);if(!e)return;this.page.set.showAnnotation({index:e.index,id:e.id,top:e.top})},e.Annotation.prototype.previous=function(){this.hide.preventRemovalOfCoverClass=!0;var e=this.viewer.models.annotations.getPreviousAnnotation(this.id);if(!e)return;this.page.set.showAnnotation({index:e.index,id:e.id,top:e.top})},e.Annotation.prototype.show=function(e){this.viewer.activeAnnotation&&this.viewer.activeAnnotation.id!=this.id&&this.viewer.activeAnnotation.hide(),this.viewer.annotationToLoadId=null,this.viewer.elements.window.addClass("DV-coverVisible"),this.annotationEl.find("div.DV-annotationBG").css({display:"block",opacity:1}),this.annotationEl.addClass("DV-activeAnnotation"),this.viewer.activeAnnotation=this,this.viewer.helpers.addObserver("trackAnnotation"),this.viewer.helpers.setActiveAnnotationInNav(this.id),this.active=!0,this.pageEl.parent(".DV-set").addClass("DV-activePage"),e&&e.edit&&this.showEdit()},e.Annotation.prototype.hide=function(e){var t=parseInt(this.viewer.elements.currentPage.text(),10);this.type!=="page"&&this.annotationEl.find("div.DV-annotationBG").css({opacity:0,display:"none"});var n=this.annotationEl.hasClass("DV-editing");this.annotationEl.removeClass("DV-editing DV-activeAnnotation"),e===!0&&this.viewer.elements.window.removeClass("DV-coverVisible");if(this.hide.preventRemovalOfCoverClass===!1||!this.hide.preventRemovalOfCoverClass)this.viewer.elements.window.removeClass("DV-coverVisible"),this.hide.preventRemovalOfCoverClass=!1;this.viewer.activeAnnotation=null,this.viewer.events.trackAnnotation.h=null,this.viewer.events.trackAnnotation.id=null,this.viewer.events.trackAnnotation.combined=null,this.active=!1,this.viewer.pageSet.setActiveAnnotation(null),this.viewer.helpers.removeObserver("trackAnnotation"),this.viewer.helpers.setActiveAnnotationInNav(),this.pageEl.parent(".DV-set").removeClass("DV-activePage"),this.removeConnector(!0),n&&this.viewer.helpers.saveAnnotation({target:this.annotationEl},"onlyIfText")},e.Annotation.prototype.toggle=function(e){this.viewer.activeAnnotation&&this.viewer.activeAnnotation!=this&&this.viewer.activeAnnotation.hide();if(this.type==="page")return;this.annotationEl.toggleClass("DV-activeAnnotation"),this.active==1?this.hide(!0):this.show()},e.Annotation.prototype.drawConnector=function(){this.active!=1&&(this.viewer.elements.window.addClass("DV-annotationActivated"),this.annotationEl.addClass("DV-annotationHover"))},e.Annotation.prototype.removeConnector=function(e){this.active!=1&&(this.viewer.elements.window.removeClass("DV-annotationActivated"),this.annotationEl.removeClass("DV-annotationHover"))},e.Annotation.prototype.showEdit=function(){this.annotationEl.addClass("DV-editing"),this.viewer.$(".DV-annotationTitleInput",this.annotationEl).focus()},e.Annotation.prototype.remove=function(){e.jQuery("#DV-annotation-"+this.id).remove()},e.DragReporter=function(e,t,n,r){this.viewer=e,this.dragClassName="DV-dragging",this.sensitivityY=1,this.sensitivityX=1,this.oldPageY=0,_.extend(this,r),this.dispatcher=n,this.toWatch=this.viewer.$(t),this.boundReporter=_.bind(this.mouseMoveReporter,this),this.boundMouseUpReporter=_.bind(this.mouseUpReporter,this),this.boundMouseDownReporter=_.bind(this.mouseDownReporter,this),this.setBinding()},e.DragReporter.prototype.shouldIgnore=function(e){if(!this.ignoreSelector)return!1;var t=this.viewer.$(e.target);return t.parents().is(this.ignoreSelector)||t.is(this.ignoreSelector)},e.DragReporter.prototype.mouseUpReporter=function(e){if(this.shouldIgnore(e))return!0;e.preventDefault(),clearInterval(this.updateTimer),this.stop()},e.DragReporter.prototype.oldPositionUpdater=function(){this.oldPageY=this.pageY},e.DragReporter.prototype.stop=function(){this.toWatch.removeClass(this.dragClassName),this.toWatch.unbind("mousemove")},e.DragReporter.prototype.setBinding=function(){this.toWatch.mouseup(this.boundMouseUpReporter),this.toWatch.mousedown(this.boundMouseDownReporter)},e.DragReporter.prototype.unBind=function(){this.toWatch.unbind("mouseup",this.boundMouseUpReporter),this.toWatch.unbind("mousedown",this.boundMouseDownReporter)},e.DragReporter.prototype.destroy=function(){this.unBind(),this.toWatch=null},e.DragReporter.prototype.mouseDownReporter=function(e){if(this.shouldIgnore(e))return!0;e.preventDefault(),this.pageY=e.pageY,this.pageX=e.pageX,this.oldPageY=e.pageY,this.updateTimer=setInterval(_.bind(this.oldPositionUpdater,this),1200),this.toWatch.addClass(this.dragClassName),this.toWatch.mousemove(this.boundReporter)},e.DragReporter.prototype.mouseMoveReporter=function(e){if(this.shouldIgnore(e))return!0;e.preventDefault();var t=Math.round(this.sensitivityX*(this.pageX-e.pageX)),n=Math.round(this.sensitivityY*(this.pageY-e.pageY)),r=t>0?"right":"left",i=n>0?"down":"up";this.pageY=e.pageY,this.pageX=e.pageX;if(n===0&&t===0)return;this.dispatcher({event:e,deltaX:t,deltaY:n,directionX:r,directionY:i})},e.Elements=function(t){this._viewer=t;var n=e.Schema.elements;for(var r=0,i=n.length;r<i;r++)this.getElement(n[r])},e.Elements.prototype.getElement=function(e,t){this[e.name]=this._viewer.$(e.query)},e.History=function(t){this.viewer=t,e.History.count++,this.URL_CHECK_INTERVAL=500,this.USE_IFRAME=e.jQuery.browser.msie&&e.jQuery.browser.version<8,this.handlers=[],this.defaultCallback=null,this.hash=window.location.hash,_.bindAll(this,"checkURL");if(e.History.count>1)return;e.jQuery(_.bind(function(){this.USE_IFRAME&&(this.iframe=e.jQuery('<iframe src="javascript:0"/>').hide().appendTo("body")[0].contentWindow),"onhashchange"in window?window.onhashchange=this.checkURL:setInterval(this.checkURL,this.URL_CHECK_INTERVAL)},this))},e.History.count=0,e.History.prototype={register:function(e,t){this.handlers.push({matcher:e,callback:t})},save:function(t){if(e.History.count>1)return;window.location.hash=this.hash=t?"#"+t:"",this.USE_IFRAME&&this.iframe&&this.hash!=this.iframe.location.hash&&(this.iframe.document.open().close(),this.iframe.location.hash=this.hash)},checkURL:function(){if(e.History.count>1)return;try{var t=(this.USE_IFRAME?this.iframe:window).location.hash}catch(n){}if(!t||t==this.hash||"#"+t==this.hash||t==decodeURIComponent(this.hash))return!1;this.USE_IFRAME&&(window.location.hash=t),this.loadURL(!0)},loadURL:function(e){var t=this.hash=window.location.hash;for(var n=this.handlers.length-1;n>=0;n--){var r=t.match(this.handlers[n].matcher);if(r)return e===!0&&this.handlers[n].callback.apply(this.handlers[n].callback,r.slice(1,r.length)),!0}if(this.defaultCallback==null||e!==!0)return!1;this.defaultCallback()}},e.Page=function(e,t){this.viewer=e,this.index=t.index;for(var n in t)this[n]=t[n];this.el=this.viewer.$(this.el),this.parent=this.el.parent(),this.pageNumberEl=this.el.find("span.DV-pageNumber"),this.pageInsertEl=this.el.find(".DV-pageNoteInsert"),this.removedOverlayEl=this.el.find(".DV-overlay"),this.pageImageEl=this.getPageImage(),this.pageEl=this.el.find("div.DV-page"),this.annotationContainerEl=this.el.find("div.DV-annotations"),this.coverEl=this.el.find("div.DV-cover"),this.loadTimer=null,this.hasLayerPage=!1,this.hasLayerRegional=!1,this.imgSource=null,this.offset=null,this.pageNumber=null,this.zoom=1,this.annotations=[];var r=this.viewer.models;this.model_document=r.document,this.model_pages=r.pages,this.model_annotations=r.annotations,this.model_chapters=r.chapters},e.Page.prototype.setPageImage=function(){this.pageImageEl=this.getPageImage()},e.Page.prototype.getPageImage=function(){return this.el.find("img.DV-pageImage")},e.Page.prototype.getOffset=function(){return this.model_document.offsets[this.index]},e.Page.prototype.getPageNoteHeight=function(){return this.model_pages.pageNoteHeights[this.index]},e.Page.prototype.draw=function(t){if(this.index===t.index&&!t.force&&this.imgSource==this.model_pages.imageURL(this.index))return;this.index=t.force===!0?this.index:t.index;var n=[],r=this.model_pages.imageURL(this.index);this.el[0].className=this.el[0].className.replace(/\s*DV-page-\d+/,"")+" DV-page-"+(this.index+1),this.imgSource!=r&&(this.imgSource=r,this.loadImage()),this.sizeImage(),this.position();if(this.pageNumber!=this.index+1||t.forceAnnotationRedraw===!0){for(var i=0;i<this.annotations.length;i++)this.annotations[i].remove(),delete this.annotations[i],this.hasLayerRegional=!1,this.hasLayerPage=!1;this.annotations=[];var s=this.model_annotations.byPage[this.index];if(s)for(var i=0;i<s.length;i++){var o=s[i];if(o.id===this.viewer.annotationToLoadId){var u=!0;o.id===this.viewer.annotationToLoadEdit&&(t.edit=!0),this.viewer.openingAnnotationFromHash&&(this.viewer.helpers.jump(this.index,(o.top||0)-37),this.viewer.openingAnnotationFromHash=!1)}else var u=!1;o.type=="page"?this.hasLayerPage=!0:o.type=="regional"&&(this.hasLayerRegional=!0);var a=this.viewer.$(".DV-allAnnotations .DV-annotation[rel=aid-"+o.id+"]").clone();a.attr("id","DV-annotation-"+o.id),a.find(".DV-img").each(function(){var t=e.jQuery(this);t.attr("src",t.attr("data-src"))});var f=new e.Annotation({renderedHTML:a,id:o.id,page:this,pageEl:this.pageEl,annotationContainerEl:this.annotationContainerEl,pageNumber:this.pageNumber,state:"collapsed",top:o.y1,left:o.x1,width:o.x1+o.x2,height:o.y1+o.y2,active:u,showEdit:t.edit,type:o.type});this.annotations.push(f)}this.pageInsertEl.toggleClass("visible",!this.hasLayerPage),this.renderMeta({pageNumber:this.index+1}),this.drawRemoveOverlay()}this.setPageType()},e.Page.prototype.drawRemoveOverlay=function(){this.removedOverlayEl.toggleClass("visible",!!this.viewer.models.removedPages[this.index+1])},e.Page.prototype.setPageType=function(){this.annotations.length>0?(this.hasLayerPage===!0&&this.el.addClass("DV-layer-page"),this.hasLayerRegional===!0&&this.el.addClass("DV-layer-page")):this.el.removeClass("DV-layer-page DV-layer-regional")},e.Page.prototype.position=function(e){this.el.css({top:this.model_document.offsets[this.index]}),this.offset=this.getOffset()},e.Page.prototype.renderMeta=function(e){this.pageNumberEl.text("p. "+e.pageNumber),this.pageNumber=e.pageNumber},e.Page.prototype.loadImage=function(t){this.loadTimer&&(clearTimeout(this.loadTimer),delete this.loadTimer),this.el.removeClass("DV-loaded").addClass("DV-loading");var n=this.model_pages,r=e.jQuery(new Image),i=this,s=function(){i.loadTimer&&(clearTimeout(i.loadTimer),delete i.loadTimer),r.bind("load readystatechange",function(e){if(this.complete||this.readyState=="complete"&&e.type=="readystatechange"){if(r!=i._currentLoader)return;n.updateHeight(r[0],i.index),i.drawImage(r[0].src),clearTimeout(i.loadTimer),delete i.loadTimer}});var e=i.model_pages.imageURL(i.index);i._currentLoader=r,r[0].src=e};this.loadTimer=setTimeout(s,150),this.viewer.pageSet.redraw()},e.Page.prototype.sizeImage=function(){var e=this.model_pages.width,t=this.model_pages.getPageHeight(this.index);this.coverEl.css({width:e,height:t}),this.pageImageEl.css({width:e,height:t}),this.el.css({height:t,width:e}),this.pageEl.css({height:t,width:e})},e.Page.prototype.drawImage=function(e){var t=this.model_pages.getPageHeight(this.index);if(e==this.pageImageEl.attr("src")&&t==this.pageImageEl.attr("height")){this.el.addClass("DV-loaded").removeClass("DV-loading");return}this.pageImageEl.replaceWith('<img width="'+this.model_pages.width+'" height="'+t+'" class="DV-pageImage" src="'+e+'" />'),this.setPageImage(),this.sizeImage(),this.el.addClass("DV-loaded").removeClass("DV-loading")},e.PageSet=function(e){this.currentPage=null,this.pages={},this.viewer=e,this.zoomText()},e.PageSet.prototype.execute=function(e,t){this.pages.each(function(n){n[e].apply(n,t)})},e.PageSet.prototype.buildPages=function(t){t=t||{};var n=this.getPages();for(var r=0;r<n.length;r++){var i=n[r];i.set=this,i.index=r,this.pages[i.label]=new e.Page(this.viewer,i),i.currentPage==1&&(this.currentPage=this.pages[i.label])}this.viewer.models.annotations.renderAnnotations()},e.PageSet.prototype.getPages=function(){var e=[];return this.viewer.elements.sets.each(function(t,n){var r=t==0?!0:!1;e.push({label:"p"+t,el:n,index:t,pageNumber:t+1,currentPage:r})}),e},e.PageSet.prototype.reflowPages=function(){this.viewer.models.pages.resize(),this.viewer.helpers.setActiveAnnotationLimits(),this.redraw(!1,!0)},e.PageSet.prototype.simpleReflowPages=function(){this.viewer.helpers.setActiveAnnotationLimits(),this.redraw(!1,!1)},e.PageSet.prototype.cleanUp=function(){this.viewer.activeAnnotation&&this.viewer.activeAnnotation.hide(!0)},e.PageSet.prototype.zoom=function(t){if(this.viewer.models.document.zoomLevel===t.zoomLevel)return;var n=this.viewer.models.document.currentIndex(),r=this.viewer.models.document.offsets[n],i=this.viewer.models.document.zoomLevel*1,s=t.zoomLevel/i,o=this.viewer.elements.window.scrollTop();this.viewer.models.document.zoom(t.zoomLevel);var u=parseInt(o,10)>parseInt(r,10)?o-r:r-o,a=u/this.viewer.models.pages.height;this.reflowPages(),this.zoomText(),this.viewer.state==="ViewThumbnails"&&(this.viewer.thumbnails.setZoom(t.zoomLevel),this.viewer.thumbnails.lazyloadThumbnails()),this.viewer.state==="ViewDocument"&&this.viewer.$(".DV-annotationRegion.DV-accessRedact").each(function(){var t=e.jQuery(this);t.css({top:Math.round(t.position().top*s),left:Math.round(t.position().left*s),width:Math.round(t.width()*s),height:Math.round(t.height()*s)})});if(this.viewer.activeAnnotation!=null){var f={index:this.viewer.models.document.currentIndex(),top:this.viewer.activeAnnotation.top,id:this.viewer.activeAnnotation.id};this.viewer.activeAnnotation=null,this.showAnnotation(f),this.viewer.helpers.setActiveAnnotationLimits(this.viewer.activeAnnotation)}else{var l=Math.round(this.viewer.models.pages.height*a);this.viewer.helpers.jump(this.viewer.models.document.currentIndex(),l)}},e.PageSet.prototype.zoomText=function(){var e=this.viewer.models.pages.getPadding(),t=this.viewer.models.pages.zoomLevel;this.viewer.$(".DV-textContents").width(t-e),this.viewer.$(".DV-textPage").width(t),this.viewer.elements.collection.css({width:t+e})},e.PageSet.prototype.draw=function(e){for(var t=0,n=e.length;t<n;t++){var r=this.pages[e[t].label];r&&r.draw({index:e[t].index,pageNumber:e[t].index+1})}},e.PageSet.prototype.redraw=function(e,t){this.pages.p0&&this.pages.p0.draw({force:!0,forceAnnotationRedraw:t}),this.pages.p1&&this.pages.p1.draw({force:!0,forceAnnotationRedraw:t}),this.pages.p2&&this.pages.p2.draw({force:!0,forceAnnotationRedraw:t}),t&&this.viewer.activeAnnotation&&this.viewer.helpers.jump(this.viewer.activeAnnotation.page.index,this.viewer.activeAnnotation.position.top-37)},e.PageSet.prototype.setActiveAnnotation=function(e,t){this.viewer.annotationToLoadId=e,this.viewer.annotationToLoadEdit=t?e:null},e.PageSet.prototype.showAnnotation=function(e,t){t=t||{};if(this.viewer.state==="ViewAnnotation"){var n=this.viewer.$(".DV-allAnnotations div[rel=aid-"+e.id+"]")[0].offsetTop;this.viewer.elements.window.scrollTop(n+10,"fast"),this.viewer.helpers.setActiveAnnotationInNav(e.id),this.viewer.activeAnnotationId=e.id;return}this.viewer.helpers.removeObserver("trackAnnotation"),this.viewer.activeAnnotationId=null,this.viewer.activeAnnotation!=null&&this.viewer.activeAnnotation.hide(),this.setActiveAnnotation(e.id,t.edit);var r=this.viewer.models.annotations.byId[e.id].type=="page",i=r?-7:36,n=e.top-i;for(var s=0;s<=2;s++)if(this.pages["p"+s])for(var o=0;o<this.pages["p"+s].annotations.length;o++)if(this.pages["p"+s].annotations[o].id===e.id){this.viewer.helpers.jump(e.index,n),this.pages["p"+s].annotations[o].show(t);return}this.viewer.helpers.jump(e.index,n)},e.Thumbnails=function(e){this.currentIndex=0,this.zoomLevel=null,this.scrollTimer=null,this.imageUrl=e.schema.document.resources.page.image.replace(/\{size\}/,"small"),this.pageCount=e.schema.document.pages,this.viewer=e,this.resizeId=_.uniqueId(),this.sizes={0:{w:60,h:75},1:{w:90,h:112},2:{w:120,h:150},3:{w:150,h:188},4:{w:180,h:225}},_.bindAll(this,"lazyloadThumbnails","loadThumbnails")},e.Thumbnails.prototype.render=function(){this.el=this.viewer.$(".DV-thumbnails"),this.getCurrentIndex(),this.getZoom(),this.buildThumbnails(1,this.pageCount),this.setZoom(),this.viewer.elements.window.unbind("scroll.thumbnails").bind("scroll.thumbnails",this.lazyloadThumbnails);var t="resize.thumbnails-"+this.resizeId;e.jQuery(window).unbind(t).bind(t,this.lazyloadThumbnails)},e.Thumbnails.prototype.buildThumbnails=function(e,t){e==1&&this.el.empty();var n=JST.thumbnails({page:e,endPage:t,zoom:this.zoomLevel,imageUrl:this.imageUrl});this.el.html(this.el.html()+n),this.highlightCurrentPage(),_.defer(this.loadThumbnails)},e.Thumbnails.prototype.getCurrentIndex=function(){this.currentIndex=this.viewer.models.document.currentIndex()},e.Thumbnails.prototype.highlightCurrentPage=function(){this.currentIndex=this.viewer.models.document.currentIndex(),this.viewer.$(".DV-thumbnail.DV-selected").removeClass("DV-selected");var e=this.viewer.$(".DV-thumbnail:eq("+this.currentIndex+")");if(e.length){e.addClass("DV-selected");var t=this.viewer.$(".DV-pages");t.scrollTop(t.scrollTop()+e.position().top-12)}},e.Thumbnails.prototype.setZoom=function(t){this.getZoom(t);var n=this.sizes[this.zoomLevel];this.viewer.$(".DV-hasHeight").each(function(t){var r=n.w/this.width;e.jQuery(this).css({height:this.height*r})}),this.viewer.$(".DV-hasWidth").each(function(t){var r=n.h/this.height,i=e.jQuery(this);i.add(i.prev(".DV-thumbnail-shadow")).css({width:this.width*r})}),this.el[0].className=this.el[0].className.replace(/DV-zoom-\d\s*/,""),this.el.addClass("DV-zoom-"+this.zoomLevel)},e.Thumbnails.prototype.getZoom=function(e){return e!=null?this.zoomLevel=_.indexOf(this.viewer.models.document.ZOOM_RANGES,e):this.zoomLevel=this.viewer.slider.slider("value")},e.Thumbnails.prototype.setImageSize=function(e,t){var n=this.sizes[this.zoomLevel],r=n.w/e.width,i=e.height*r;if(Math.abs(n.h-i)>10||/DV-has/.test(t[0].className))if(i<n.h)t.addClass("DV-hasHeight").css({height:i});else{var s=i/n.h,o=n.w/s;t.add(t.prev(".DV-thumbnail-shadow")).addClass("DV-hasWidth").css({width:o})}t.attr({src:e.src})},e.Thumbnails.prototype.lazyloadThumbnails=function(){if(this.viewer.state!="ViewThumbnails")return;this.scrollTimer&&clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout(this.loadThumbnails,100)},e.Thumbnails.prototype.loadThumbnails=function(){var e=this.viewer,t=e.$(".DV-thumbnails").width(),n=e.elements.window.height(),r=e.elements.window.scrollTop(),i=r+n,s=e.$(".DV-thumbnail:first-child"),o=s.outerHeight(!0),u=s.outerWidth(!0),a=Math.floor(t/u),f=Math.floor(r/o*a),l=Math.ceil(i/o*a);f-=f%a+1,l+=a-l%a,this.loadImages(f,l)},e.Thumbnails.prototype.loadImages=function(t,n){var r=this,i=this.viewer,s=t>0?":gt("+t+")":"",o=n<=this.pageCount?":lt("+n+")":"";i.$(".DV-thumbnail"+o+s).each(function(t){var n=i.$(this);if(!n.attr("src")){var s=i.$(".DV-thumbnail-image",n),o=new Image;e.jQuery(o).bind("load",_.bind(r.setImageSize,r,o,s)).attr({src:s.attr("data-src")})}})},e.Schema=function(){this.models={},this.views={},this.states={},this.helpers={},this.events={},this.elements={},this.text={},this.data={zoomLevel:700,pageWidthPadding:20,additionalPaddingOnPage:30,state:{page:{previous:0,current:0,next:1}}}},e.Schema.prototype.importCanonicalDocument=function(t){_.uniqueId(),t.sections=_.sortBy(t.sections||[],function(e){return e.page}),t.annotations=t.annotations||[],t.canonicalURL=t.canonical_url,this.document=e.jQuery.extend(!0,{},t),this.data.title=t.title,this.data.totalPages=t.pages,this.data.totalAnnotations=t.annotations.length,this.data.sections=t.sections,this.data.chapters=[],this.data.annotationsById={},this.data.annotationsByPage={},_.each(t.annotations,e.jQuery.proxy(this.loadAnnotation,this))},e.Schema.prototype.loadAnnotation=function(t){t.id&&(t.server_id=t.id);var n=t.page-1;t.id=t.id||_.uniqueId(),t.title=t.title||"Untitled Note",t.text=t.content||"",t.access=t.access||"public",t.type=t.location&&t.location.image?"region":"page";if(t.type==="region"){var r=e.jQuery.map(t.location.image.split(","),function(e,t){return parseInt(e,10)});t.y1=r[0],t.x2=r[1],t.y2=r[2],t.x1=r[3]}else t.type==="page"&&(t.y1=0,t.x2=0,t.y2=0,t.x1=0);this.data.annotationsById[t.id]=t;var i=this.data.annotationsByPage[n]=this.data.annotationsByPage[n]||[],s=_.sortedIndex(i,t,function(e){return e.y1});return i.splice(s,0,t),t},e.Schema.elements=[{name:"browserDocument",query:document},{name:"browserWindow",query:window},{name:"header",query:"div.DV-header"},{name:"viewer",query:"div.DV-docViewer"},{name:"window",query:"div.DV-pages"},{name:"sets",query:"div.DV-set"},{name:"pages",query:"div.DV-page"},{name:"metas",query:"div.DV-pageMeta"},{name:"bar",query:"div.DV-bar"},{name:"currentPage",query:"span.DV-currentPage"},{name:"well",query:"div.DV-well"},{name:"collection",query:"div.DV-pageCollection"},{name:"annotations",query:"div.DV-allAnnotations"},{name:"navigation",query:"div.DV-navigation"},{name:"chaptersContainer",query:"div.DV-chaptersContainer"},{name:"searchInput",query:"input.DV-searchInput"},{name:"textCurrentPage",query:"span.DV-textCurrentPage"},{name:"coverPages",query:"div.DV-cover"},{name:"fullscreen",query:"div.DV-fullscreen"}],e.model.Annotations=function(e){this.LEFT_MARGIN=25,this.PAGE_NOTE_FUDGE=window.dc&&dc.account&&(dc.account.isOwner||dc.account.isReviewer)?46:26,this.viewer=e,this.offsetsAdjustments=[],this.offsetAdjustmentSum=0,this.saveCallbacks=[],this.deleteCallbacks=[],this.byId=this.viewer.schema.data.annotationsById,this.byPage=this.viewer.schema.data.annotationsByPage,this.bySortOrder=this.sortAnnotations()},e.model.Annotations.prototype={render:function(e){var t=this.viewer.models.document,n=this.viewer.models.pages,r=n.zoomFactor(),i=e,s,o,u,a;i.type==="page"?(s=o=u=a=0,i.top=0):(u=Math.round(i.y1*r),a=Math.round(i.y2*r),s<this.LEFT_MARGIN&&(s=this.LEFT_MARGIN),s=Math.round(i.x1*r),o=Math.round(i.x2*r),i.top=u-5),i.owns_note=i.owns_note||!1,i.width=n.width,i.pageNumber=i.page,i.author=i.author||"",i.author_organization=i.author_organization||"",i.bgWidth=i.width,i.bWidth=i.width-16,i.excerptWidth=o-s-8,i.excerptMarginLeft=s-3,i.excerptHeight=a-u,i.index=i.page-1,i.image=n.imageURL(i.index),i.imageTop=u+1,i.tabTop=(u<35?35-u:0)+8,i.imageWidth=n.width,i.imageHeight=Math.round(n.height*r),i.regionLeft=s,i.regionWidth=o-s,i.regionHeight=a-u,i.excerptDSHeight=i.excerptHeight-6,i.DSOffset=3,i.access=="public"?i.accessClass="DV-accessPublic":i.access=="exclusive"?i.accessClass="DV-accessExclusive":i.access=="private"&&(i.accessClass="DV-accessPrivate"),i.orderClass="",i.options=this.viewer.options,i.position==1&&(i.orderClass+=" DV-firstAnnotation"),i.position==this.bySortOrder.length&&(i.orderClass+=" DV-lastAnnotation");var f=i.type==="page"?"pageAnnotation":"annotation";return JST[f](i)},sortAnnotations:function(){return this.bySortOrder=_.sortBy(_.values(this.byId),function(e){return e.page*1e4+e.y1})},renderAnnotations:function(){if(this.viewer.options.showAnnotations===!1)return;for(var e=0;e<this.bySortOrder.length;e++){var t=this.bySortOrder[e];t.of=_.indexOf(this.byPage[t.page-1],t),t.position=e+1,t.html=this.render(t)}this.renderAnnotationsByIndex()},renderAnnotationsByIndex:function(){var e=_.map(this.bySortOrder,function(e){return e.html}),t=e.join("").replace(/class="DV-img" src="/g,'class="DV-img" data-src="').replace(/id="DV-annotation-(\d+)"/g,function(e,t){return'id="DV-listAnnotation-'+t+'" rel="aid-'+t+'"'});this.viewer.$("div.DV-allAnnotations").html(t),this.renderAnnotationsByIndex.rendered=!0,this.renderAnnotationsByIndex.zoomLevel=this.zoomLevel,this.updateAnnotationOffsets(),_.defer(_.bind(this.updateAnnotationOffsets,this))},refreshAnnotation:function(t){var n=this.viewer;t.html=this.render(t),e.jQuery.$("#DV-annotation-"+t.id).replaceWith(t.html)},removeAnnotation:function(t){delete this.byId[t.id];var n=t.page-1;this.byPage[n]=_.without(this.byPage[n],t),this.sortAnnotations(),e.jQuery("#DV-annotation-"+t.id+", #DV-listAnnotation-"+t.id).remove(),this.viewer.api.redraw(!0),_.isEmpty(this.byId)&&this.viewer.open("ViewDocument")},updateAnnotationOffsets:function(){this.offsetsAdjustments=[],this.offsetAdjustmentSum=0;var e=this.viewer.models.document,t=this.viewer.$("div.DV-allAnnotations"),n=t.find(".DV-pageNote"),r=this.viewer.models.pages.pageNoteHeights,i=this;this.viewer.$("div.DV-docViewer").hasClass("DV-viewAnnotations")==0&&t.addClass("DV-getHeights");var s=[];_.each(_.select(this.bySortOrder,function(e){return e.type=="page"}),function(e,t){e.el=n[t],s[e.pageNumber]=e});for(var o=0,u=e.totalPages;o<=u;o++){r[o]=0;if(s[o]){var a=this.viewer.$(s[o].el).height()+this.PAGE_NOTE_FUDGE;r[o-1]=a,this.offsetAdjustmentSum+=a}this.offsetsAdjustments[o]=this.offsetAdjustmentSum}t.removeClass("DV-getHeights")},fireSaveCallbacks:function(e){_.each(this.saveCallbacks,function(t){t(e)})},fireDeleteCallbacks:function(e){_.each(this.deleteCallbacks,function(t){t(e)})},getAnnotations:function(e){return this.byPage[e]},getFirstAnnotation:function(){return _.first(this.bySortOrder)},getNextAnnotation:function(e){var t=this.byId[e];return this.bySortOrder[_.indexOf(this.bySortOrder,t)+1]},getPreviousAnnotation:function(e){var t=this.byId[e];return this.bySortOrder[_.indexOf(this.bySortOrder,t)-1]},getAnnotation:function(e){if(e.id)return this.byId[e.id];if(e.index&&!e.id)throw new Error("looked up an annotation without an id");return this.byId[e]}},e.model.Chapters=function(e){this.viewer=e,this.loadChapters()},e.model.Chapters.prototype={loadChapters:function(){var e=this.viewer.schema.data.sections,t=this.chapters=this.viewer.schema.data.chapters=[];_.each(e,function(e){e.id||(e.id=_.uniqueId())});var n=0;for(var r=0,i=this.viewer.schema.data.totalPages;r<i;r++){var s=e[n],o=e[n+1];o&&r>=o.page-1&&(n+=1,s=o),s&&!(s.page>r+1)&&(t[r]=s.id)}},getChapterId:function(e){return this.chapters[e]},getChapterPosition:function(e){for(var t=0,n=this.chapters.length;t<n;t++)if(this.chapters[t]===e)return t}},e.model.Document=function(e){this.viewer=e,this.currentPageIndex=0,this.offsets=[],this.baseHeightsPortion=[],this.baseHeightsPortionOffsets=[],this.paddedOffsets=[],this.originalPageText={},this.totalDocumentHeight=0,this.totalPages=0,this.additionalPaddingOnPage=0,this.ZOOM_RANGES=[500,700,800,900,1e3];var t=this.viewer.schema.data;this.state=t.state,this.baseImageURL=t.baseImageURL,this.canonicalURL=t.canonicalURL,this.additionalPaddingOnPage=t.additionalPaddingOnPage,this.pageWidthPadding=t.pageWidthPadding,this.totalPages=t.totalPages,this.onPageChangeCallbacks=[];var n=this.zoomLevel=this.viewer.options.zoom||t.zoomLevel;n=="auto"&&(this.zoomLevel=t.zoomLevel);var r=_.last(this.ZOOM_RANGES);this.zoomLevel>r&&(this.zoomLevel=r)},e.model.Document.prototype={setPageIndex:function(e){return this.currentPageIndex=e,this.viewer.elements.currentPage.text(this.currentPage()),this.viewer.helpers.setActiveChapter(this.viewer.models.chapters.getChapterId(e)),_.each(this.onPageChangeCallbacks,function(e){e()}),e},currentPage:function(){return this.currentPageIndex+1},currentIndex:function(){return this.currentPageIndex},nextPage:function(){var e=this.currentIndex()+1;return e>=this.totalPages?this.currentIndex():this.setPageIndex(e)},previousPage:function(){var e=this.currentIndex()-1;return e<0?this.currentIndex():this.setPageIndex(e)},zoom:function(e,t){if(this.zoomLevel!=e||t===!0)this.zoomLevel=e,this.viewer.models.pages.resize(this.zoomLevel),this.viewer.models.annotations.renderAnnotations(),this.computeOffsets()},computeOffsets:function(){var e=this.viewer.models.annotations,t=0,n=0,r=this.totalPages,i=0,s=this.viewer.elements.window[0].scrollTop;for(var o=0;o<r;o++){e.offsetsAdjustments[o]&&(n=e.offsetsAdjustments[o]);var u=this.viewer.models.pages.getPageHeight(o),a=this.offsets[o]||0,f=this.offsets[o]=n+t;if(a!==f&&f<s){var l=f-a-i;s+=l,i+=l}this.baseHeightsPortion[o]=Math.round((u+this.additionalPaddingOnPage)/3),this.baseHeightsPortionOffsets[o]=o==0?0:f-this.baseHeightsPortion[o],t+=u+this.additionalPaddingOnPage}t+=n,t!=this.totalDocumentHeight&&(i=this.totalDocumentHeight!=0?i:t-this.totalDocumentHeight,this.viewer.helpers.setDocHeight(t,i),this.totalDocumentHeight=t)},getOffset:function(e){return this.offsets[e]},resetRemovedPages:function(){this.viewer.models.removedPages={}},addPageToRemovedPages:function(e){this.viewer.models.removedPages[e]=!0},removePageFromRemovedPages:function(e){this.viewer.models.removedPages[e]=!1},redrawPages:function(){_.each(this.viewer.pageSet.pages,function(e){e.drawRemoveOverlay()}),this.viewer.thumbnails&&this.viewer.thumbnails.render()},redrawReorderedPages:function(){this.viewer.thumbnails&&this.viewer.thumbnails.render()}},e.model.Pages=function(e){this.viewer=e,this.averageHeight=0,this.pageHeights=[],this.pageNoteHeights=[],this.BASE_WIDTH=700,this.BASE_HEIGHT=906,this.SCALE_FACTORS={500:.714,700:1,800:.8,900:.9,1e3:1},this.DEFAULT_PADDING=100,this.REDUCED_PADDING=44,this.MINI_PADDING=18,this.zoomLevel=this.viewer.models.document.zoomLevel,this.baseWidth=this.BASE_WIDTH,this.baseHeight=this.BASE_HEIGHT,this.width=this.zoomLevel,this.height=this.baseHeight*this.zoomFactor(),this.numPagesLoaded=0},e.model.Pages.prototype={imageURL:function(e){var t=this.viewer.schema.document.resources.page.image,n=this.zoomLevel>this.BASE_WIDTH?"large":"normal",r=e+1;return this.viewer.schema.document.resources.page.zeropad&&(r=this.zeroPad(r,5)),t=t.replace(/\{size\}/,n),t=t.replace(/\{page\}/,r),t},zeroPad:function(e,t){var n=e.toString();while(n.length<t)n="0"+n;return n},getPadding:function(){return this.viewer.options.mini?this.MINI_PADDING:this.viewer.options.zoom=="auto"?this.REDUCED_PADDING:this.DEFAULT_PADDING},zoomFactor:function(){return this.zoomLevel/this.BASE_WIDTH},resize:function(e){var t=this.viewer.models.pages.DEFAULT_PADDING;if(e){if(e==this.zoomLevel)return;var n=this.zoomFactor();this.zoomLevel=e||this.zoomLevel;var r=this.zoomFactor()/n;this.width=Math.round(this.baseWidth*this.zoomFactor()),this.height=Math.round(this.height*r),this.averageHeight=Math.round(this.averageHeight*r)}this.viewer.elements.sets.width(this.zoomLevel),this.viewer.elements.collection.css({width:this.width+t}),this.viewer.$(".DV-textContents").css({"font-size":this.zoomLevel*.02+"px"})},updateHeight:function(e,t){var n=this.getPageHeight(t),r=e.height*(this.zoomLevel>this.BASE_WIDTH?.7:1);e.width<this.baseWidth&&(r*=this.baseWidth/e.width),this.setPageHeight(t,r),this.averageHeight=(this.averageHeight*this.numPagesLoaded+r)/(this.numPagesLoaded+1),this.numPagesLoaded+=1;if(n===r)return;this.viewer.models.document.computeOffsets(),this.viewer.pageSet.simpleReflowPages();if(!this.viewer.activeAnnotation&&t<this.viewer.models.document.currentIndex()){var i=Math.round(r*this.zoomFactor()-n);this.viewer.elements.window[0].scrollTop+=i}},setPageHeight:function(e,t){this.pageHeights[e]=Math.round(t)},getPageHeight:function(e){var t=this.pageHeights[e];return Math.round(t?t*this.zoomFactor():this.height)}},e.Schema.events={zoom:function(e){var t=this.viewer,n=function(){t.pageSet.zoom({zoomLevel:e});var n=t.models.document.ZOOM_RANGES;return t.dragReporter.sensitivity=n[n.length-1]==e?1.5:1,t.notifyChangedState(),!0};t.confirmStateChange?t.confirmStateChange(n):n()},drawPages:function(){if(this.viewer.state!="ViewDocument")return;var e=this.models.document,t=this.elements.window[0],n=e.baseHeightsPortionOffsets,r=this.viewer.scrollPosition=t.scrollTop,i=r+this.viewer.$(t).height()/3,s=_.sortedIndex(n,r),o=_.sortedIndex(n,i);n[s]==r&&s++&&o++;var u=this.helpers.sortPages(o-1),a=e.totalPages;e.currentPage()!=s&&e.setPageIndex(s-1),this.drawPageAt(u,o-1)},drawPageAt:function(e,t){var n=t==0,r=t==this.models.document.totalPages-1;n&&(t+=1);var i=[{label:e[0],index:t-1},{label:e[1],index:t},{label:e[2],index:t+1}];r&&i.pop(),i[n?0:i.length-1].currentPage=!0,this.viewer.pageSet.draw(i)},check:function(){var e=this.viewer;if(e.busy===!1){e.busy=!0;for(var t=0;t<this.viewer.observers.length;t++)this[e.observers[t]].call(this);e.busy=!1}},loadText:function(t,n){t=t?parseInt(t,10):this.models.document.currentIndex(),this._previousTextIndex=t;var r=this,i=function(e){var i=parseInt(t,10)+1;r.viewer.$(".DV-textContents").replaceWith('<pre class="DV-textContents">'+e+"</pre>"),r.elements.currentPage.text(i),r.elements.textCurrentPage.text("p. "+i),r.models.document.setPageIndex(t),r.helpers.setActiveChapter(r.models.chapters.getChapterId(t)),r.viewer.openEditor=="editText"&&!(i in r.models.document.originalPageText)&&(r.models.document.originalPageText[i]=e),r.viewer.openEditor=="editText"&&r.viewer.$(".DV-textContents").attr("contentEditable",!0).addClass("DV-editing"),n&&n.call(r.helpers)};if(r.viewer.schema.text[t])return i(r.viewer.schema.text[t]);var s=e.jQuery.proxy(function(e){i(r.viewer.schema.text[t]=e)},this);this.viewer.$(".DV-textContents").text("");var o=r.viewer.schema.document.resources.page.text.replace("{page}",t+1),u=this.helpers.isCrossDomain(o);u&&(o+="?callback=?"),e.jQuery[u?"getJSON":"get"](o,{},s)},resetTracker:function(){this.viewer.activeAnnotation=null,this.trackAnnotation.combined=null,this.trackAnnotation.h=null},trackAnnotation:function(){var e=this.viewer,t=this.helpers,n=this.elements.window[0].scrollTop;if(e.activeAnnotation){var r=e.activeAnnotation,i=this.trackAnnotation;i.id!=r.id&&(i.id=r.id,t.setActiveAnnotationLimits(r)),!e.activeAnnotation.annotationEl.hasClass("DV-editing")&&(n>i.h||n<i.combined)&&(r.hide(!0),e.pageSet.setActiveAnnotation(null),e.activeAnnotation=null,i.h=null,i.id=null,i.combined=null)}else e.pageSet.setActiveAnnotation(null),e.activeAnnotation=null,i.h=null,i.id=null,i.combined=null,t.removeObserver("trackAnnotation")}},e.Schema.events.ViewAnnotation={next:function(e){var t=this.viewer,n=t.activeAnnotationId,r=this.models.annotations,i=n===null?r.getFirstAnnotation():r.getNextAnnotation(n);if(!i)return!1;t.pageSet.showAnnotation(i),this.helpers.setAnnotationPosition(i.position)},previous:function(e){var t=this.viewer,n=t.activeAnnotationId,r=this.models.annotations,i=n?r.getPreviousAnnotation(n):r.getFirstAnnotation();if(!i)return!1;t.pageSet.showAnnotation(i),this.helpers.setAnnotationPosition(i.position)},search:function(e){return e.preventDefault(),this.viewer.open("ViewSearch"),!1}},e.Schema.events.ViewDocument={next:function(){var e=this.models.document.nextPage();this.helpers.jump(e)},previous:function(e){var t=this.models.document.previousPage();this.helpers.jump(t)},search:function(e){return e.preventDefault(),this.viewer.open("ViewSearch"),!1}},e.Schema.events.ViewSearch={next:function(e){var t=this.models.document.nextPage();this.loadText(t),this.viewer.open("ViewText")},previous:function(e){var t=this.models.document.previousPage();this.loadText(t),this.viewer.open("ViewText")},search:function(e){return e.preventDefault(),this.helpers.getSearchResponse(this.elements.searchInput.val()),!1}},e.Schema.events.ViewText={next:function(e){var t=this.models.document.nextPage();this.loadText(t)},previous:function(e){var t=this.models.document.previousPage();this.loadText(t)},search:function(e){return e.preventDefault(),this.viewer.open("ViewSearch"),!1}},e.Schema.events.ViewThumbnails={next:function(){var e=this.models.document.nextPage();this.helpers.jump(e)},previous:function(e){var t=this.models.document.previousPage();this.helpers.jump(t)},search:function(e){return e.preventDefault(),this.viewer.open("ViewSearch"),!1}},_.extend(e.Schema.events,{handleHashChangeViewDocumentPage:function(e){var t=parseInt(e,10)-1;this.viewer.state==="ViewDocument"?(this.viewer.pageSet.cleanUp(),this.helpers.jump(t)):(this.models.document.setPageIndex(t),this.viewer.open("ViewDocument"))},handleHashChangeLegacyViewDocumentPage:function(e){var t=parseInt(e,10)-1;this.handleHashChangeViewDocumentPage(e)},handleHashChangeViewDocumentAnnotation:function(e,t){var n=parseInt(e,10)-1,t=parseInt(t,10);this.viewer.state==="ViewDocument"?this.viewer.pageSet.showAnnotation(this.viewer.models.annotations.byId[t]):(this.models.document.setPageIndex(n),this.viewer.pageSet.setActiveAnnotation(t),this.viewer.openingAnnotationFromHash=!0,this.viewer.open("ViewDocument"))},handleHashChangeViewAnnotationAnnotation:function(e){var e=parseInt(e,10),t=this.viewer;t.state==="ViewAnnotation"?t.pageSet.showAnnotation(this.viewer.models.annotations.byId[e]):(t.activeAnnotationId=e,this.viewer.open("ViewAnnotation"))},handleHashChangeDefault:function(){this.viewer.pageSet.cleanUp(),this.models.document.setPageIndex(0),this.viewer.state==="ViewDocument"?this.helpers.jump(0):this.viewer.open("ViewDocument")},handleHashChangeViewText:function(e){var t=parseInt(e,10)-1;this.viewer.state==="ViewText"?this.events.loadText(t):(this.models.document.setPageIndex(t),this.viewer.open("ViewText"))},handleHashChangeViewPages:function(){if(this.viewer.state=="ViewThumbnails")return;this.viewer.open("ViewThumbnails")},handleHashChangeViewSearchRequest:function(e,t){var n=parseInt(e,10)-1;this.elements.searchInput.val(decodeURIComponent(t)),this.viewer.state!=="ViewSearch"&&this.models.document.setPageIndex(n),this.viewer.open("ViewSearch")},handleHashChangeViewEntity:function(e,t,n,r){e=parseInt(e,10)-1,t=decodeURIComponent(t),this.elements.searchInput.val(t),this.models.document.setPageIndex(e),this.states.ViewEntity(t,parseInt(n,10),parseInt(r,10))}}),_.extend(e.Schema.events,{handleNavigation:function(e){var t=this.viewer.$(e.target),n=t.closest(".DV-trigger"),r=t.closest(".DV-annotationMarker"),i=t.closest(".DV-chapter");if(!n.length)return;if(t.hasClass("DV-expander"))return i.toggleClass("DV-collapsed");if(r.length){var s=r[0].id.replace("DV-annotationMarker-",""),o=this.models.annotations.getAnnotation(s),u=parseInt(o.index,10)+1;this.viewer.state==="ViewText"?this.loadText(o.index):(this.viewer.state==="ViewThumbnails"&&this.viewer.open("ViewDocument"),this.viewer.pageSet.showAnnotation(o))}else{if(!i.length)return!1;i.removeClass("DV-collapsed");var a=parseInt(i[0].id.replace("DV-chapter-",""),10),f=parseInt(this.models.chapters.getChapterPosition(a),10),u=parseInt(f,10)+1;if(this.viewer.state==="ViewText")this.loadText(f);else{if(this.viewer.state!=="ViewDocument"&&this.viewer.state!=="ViewThumbnails")return!1;this.helpers.jump(f),this.viewer.state==="ViewThumbnails"&&this.viewer.open("ViewDocument")}}}}),e.Schema.helpers={HOST_EXTRACTOR:/https?:\/\/([^\/]+)\//,annotationClassName:".DV-annotation",bindEvents:function(t){var n=this.events.compile("zoom"),r=t.models.document,i=_.indexOf(r.ZOOM_RANGES,r.zoomLevel),s=this.viewer;s.slider=s.$(".DV-zoomBox").slider({step:1,min:0,max:4,value:i,slide:function(e,r){n(t.models.document.ZOOM_RANGES[parseInt(r.value,10)])},change:function(e,r){n(t.models.document.ZOOM_RANGES[parseInt(r.value,10)])}});var o=s.history,u=s.compiled;u.next=this.events.compile("next"),u.previous=this.events.compile("previous");var a=t.states;s.$(".DV-navControls").delegate("span.DV-next","click",u.next),s.$(".DV-navControls").delegate("span.DV-previous","click",u.previous),s.$(".DV-annotationView").delegate(".DV-trigger","click",function(e){e.preventDefault(),t.open("ViewAnnotation")}),s.$(".DV-documentView").delegate(".DV-trigger","click",function(e){t.open("ViewDocument")}),s.$(".DV-thumbnailsView").delegate(".DV-trigger","click",function(e){t.open("ViewThumbnails")}),s.$(".DV-textView").delegate(".DV-trigger","click",function(e){t.open("ViewText")}),s.$(".DV-allAnnotations").delegate(".DV-annotationGoto .DV-trigger","click",e.jQuery.proxy(this.gotoPage,this)),s.$("form.DV-searchDocument").submit(this.events.compile("search")),s.$(".DV-searchBar").delegate(".DV-closeSearch","click",function(e){e.preventDefault(),t.open("ViewText")}),s.$(".DV-searchBox").delegate(".DV-searchInput-cancel","click",e.jQuery.proxy(this.clearSearch,this)),s.$(".DV-searchResults").delegate("span.DV-resultPrevious","click",e.jQuery.proxy(this.highlightPreviousMatch,this)),s.$(".DV-searchResults").delegate("span.DV-resultNext","click",e.jQuery.proxy(this.highlightNextMatch,this)),s.$(".DV-trigger").bind("selectstart",function(){return!1}),this.elements.viewer.delegate(".DV-fullscreen","click",_.bind(this.openFullScreen,this));var f=e.jQuery.proxy(this.annotationBridgeToggle,this),l=this.elements.collection;l.delegate(".DV-annotationTab","click",f),l.delegate(".DV-annotationRegion","click",e.jQuery.proxy(this.annotationBridgeShow,this)),l.delegate(".DV-annotationNext","click",e.jQuery.proxy(this.annotationBridgeNext,this)),l.delegate(".DV-annotationPrevious","click",e.jQuery.proxy(this.annotationBridgePrevious,this)),l.delegate(".DV-showEdit","click",e.jQuery.proxy(this.showAnnotationEdit,this)),l.delegate(".DV-cancelEdit","click",e.jQuery.proxy(this.cancelAnnotationEdit,this)),l.delegate(".DV-saveAnnotation","click",e.jQuery.proxy(this.saveAnnotation,this)),l.delegate(".DV-saveAnnotationDraft","click",e.jQuery.proxy(this.saveAnnotation,this)),l.delegate(".DV-deleteAnnotation","click",e.jQuery.proxy(this.deleteAnnotation,this)),l.delegate(".DV-pageNumber","click",_.bind(this.permalinkPage,this,"document")),l.delegate(".DV-textCurrentPage","click",_.bind(this.permalinkPage,this,"text")),l.delegate(".DV-annotationTitle","click",_.bind(this.permalinkAnnotation,this)),l.delegate(".DV-permalink","click",_.bind(this.permalinkAnnotation,this)),s.$(".DV-thumbnails").delegate(".DV-thumbnail-page","click",function(e){var t=s.$(e.currentTarget);if(!s.openEditor){var n=t.closest(".DV-thumbnail").attr("data-pageNumber")-1;s.models.document.setPageIndex(n),s.open("ViewDocument")}}),_.bindAll(this,"touchStart","touchMove","touchEnd"),this.elements.window[0].ontouchstart=this.touchStart,this.elements.window[0].ontouchmove=this.touchMove,this.elements.window[0].ontouchend=this.touchEnd,this.elements.well[0].ontouchstart=this.touchStart,this.elements.well[0].ontouchmove=this.touchMove,this.elements.well[0].ontouchend=this.touchEnd,s.$(".DV-descriptionToggle").live("click",function(e){e.preventDefault(),e.stopPropagation(),s.$(".DV-descriptionText").toggle(),s.$(".DV-descriptionToggle").toggleClass("DV-showDescription")});var c=e.jQuery.proxy(s.pageSet.cleanUp,this);this.elements.window.live("mousedown",function(e){var n=s.$(e.target);if(n.parents().is(".DV-annotation")||n.is(".DV-annotation"))return!0;t.elements.window.hasClass("DV-coverVisible")&&n.width()-parseInt(e.clientX,10)>=15&&c()});var h=s.schema.document.id;e.jQuery.browser.msie==1?(this.elements.browserDocument.bind("focus."+h,e.jQuery.proxy(this.focusWindow,this)),this.elements.browserDocument.bind("focusout."+h,e.jQuery.proxy(this.focusOut,this))):(this.elements.browserWindow.bind("focus."+h,e.jQuery.proxy(this.focusWindow,this)),this.elements.browserWindow.bind("blur."+h,e.jQuery.proxy(this.blurWindow,this))),this.elements.window.bind("scroll."+h,e.jQuery.proxy(this.focusWindow,this)),this.elements.coverPages.live("mousedown",c),s.acceptInput=this.elements.currentPage.acceptInput({changeCallBack:e.jQuery.proxy(this.acceptInputCallBack,this)})},unbindEvents:function(){var t=this.viewer,n=t.schema.document.id;e.jQuery.browser.msie==1?(this.elements.browserDocument.unbind("focus."+n),this.elements.browserDocument.unbind("focusout."+n)):(t.helpers.elements.browserWindow.unbind("focus."+n),t.helpers.elements.browserWindow.unbind("blur."+n)),t.helpers.elements.browserWindow.unbind("scroll."+n),_.each(t.observers,function(e){t.helpers.removeObserver(e)})},ensureAnnotationImages:function(){this.viewer.$(".DV-img[data-src]").each(function(){var t=e.jQuery(this);t.attr("src",t.attr("data-src"))})},startCheckTimer:function(){var e=this.viewer,t=function(){e.events.check()};this.viewer.checkTimer=setInterval(t,100)},stopCheckTimer:function(){clearInterval(this.viewer.checkTimer)},blurWindow:function(){if(this.viewer.isFocus!==!0)return;this.viewer.isFocus=!1,this.stopCheckTimer()},focusOut:function(){if(this.viewer.activeElement==document.activeElement){this.viewer.isFocus=!1,this.viewer.helpers.stopCheckTimer();return}this.viewer.activeElement=document.activeElement,this.viewer.isFocus=!0},focusWindow:function(){if(this.viewer.isFocus===!0)return;this.viewer.isFocus=!0,this.startCheckTimer()},touchStart:function(e){e.stopPropagation(),e.preventDefault();var t=e.changedTouches[0];this._moved=!1,this._touchX=t.pageX,this._touchY=t.pageY},touchMove:function(e){var t=e.currentTarget,n=e.changedTouches[0],r=this._touchX-n.pageX,i=this._touchY-n.pageY;t.scrollLeft+=r,t.scrollTop+=i,this._touchX-=r,this._touchY-=i;if(i!=0||r!=0)this._moved=!0},touchEnd:function(e){if(!this._moved){var t=e.changedTouches[0],n=t.target,r=document.createEvent("MouseEvent");while(n.nodeType!==1)n=n.parentNode;r.initMouseEvent("click",!0,!0,t.view,1,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,0,null),n.dispatchEvent(r)}this._moved=!1},permalinkPage:function(e,t){if(e=="text")var n=this.viewer.models.document.currentPage();else{var r=this.viewer.$(t.target).closest(".DV-set").attr("data-id"),i=this.viewer.pageSet.pages[r],n=i.pageNumber;this.jump(i.index)}this.viewer.history.save(e+"/p"+n)},permalinkAnnotation:function(e){var t=this.viewer.$(e.target).closest(".DV-annotation").attr("data-id"),n=this.viewer.models.annotations.getAnnotation(t),r=n.server_id||n.id;this.viewer.state=="ViewDocument"?(this.viewer.pageSet.showAnnotation(n),this.viewer.history.save("document/p"+n.pageNumber+"/a"+r)):this.viewer.history.save("annotation/a"+r)},setDocHeight:function(e,t){this.elements.bar.css("height",e),this.elements.window[0].scrollTop+=t},getWindowDimensions:function(){var e={height:window.innerHeight?window.innerHeight:this.elements.browserWindow.height(),width:this.elements.browserWindow.width()};return e},isCrossDomain:function(e){var t=e.match(this.HOST_EXTRACTOR);return t&&t[1]!=window.location.host},resetScrollState:function(){this.elements.window.scrollTop(0)},gotoPage:function(e){e.preventDefault();var t=this.viewer.$(e.target).parents(".DV-annotation").attr("rel").replace("aid-",""),n=this.models.annotations.getAnnotation(t),r=this.viewer;r.state!=="ViewDocument"&&(this.models.document.setPageIndex(n.index),r.open("ViewDocument"))},openFullScreen:function(){var e=this.viewer.schema.document,t=e.canonicalURL.replace(/#\S+$/,""),n=this.models.document.currentPage();switch(this.viewer.state){case"ViewAnnotation":t+="#annotation/a"+this.viewer.activeAnnotationId;break;case"ViewDocument":t+="#document/p"+n;break;case"ViewSearch":t+="#search/p"+n+"/"+encodeURIComponent(this.elements.searchInput.val());break;case"ViewText":t+="#text/p"+n;break;case"ViewThumbnails":t+="#pages/p"+n}window.open(t,"documentviewer","toolbar=no,resizable=yes,scrollbars=no,status=no")},sortPages:function(e){if(e==0||e%3==1)return["p0","p1","p2"];if(e%3==2)return["p1","p2","p0"];if(e%3==0)return["p2","p0","p1"]},addObserver:function(e){this.removeObserver(e),this.viewer.observers.push(e)},removeObserver:function(e){var t=this.viewer.observers;for(var n=0,r=t.length;n<r;n++)e===t[n]&&t.splice(n,1)},toggleContent:function(e){this.elements.viewer.removeClass("DV-viewText DV-viewSearch DV-viewDocument DV-viewAnnotations DV-viewThumbnails").addClass("DV-"+e)},jump:function(e,t,n){t=t?parseInt(t,10):0;var r=this.models.document.getOffset(parseInt(e,10))+t;this.elements.window[0].scrollTop=r,this.models.document.setPageIndex(e),n&&this.viewer.pageSet.redraw(!0),this.viewer.state==="ViewThumbnails"&&this.viewer.thumbnails.highlightCurrentPage()},shift:function(e){var t=this.elements.window,n=t.scrollTop()+e.deltaY,r=t.scrollLeft()+e.deltaX;t.scrollTop(n),t.scrollLeft(r)},getAppState:function(){var e=this.models.document,t=e.currentIndex()==0?1:e.currentPage();return{page:t,zoom:e.zoomLevel,view:this.viewer.state}},constructPages:function(){var e=[],t=this.viewer.schema.data.totalPages<3?this.viewer.schema.data.totalPages:3,n=this.models.pages.height;for(var r=0;r<t;r++)e.push(JST.pages({pageNumber:r+1,pageIndex:r,pageImageSource:null,baseHeight:n}));return e.join("")},positionViewer:function(){var e=this.elements.viewer.position();this.elements.viewer.css({position:"absolute",top:e.top,bottom:0,left:e.left,right:e.left})},unsupportedBrowser:function(){var t=e.jQuery.browser;return t.msie&&parseFloat(t.version,10)<=6?(e.jQuery(this.viewer.options.container).html(JST.unsupported({viewer:this.viewer})),!0):!1},registerHashChangeEvents:function(){var e=this.events,t=this.viewer.history;t.defaultCallback=_.bind(e.handleHashChangeDefault,this.events),t.register(/document\/p(\d*)$/,_.bind(e.handleHashChangeViewDocumentPage,this.events)),t.register(/p(\d*)$/,_.bind(e.handleHashChangeLegacyViewDocumentPage,this.events)),t.register(/p=(\d*)$/,_.bind(e.handleHashChangeLegacyViewDocumentPage,this.events)),t.register(/document\/p(\d*)\/a(\d*)$/,_.bind(e.handleHashChangeViewDocumentAnnotation,this.events)),t.register(/annotation\/a(\d*)$/,_.bind(e.handleHashChangeViewAnnotationAnnotation,this.events)),t.register(/pages$/,_.bind(e.handleHashChangeViewPages,e)),t.register(/text\/p(\d*)$/,_.bind(e.handleHashChangeViewText,this.events)),t.register(/entity\/p(\d*)\/(.*)\/(\d+):(\d+)$/,_.bind(e.handleHashChangeViewEntity,this.events)),t.register(/search\/p(\d*)\/(.*)$/,_.bind(e.handleHashChangeViewSearchRequest,this.events))},autoZoomPage:function(){var e=this.elements.window.outerWidth(!0),t;this.viewer.options.zoom=="auto"?t=Math.min(700,e-this.viewer.models.pages.getPadding()*2):t=this.viewer.options.zoom;var n=[];if(t<=500){var r=(t+700)/2;n=[t,r,700,850,1e3]}else if(t<=750){var r=100+t,i=200+t;n=[.66*t,t,r,i,1e3]}else if(750<t&&t<=850){var r=(1e3-t)/2+t;n=[.66*t,700,t,r,1e3]}else if(850<t&&t<1e3){var r=(t-700)/2+700;n=[.66*t,700,r,t,1e3]}else t>=1e3&&(t=1e3,n=this.viewer.models.document.ZOOM_RANGES);this.viewer.models.document.ZOOM_RANGES=n,this.viewer.slider.slider({value:parseInt(_.indexOf(n,t),10)}),this.events.zoom(t)},handleInitialState:function(){var e=this.viewer.history.loadURL(!0);if(!e){var t=this.viewer.options;this.viewer.open("ViewDocument"),t.note?this.viewer.pageSet.showAnnotation(this.viewer.models.annotations.byId[t.note]):t.page&&this.jump(t.page-1)}}},_.extend(e.Schema.helpers,{getAnnotationModel:function(e){var t=parseInt(e.attr("rel").match(/\d+/),10);return this.models.annotations.getAnnotation(t)},getAnnotationObject:function(e){var e=this.viewer.$(e),t=e.attr("id").replace(/DV\-annotation\-|DV\-listAnnotation\-/,""),n=e.closest("div.DV-set").attr("data-id");for(var r=0;annotationObject=this.viewer.pageSet.pages[n].annotations[r];r++)if(annotationObject.id==t)return e=null,annotationObject;return!1},annotationBridgeToggle:function(e){e.preventDefault();var t=this.getAnnotationObject(this.viewer.$(e.target).closest(this.annotationClassName));t.toggle()},annotationBridgeShow:function(e){e.preventDefault();var t=this.getAnnotationObject(this.viewer.$(e.target).closest(this.annotationClassName));t.show()},annotationBridgeHide:function(e){e.preventDefault();var t=this.getAnnotationObject(this.viewer.$(e.target).closest(this.annotationClassName));t.hide(!0)},annotationBridgeNext:function(e){e.preventDefault();var t=this.getAnnotationObject(this.viewer.$(e.target).closest(this.annotationClassName));t.next()},annotationBridgePrevious:function(e){e.preventDefault();var t=this.getAnnotationObject(this.viewer.$(e.target).closest(this.annotationClassName));t.previous()},setAnnotationPosition:function(e){this.elements.currentPage.text(e)},setActiveAnnotationLimits:function(e){var e=e?e:this.viewer.activeAnnotation;if(!e||e==null)return;var t=this.elements,n=e.page,r=e.annotationEl,i=e.position.top*this.models.pages.zoomFactor(),s=this.events.trackAnnotation;e.type==="page"?(s.h=r.outerHeight()+n.getOffset(),s.combined=n.getOffset()-t.window.height()):(s.h=r.height()+i-20+n.getOffset()+n.getPageNoteHeight(),s.combined=i-20+n.getOffset()+n.getPageNoteHeight()-t.window.height())}}),_.extend(e.Schema.helpers,{showAnnotations:function(){return this.viewer.options.showAnnotations===!1?!1:_.size(this.models.annotations.byId)>0},renderViewer:function(){var t=this.viewer.schema.document,n=this.constructPages(),r=t.description?t.description:null,i=t.resources.related_article,s=JST.header({options:this.viewer.options,id:t.id,story_url:i,title:t.title||""}),o=JST.footer({options:this.viewer.options}),u=t.resources.pdf;u=u&&this.viewer.options.pdf!==!1?'<a target="_blank" href="'+u+'">Original Document (PDF) &raquo;</a>':"";var a=t.contributor&&t.contributor_organization&&""+t.contributor+", "+t.contributor_organization,f=this.showAnnotations(),l=f&&t.resources.print_annotations,c={options:this.viewer.options,pages:n,header:s,footer:o,pdf_url:u,contributors:a,story_url:i,print_notes_url:l,descriptionContainer:JST.descriptionContainer({description:r}),autoZoom:this.viewer.options.zoom=="auto",mini:!1},h=this.viewer.options.width,p=this.viewer.options.height;h&&p&&(h<500&&(this.viewer.options.mini=!0,c.mini=!0),e.jQuery(this.viewer.options.container).css({position:"relative",width:this.viewer.options.width,height:this.viewer.options.height}));var d=this.viewer.options.container,v=e.jQuery(d);if(!v.length)throw"Document Viewer container element not found: "+d;v.html(JST.viewer(c))},displayNavigation:function(){var e=this.viewer.schema.document,t=!e.description&&!_.size(this.viewer.schema.data.annotationsById)&&!this.viewer.schema.data.sections.length;this.viewer.$(".DV-supplemental").toggleClass("DV-noNavigation",t)},renderSpecificPageCss:function(){var t=[];for(var n=1,r=this.models.document.totalPages;n<=r;n++)t.push(".DV-page-"+n+" .DV-pageSpecific-"+n);var i=t.join(", ")+" { display: block; }",s='<style type="text/css" media="all">\n'+i+"\n</style>";e.jQuery("head").append(s)},renderNavigation:function(){var t=this,n=[],r=[],i=[],s=[],o=JST.navigationExpander({}),u=[],a=[],f=[],l=this.viewer.models.boldsId||(this.viewer.models.boldsId=_.uniqueId()),c=function(e,t){var n=[];for(var r=e,i=t;r<i;r++)a[r]&&(n.push(a[r]),u[r]="");return n.join("")},h=function(e){var t="#DV-selectedChapter-"+e.id+" #DV-chapter-"+e.id;return r.push(t+" .DV-navChapterTitle"),JST.chapterNav(e)},p=function(e){var n=[],i=t.viewer.schema.data.annotationsByPage[e];for(var s=0;s<i.length;s++){var o=i[s];n.push(JST.annotationNav(o)),r.push("#DV-selectedAnnotation-"+o.id+" #DV-annotationMarker-"+o.id+" .DV-navAnnotationTitle")}return n.join("")};if(this.showAnnotations())for(var d=0,v=this.models.document.totalPages;d<v;d++)this.viewer.schema.data.annotationsByPage[d]&&(u[d]=p(d),a[d]=u[d]);var m=this.viewer.schema.data.sections;if(m.length)for(var d=0;d<m.length;d++){var g=m[d],y=m[d+1];g.id=g.id||_.uniqueId(),g.pageNumber=g.page,g.endPage=y?y.page-1:this.viewer.schema.data.totalPages;var b=c(g.pageNumber-1,g.endPage);b!=""?(g.navigationExpander=o,g.navigationExpanderClass="DV-hasChildren",g.noteViews=b,u[g.pageNumber-1]=h(g)):(g.navigationExpanderClass="DV-noChildren",g.noteViews="",g.navigationExpander="",u[g.pageNumber-1]=h(g))}var w=u.join(""),E=this.viewer.$("div.DV-chaptersContainer");E.html(w),E.unbind("click").bind("click",this.events.compile("handleNavigation")),this.viewer.schema.data.sections.length||_.size(this.viewer.schema.data.annotationsById)?E.show():E.hide(),this.displayNavigation(),e.jQuery("#DV-navigationBolds-"+l,e.jQuery("head")).remove();var S=r.join(", ")+" { font-weight:bold; color:#000 !important; }",x='<style id="DV-navigationBolds-'+l+'" type="text/css" media="screen,print">\n'+S+"\n</style>";e.jQuery("head").append(x),E=null},renderComponents:function(){var t=e.jQuery(this.viewer.options.container),n=t.css("position");n!="relative"&&n!="absolute"&&!this.viewer.options.fixedSize&&(e.jQuery("html, body").css({overflow:"hidden"}),t.offset().top==0&&this.viewer.elements.viewer.css({border:0}));var r=this.showAnnotations(),i=this.models.document.totalPages>1,s=this.viewer.options.search!==!1&&this.viewer.options.text!==!1&&(!this.viewer.options.width||this.viewer.options.width>=540),o=!r&&!i&&!s&&!this.viewer.options.sidebar,u=this.viewer.$(".DV-annotationView");u[r?"show":"hide"](),s?(this.elements.viewer.addClass("DV-searchable"),this.viewer.$("input.DV-searchInput",t).placeholder({message:"Search",clearClassName:"DV-searchInput-show-search-cancel"})):this.viewer.$(".DV-textView").hide(),i||this.viewer.$(".DV-thumbnailsView").hide(),!r&&!i&&!s&&this.viewer.$(".DV-views").hide(),this.viewer.api.roundTabCorners();var a=this.models.chapters.chapters.length>0;this.viewer.$(".DV-navControls").remove();if(i||this.viewer.options.sidebar){var f=JST.navControls({totalPages:this.viewer.schema.data.totalPages,totalAnnotations:this.viewer.schema.data.totalAnnotations});this.viewer.$(".DV-navControlsContainer").html(f)}this.viewer.$(".DV-fullscreenControl").remove();if(this.viewer.schema.document.canonicalURL){var l=JST.fullscreenControl({});o?(this.viewer.$(".DV-collapsibleControls").prepend(l),this.elements.viewer.addClass("DV-hideFooter")):this.viewer.$(".DV-fullscreenContainer").html(l)}this.viewer.options.sidebar&&this.viewer.$(".DV-sidebar").show(),_.defer(_.bind(function(){this.elements.viewer.width()<=700&&(r||i||s)&&this.viewer.$(".DV-controls").addClass("DV-narrowControls")},this)),this.elements.currentPage=this.viewer.$("span.DV-currentPage"),this.models.document.setPageIndex(this.models.document.currentIndex())},reset:function(){this.resetNavigationState(),this.cleanUpSearch(),this.viewer.pageSet.cleanUp(),this.removeObserver("drawPages"),this.viewer.dragReporter.unBind(),this.elements.window.scrollTop(0)}}),_.extend(e.Schema.helpers,{showAnnotationEdit:function(e){var t=this.viewer.$(e.target).closest(this.annotationClassName),n=this.viewer.$(".DV-annotationTextArea",t);t.addClass("DV-editing"),n.focus()},cancelAnnotationEdit:function(e){var t=this.viewer.$(e.target).closest(this.annotationClassName),n=this.getAnnotationModel(t);this.viewer.$(".DV-annotationTitleInput",t).val(n.title),this.viewer.$(".DV-annotationTextArea",t).val(n.text),n.unsaved?this.models.annotations.removeAnnotation(n):t.removeClass("DV-editing")},saveAnnotation:function(e,t){var n=this.viewer.$(e.target),r=n.closest(this.annotationClassName),i=this.getAnnotationModel(r);if(!i)return;i.title=this.viewer.$(".DV-annotationTitleInput",r).val(),i.text=this.viewer.$(".DV-annotationTextArea",r).val(),i.owns_note=i.unsaved?!0:i.owns_note,i.owns_note&&(i.author=i.author||dc.account.name,i.author_organization=i.author_organization||dc.account.isReal&&dc.account.organization.name),n.hasClass("DV-saveAnnotationDraft")?i.access="exclusive":r.hasClass("DV-accessExclusive")&&(i.access="public");if(t=="onlyIfText"&&(!i.title||i.title=="Untitled Note")&&!i.text&&!i.server_id)return this.models.annotations.removeAnnotation(i);r.removeClass("DV-editing"),this.models.annotations.fireSaveCallbacks(i),this.viewer.api.redraw(!0),this.viewer.activeAnnotation&&this.viewer.pageSet.showAnnotation(i)},deleteAnnotation:function(e){var t=this.viewer.$(e.target).closest(this.annotationClassName),n=this.getAnnotationModel(t);this.models.annotations.removeAnnotation(n),this.models.annotations.fireDeleteCallbacks(n)}}),_.extend(e.Schema.helpers,{resetNavigationState:function(){var e=this.elements;e.chaptersContainer.length&&(e.chaptersContainer[0].id=""),e.navigation.length&&(e.navigation[0].id="")},setActiveChapter:function(e){e&&this.elements.chaptersContainer.attr("id","DV-selectedChapter-"+e)},setActiveAnnotationInNav:function(e){e!=null?this.elements.navigation.attr("id","DV-selectedAnnotation-"+e):this.elements.navigation.attr("id","")}}),_.extend(e.Schema.helpers,{getSearchResponse:function(t){var n=e.jQuery.proxy(function(e){this.viewer.searchResponse=e;var t=e.results.length>0?!0:!1,n=t?"of "+e.results.length+" ":" ";this.viewer.$("span.DV-totalSearchResult").text(n),this.viewer.$("span.DV-searchQuery").text(e.query);if(t){var r=this.viewer.models.document.currentPage(),i=_.include(e.results,r)?r:e.results[0];this.events.loadText(i-1,this.highlightSearchResponses)}else this.highlightSearchResponses()},this),r=function(){this.viewer.$(".DV-currentSearchResult").text("Search is not available at this time"),this.viewer.$("span.DV-searchQuery").text(t),this.viewer.$(".DV-searchResults").addClass("DV-noResults")},i=this.viewer.schema.document.resources.search.replace("{query}",encodeURIComponent(t));this.viewer.helpers.isCrossDomain(i)&&(i+="&callback=?"),e.jQuery.ajax({url:i,dataType:"json",success:n,error:r})},acceptInputCallBack:function(){var e=parseInt(this.elements.currentPage.text(),10)-1;e=e===""?0:e,e=e<0?0:e,e=e+1>this.models.document.totalPages?this.models.document.totalPages-1:e;var t=e+1;this.elements.currentPage.text(t),this.viewer.$(".DV-pageNumberContainer input").val(t),this.viewer.state==="ViewDocument"||this.viewer.state==="ViewThumbnails"?this.jump(e):this.viewer.state==="ViewText"&&this.events.loadText(e)},highlightSearchResponses:function(){var e=this.viewer,t=e.searchResponse;if(!t)return!1;var n=t.results,r=this.viewer.$(".DV-currentSearchResult");n.length==0?(r.text("No Results"),this.viewer.$(".DV-searchResults").addClass("DV-noResults")):this.viewer.$(".DV-searchResults").removeClass("DV-noResults");for(var i=0;i<t.results.length;i++)if(this.models.document.currentPage()===t.results[i]){r.text("Page "+(i+1)+" ");break}var s="(\\b|\\B)",o=s+"("+t.query.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&").replace(/\s+/g,"\\s+")+")"+s,u=this.viewer.$(".DV-textContents"),a=u.text(),f=new RegExp(o,"ig"),l=a.replace(f,'$1<span class="DV-searchMatch">$2</span>$3');u.html(l);var c=e.toHighLight?e.toHighLight:0;this.highlightMatch(c),r=null,u=null},highlightEntity:function(e,t){this.viewer.$(".DV-searchResults").addClass("DV-noResults");var n=this.viewer.$(".DV-textContents"),r=n.text(),i=r.substr(0,e),s=r.substr(e,t),o=r.substr(e+t);r=[i,'<span class="DV-searchMatch">',s,"</span>",o].join(""),n.html(r),this.highlightMatch(0)},highlightMatch:function(e){var t=this.viewer.$(".DV-textContents span.DV-searchMatch");if(t.length==0)return!1;var n=this.getCurrentSearchPageIndex(),r=this.viewer.toHighLight;r&&(r!==!1&&(r==="last"?e=t.length-1:r==="first"?e=0:e=r),r=!1);var i=this.viewer.searchResponse;if(i){if(e===t.length){if(i.results.length===n+1)return;r="first",this.events.loadText(i.results[n+1]-1,this.highlightSearchResponses);return}if(e===-1){if(n-1<0)return!1;r="last",this.events.loadText(i.results[n-1]-1,this.highlightSearchResponses);return}t.removeClass("DV-highlightedMatch")}var s=this.viewer.$(".DV-textContents span.DV-searchMatch:eq("+e+")");s.addClass("DV-highlightedMatch"),this.elements.window[0].scrollTop=s.position().top-50,i&&(i.highlighted=e),t=null,s=null},getCurrentSearchPageIndex:function(){var e=this.viewer.searchResponse;if(!e)return!1;var t=this.models.document;for(var n=0,r=e.results.length;n<r;n++)if(e.results[n]===t.currentPage())return n},highlightPreviousMatch:function(e){e.preventDefault(),this.highlightMatch(this.viewer.searchResponse.highlighted-1)},highlightNextMatch:function(e){e.preventDefault(e),this.highlightMatch(this.viewer.searchResponse.highlighted+1)},clearSearch:function(e){this.elements.searchInput.val("").keyup().focus()},showEntity:function(e,t,n){this.viewer.$("span.DV-totalSearchResult").text(""),this.viewer.$("span.DV-searchQuery").text(e),this.viewer.$("span.DV-currentSearchResult").text("Searching"),this.events.loadText(this.models.document.currentIndex(),_.bind(this.viewer.helpers.highlightEntity,this.viewer.helpers,t,n))},cleanUpSearch:function(){var e=this.viewer;e.searchResponse=null,e.toHighLight=null,this.elements&&this.elements.searchInput.keyup().blur()}}),e.Schema.states={InitialLoad:function(){if(this.helpers.unsupportedBrowser())return;this.helpers.renderViewer(),this.events.elements=this.helpers.elements=this.elements=new e.Elements(this),this.helpers.renderComponents(),this.helpers.renderNavigation(),this.helpers.renderSpecificPageCss(),this.pageSet=new e.PageSet(this),this.pageSet.buildPages(),this.helpers.bindEvents(this),this.helpers.positionViewer(),this.models.document.computeOffsets(),this.helpers.addObserver("drawPages"),this.helpers.registerHashChangeEvents(),this.dragReporter=new e.DragReporter(this,".DV-pageCollection",e.jQuery.proxy(this.helpers.shift,this),{ignoreSelector:".DV-annotationContent"}),this.helpers.startCheckTimer(),this.helpers.handleInitialState(),_.defer(_.bind(this.helpers.autoZoomPage,this.helpers))},ViewAnnotation:function(){return this.helpers.reset(),this.helpers.ensureAnnotationImages(),this.activeAnnotationId=null,this.acceptInput.deny(),e.jQuery.browser.msie&&(this.elements.annotations.css({zoom:0}),this.elements.annotations.css({zoom:1})),this.helpers.toggleContent("viewAnnotations"),this.compiled.next(),!0},ViewDocument:function(){return this.helpers.reset(),this.helpers.addObserver("drawPages"),this.dragReporter.setBinding(),this.elements.window.mouseleave(e.jQuery.proxy(this.dragReporter.stop,this.dragReporter)),this.acceptInput.allow(),this.helpers.toggleContent("viewDocument"),this.helpers.setActiveChapter(this.models.chapters.getChapterId(this.models.document.currentIndex())),this.helpers.jump(this.models.document.currentIndex()),!0},ViewEntity:function(e,t,n){this.helpers.reset(),this.helpers.toggleContent("viewSearch"),this.helpers.showEntity(e,t,n)},ViewSearch:function(){this.helpers.reset();if(this.elements.searchInput.val()=="")this.elements.searchInput.val(e);else var e=this.elements.searchInput.val();return this.helpers.getSearchResponse(e),this.acceptInput.deny(),this.helpers.toggleContent("viewSearch"),!0},ViewText:function(){return this.helpers.reset(),this.acceptInput.allow(),this.pageSet.zoomText(),this.helpers.toggleContent("viewText"),this.events.loadText(),!0},ViewThumbnails:function(){return this.helpers.reset(),this.helpers.toggleContent("viewThumbnails"),this.thumbnails=new e.Thumbnails(this),this.thumbnails.render(),!0}},e.Api=function(e){this.viewer=e},e.Api.prototype={currentPage:function(){return this.viewer.models.document.currentPage()},setCurrentPage:function(e){this.viewer.helpers.jump(e-1)},onPageChange:function(e){this.viewer.models.document.onPageChangeCallbacks.push(e)},getPageNumberForId:function(e){var t=this.viewer.pageSet.pages[e];return t.index+1},getSchema:function(){return this.viewer.schema.document},getId:function(){return this.viewer.schema.document.id},getModelId:function(){return parseInt(this.getId(),10)},currentZoom:function(){var e=this.viewer.models.document;return e.zoomLevel/e.ZOOM_RANGES[1]},relativeZoom:function(){var e=this.viewer.models,t=this.currentZoom();return t*(e.document.ZOOM_RANGES[1]/e.pages.BASE_WIDTH)},numberOfPages:function(){return this.viewer.models.document.totalPages},getContributor:function(){return this.viewer.schema.document.contributor},getContributorOrganization:function(){return this.viewer.schema.document.contributor_organization},setSections:function(e){e=_.sortBy(e,function(e){return e.page}),this.viewer.schema.data.sections=e,this.viewer.models.chapters.loadChapters(),this.redraw()},getSections:function(){return _.clone(this.viewer.schema.data.sections||[])},getDescription:function(){return this.viewer.schema.document.description},setDescription:function(e){this.viewer.schema.document.description=e,this.viewer.$(".DV-description").remove(),this.viewer.$(".DV-navigation").prepend(JST.descriptionContainer({description:e})),this.viewer.helpers.displayNavigation()},getRelatedArticle:function(){return this.viewer.schema.document.resources.related_article},setRelatedArticle:function(e){this.viewer.schema.document.resources.related_article=e,this.viewer.$(".DV-storyLink a").attr({href:e}),this.viewer.$(".DV-storyLink").toggle(!!e)},getPublishedUrl:function(){return this.viewer.schema.document.resources.published_url},setPublishedUrl:function(e){this.viewer.schema.document.resources.published_url=e},getTitle:function(){return this.viewer.schema.document.title},setTitle:function(e){this.viewer.schema.document.title=e,document.title=e},getSource:function(){return this.viewer.schema.document.source},setSource:function(e){this.viewer.schema.document.source=e},getPageText:function(e){return this.viewer.schema.text[e-1]},setPageText:function(e,t){this.viewer.schema.text[t-1]=e},resetPageText:function(e){var t=this,n=this.viewer.schema.text;e?this.viewer.models.document.originalPageText={}:_.each(this.viewer.models.document.originalPageText,function(e,r){r=parseInt(r,10),e!=n[r-1]&&(t.setPageText(e,r),r==t.currentPage()&&t.viewer.events.loadText())}),this.viewer.openEditor=="editText"&&this.viewer.$(".DV-textContents").attr("contentEditable",!0).addClass("DV-editing")},redraw:function(e){e&&(this.viewer.models.annotations.renderAnnotations(),this.viewer.models.document.computeOffsets()),this.viewer.helpers.renderNavigation(),this.viewer.helpers.renderComponents(),e&&(this.viewer.elements.window.removeClass("DV-coverVisible"),this.viewer.pageSet.buildPages({noNotes:!0}),this.viewer.pageSet.reflowPages())},getAnnotationsBySortOrder:function(){return this.viewer.models.annotations.sortAnnotations()},getAnnotationsByPageIndex:function(e){return this.viewer.models.annotations.getAnnotations(e)},getAnnotation:function(e){return this.viewer.models.annotations.getAnnotation(e)},addAnnotation:function(e){return e=this.viewer.schema.loadAnnotation(e),this.viewer.models.annotations.sortAnnotations(),this.redraw(!0),this.viewer.pageSet.showAnnotation(e,{active:!0,edit:!0}),e},onAnnotationSave:function(e){this.viewer.models.annotations.saveCallbacks.push(e)},onAnnotationDelete:function(e){this.viewer.models.annotations.deleteCallbacks.push(e)},setConfirmStateChange:function(e){this.viewer.confirmStateChange=e},onChangeState:function(e){this.viewer.onStateChangeCallbacks.push(e)},getState:function(){return this.viewer.state},setState:function(e){this.viewer.open(e)},resetRemovedPages:function(){this.viewer.models.document.resetRemovedPages()},addPageToRemovedPages:function(e){this.viewer.models.document.addPageToRemovedPages(e)},removePageFromRemovedPages:function(e){this.viewer.models.document.removePageFromRemovedPages(e)},resetReorderedPages:function(){this.viewer.models.document.redrawReorderedPages()},reorderPages:function(e,t){var n=this.getModelId();this.viewer.models.document.reorderPages(n,e,t)},loadJS:function(t,n){e.jQuery.getScript(t,n)},roundTabCorners:function(){var e=this.viewer.$(".DV-views > div:visible");e.first().addClass("DV-first"),e.last().addClass("DV-last")},registerHashListener:function(e,t){this.viewer.history.register(e,t)},clearHashListeners:function(){this.viewer.history.defaultCallback=null,this.viewer.history.handlers=[]},unload:function(t){this.viewer.helpers.unbindEvents(),e.jQuery(".DV-docViewer",this.viewer.options.container).remove(),this.viewer.helpers.stopCheckTimer(),delete e.viewers[this.viewer.schema.document.id]},enterRemovePagesMode:function(){this.viewer.openEditor="removePages"},leaveRemovePagesMode:function(){this.viewer.openEditor=null},enterAddPagesMode:function(){this.viewer.openEditor="addPages"},leaveAddPagesMode:function(){this.viewer.openEditor=null},enterReplacePagesMode:function(){this.viewer.openEditor="replacePages"},leaveReplacePagesMode:function(){this.viewer.openEditor=null},enterReorderPagesMode:function(){this.viewer.openEditor="reorderPages",this.viewer.elements.viewer.addClass("DV-reorderPages")},leaveReorderPagesMode:function(){this.resetReorderedPages(),this.viewer.openEditor=null,this.viewer.elements.viewer.removeClass("DV-reorderPages")},enterEditPageTextMode:function(){this.viewer.openEditor="editText",this.viewer.events.loadText()},leaveEditPageTextMode:function(){this.viewer.openEditor=null,this.resetPageText()}},e.DocumentViewer=function(t){this.options=t,this.window=window,this.$=this.jQuery,this.schema=new e.Schema,this.api=new e.Api(this),this.history=new e.History(this),this.models=this.schema.models,this.events=_.extend({},e.Schema.events),this.helpers=_.extend({},e.Schema.helpers),this.states=_.extend({},e.Schema.states),this.isFocus=!0,this.openEditor=null,this.confirmStateChange=null,this.activeElement=null,this.observers=[],this.windowDimensions={},this.scrollPosition=null,this.checkTimer={},this.busy=!1,this.annotationToLoadId=null,this.dragReporter=null,this.compiled={},this.tracker={},this.onStateChangeCallbacks=[],this.events=_.extend(this.events,{viewer:this,states:this.states,elements:this.elements,helpers:this.helpers,models:this.models,compile:function(){var e=this.viewer,t=arguments[0];return function(){e.events[e.state][t]?e.events[e.state][t].apply(e.events,arguments):e.events[t].apply(e.events,arguments)}}}),this.helpers=_.extend(this.helpers,{viewer:this,states:this.states,elements:this.elements,events:this.events,models:this.models}),this.states=_.extend(this.states,{viewer:this,helpers:this.helpers,elements:this.elements,events:this.events,models:this.models})},e.DocumentViewer.prototype.loadModels=function(){this.models.chapters=new e.model.Chapters(this),this.models.document=new e.model.Document(this),this.models.pages=new e.model.Pages(this),this.models.annotations=new e.model.Annotations(this),this.models.removedPages={}},e.DocumentViewer.prototype.open=function(e){if(this.state==e)return;var t=_.bind(function(){return this.state=e,this.states[e].apply(this,arguments),this.slapIE(),this.notifyChangedState(),!0},this);this.confirmStateChange?this.confirmStateChange(t):t()},e.DocumentViewer.prototype.slapIE=function(){e.jQuery(this.options.container).css({zoom:.99}).css({zoom:1})},e.DocumentViewer.prototype.notifyChangedState=function(){_.each(this.onStateChangeCallbacks,function(e){e()})},e.DocumentViewer.prototype.recordHit=function(t){var n=window.location,r=n.protocol+"//"+n.host+n.pathname;if(r.match(/^file:/))return!1;r=r.replace(/[\/]+$/,"");var i=parseInt(this.api.getId(),10),s=encodeURIComponent("document:"+i+":"+r);e.jQuery(document.body).append('<img alt="" width="1" height="1" src="'+t+"?key="+s+'" />')},e.DocumentViewer.prototype.jQuery=function(t,n){return n=n||this.options.container,e.jQuery.call(e.jQuery,t,n)},e.load=function(t,n){n=n||{};var r=t.id||t.match(/([^\/]+)(\.js|\.json)$/)[1];"showSidebar"in n&&(n.sidebar=n.showSidebar);var i={container:document.body,zoom:"auto",sidebar:!0};n=_.extend({},i,n),n.fixedSize=!!n.width||!!n.height;var s=new e.DocumentViewer(n);e.viewers[r]=s;var o=e.loadJSON=function(t){var r=e.viewers[t.id];r.schema.importCanonicalDocument(t),r.loadModels(),e.jQuery(function(){r.open("InitialLoad"),n.afterLoad&&n.afterLoad(r),e.afterLoad&&e.afterLoad(r),e.recordHit&&r.recordHit(e.recordHit)})},u=function(){if(_.isString(t))if(t.match(/\.js$/))e.jQuery.getScript(t);else{var n=s.helpers.isCrossDomain(t);n&&(t+="?callback=?"),e.jQuery.getJSON(t,o)}else o(t)};return n.templates?e.jQuery.getScript(n.templates,u):u(),s},e.onload&&_.defer(e.onload),function(){window.JST=window.JST||{},window.JST.annotation=_.template('<div class="DV-annotation <%= orderClass %> <%= accessClass %> <% if (owns_note) { %>DV-ownsAnnotation<% } %>" style="top:<%= top %>px;" id="DV-annotation-<%= id %>" data-id="<%= id %>">\n\n  <div class="DV-annotationTab" style="top:<%= tabTop %>px;">\n    <div class="DV-annotationClose DV-trigger">\n      <% if (access == \'exclusive\') { %>\n        <div class="DV-annotationDraftDot DV-editHidden"></div>\n      <% } %>\n    </div>\n  </div>\n\n  <div class="DV-annotationRegion" style="margin-left:<%= excerptMarginLeft - 4 %>px; height:<%= excerptHeight %>px; width:<%= excerptWidth - 1 %>px;">\n    <div class="<%= accessClass %>">\n      <div class="DV-annotationEdge DV-annotationEdgeTop"></div>\n      <div class="DV-annotationEdge DV-annotationEdgeRight"></div>\n      <div class="DV-annotationEdge DV-annotationEdgeBottom"></div>\n      <div class="DV-annotationEdge DV-annotationEdgeLeft"></div>\n      <div class="DV-annotationCorner DV-annotationCornerTopLeft"></div>\n      <div class="DV-annotationCorner DV-annotationCornerTopRight"></div>\n      <div class="DV-annotationCorner DV-annotationCornerBottomLeft"></div>\n      <div class="DV-annotationCorner DV-annotationCornerBottomRight"></div>\n    </div>\n    <div class="DV-annotationRegionExclusive"></div>\n  </div>\n\n\n  <div class="DV-annotationContent">\n\n    <div class="DV-annotationHeader DV-clearfix">\n      <div class="DV-pagination DV-editHidden">\n        <span class="DV-trigger DV-annotationPrevious" title="Previous Annotation">Previous</span>\n        <span class="DV-trigger DV-annotationNext" title="Next Annotation">Next</span>\n      </div>\n      <div class="DV-annotationGoto DV-editHidden"><div class="DV-trigger">p. <%= pageNumber %></div></div>\n      <div class="DV-annotationTitle DV-editHidden"><%= title %></div>\n      <input class="DV-annotationTitleInput DV-editVisible" type="text" placeholder="Annotation Title" value="<%= title.replace(/"/g, \'&quot;\') %>" />\n      <% if (access == \'exclusive\') { %>\n        <div class="DV-annotationDraftLabel DV-editHidden DV-interface">Draft</div>\n      <% } else if (access == \'private\') { %>\n        <div class="DV-privateLock DV-editHidden" title="Private note"></div>\n      <% } %>\n      <span class="DV-permalink DV-editHidden" title="Link to this note"></span>\n      <div class="DV-showEdit DV-editHidden <%= accessClass %>"></div>\n    </div>\n\n\n    <div class="DV-annotationExcerpt" style="height:<%= excerptHeight %>px;">\n      <div class="DV-annotationExcerptImageTop" style="height:<%= excerptHeight %>px; width:<%= excerptWidth %>px;left:<%= excerptMarginLeft - 1 %>px;">\n\n        <img class="DV-img" src="<%= image %>" style="left:<%= -(excerptMarginLeft + 1) %>px; top:-<%= imageTop %>px;" width="<%= imageWidth %>" />\n\n      </div>\n      <div class="DV-annotationExcerptImage" style="height:<%= excerptHeight %>px;">\n        <img class="DV-img" src="<%= image %>" style="top:-<%= imageTop %>px;" width="<%= imageWidth %>" />\n      </div>\n    </div>\n\n    <div class="DV-annotationBody DV-editHidden">\n      <%= text %>\n    </div>\n    <textarea class="DV-annotationTextArea DV-editVisible" style="width: <%= bWidth %>px;"><%= text %></textarea>\n\n    <div class="DV-annotationMeta <%= accessClass %>">\n      <% if (author) { %>\n        <div class="DV-annotationAuthor DV-interface DV-editHidden">\n          Annotated by: <%= author %><% if (author_organization) { %>, <i><%= author_organization %></i><% } %>\n        </div>\n      <% } %>\n      <% if (access == \'exclusive\') { %>\n        <div class="DV-annotationWarning DV-interface DV-editHidden">\n          This draft is only visible to you and collaborators.\n        </div>\n      <% } else if (access == \'private\') { %>\n        <div class="DV-annotationWarning DV-interface DV-editHidden">\n          This private note is only visible to you.\n        </div>\n      <% } %>\n      <div class="DV-annotationEditControls DV-editVisible">\n        <div class="DV-clearfix">\n          <div class="minibutton warn DV-deleteAnnotation float_left">Delete</div>\n          <div class="minibutton default DV-saveAnnotation float_right">\n            <% if (access == \'exclusive\') { %>\n              Publish\n            <% } else { %>\n              Save\n            <% } %>\n          </div>\n          <% if (access == \'public\' || access == \'exclusive\') { %>\n            <div class="minibutton DV-saveAnnotationDraft float_right">Save as Draft</div>\n          <% } %>\n          <div class="minibutton DV-cancelEdit float_right">Cancel</div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'),window.JST.annotationNav=_.template('<div class="DV-annotationMarker" id="DV-annotationMarker-<%= id %>">\n  <span class="DV-trigger">\n    <span class="DV-navAnnotationTitle"><%= title %></span>&nbsp;<span class="DV-navPageNumber">p.<%= page %></span>\n  </span>\n</div>'),window.JST.chapterNav=_.template('<div id="DV-chapter-<%= id %>" class="DV-chapter <%= navigationExpanderClass %>">\n  <div class="DV-first">\n    <%= navigationExpander %>\n    <span class="DV-trigger">\n      <span class="DV-navChapterTitle"><%= title %></span>&nbsp;<span class="DV-navPageNumber">p.&nbsp;<%= pageNumber %></span>\n    </span>\n  </div>\n  <%= noteViews %>\n</div>'),window.JST.descriptionContainer=_.template('<% if (description) { %>\n  <div class="DV-description">\n    <div class="DV-descriptionHead">\n      <span class="DV-descriptionToggle DV-showDescription DV-trigger"> Toggle Description</span>\n      Description\n    </div>\n    <div class="DV-descriptionText"><%= description %></div>\n  </div>\n<% } %>\n'),window.JST.footer=_.template('<% if (!options.sidebar) { %>\n  <div class="DV-footer">\n    <div class="DV-fullscreenContainer"></div>\n    <div class="DV-navControlsContainer"></div>\n  </div>\n<% } %>'),window.JST.fullscreenControl=_.template('<div class="DV-fullscreen" title="View Document in Fullscreen"></div>\n'),window.JST.header=_.template('<div class="DV-header">\n  <div class="DV-headerHat" class="DV-clearfix">\n    <div class="DV-branding">\n      <% if (story_url) { %>\n        <span class="DV-storyLink"><%= story_url %></span>\n      <% } %>\n    </div>\n    <div class="DV-title">\n      <%= title %>\n    </div>\n  </div>\n\n  <div class="DV-controls">\n    \n    <div class="DV-views">\n      <div class="DV-documentView"><span class="DV-trigger DV-selected">Document</span></div>\n      <div class="DV-thumbnailsView"><span class="DV-trigger">Pages</span></div>\n      <div style="display:none;" class="DV-annotationView"><span class="DV-trigger">Notes</span></div>\n      <div class="DV-textView"><span class="DV-trigger">Text</span></div>\n    </div>\n\n    <div class="DV-collapsibleControls">\n\n      <div class="DV-searchBox DV-clearfix">\n        <form action="#" method="get" class="DV-searchDocument">\n          <div class="DV-searchInputWrap">\n            <div class="DV-searchInput-cancel"></div>\n            <input class="DV-searchInput" type="text" autosave="DV-<%= id %>" results="10" placeholder="Search" />\n          </div>\n        </form>\n      </div>\n      \n      <div class="DV-zoomControls">\n        <span class="DV-zoomLabel">Zoom</span>\n        <div class="DV-zoomBox"></div>\n      </div>\n      \n    </div>\n    \n  </div>\n\n</div>'),window.JST.navControls=_.template('<div class="DV-navControls DV-clearfix">\n  <span class="DV-trigger DV-previous">&laquo;</span>\n  <div class="DV-clearfix DV-pageNumberContainer">\n    <span class="DV-currentPagePrefix">Page</span>\n    <span class="DV-currentAnnotationPrefix">Note&nbsp;</span>\n    <span class="DV-currentPage">1</span>\n    <span class="DV-currentPageSuffix">of&nbsp;\n      <span class="DV-totalPages"><%= totalPages %></span>\n      <span class="DV-totalAnnotations"><%= totalAnnotations %></span>                        \n    </span>\n  </div>\n  <span class="DV-trigger DV-next">&raquo;</span>\n</div>'),window.JST.navigationExpander=_.template('<span class="DV-trigger DV-expander">Expand</span>'),window.JST.pageAnnotation=_.template('<div class="DV-annotation DV-pageNote <%= orderClass %> <%= accessClass %> <% if (owns_note) { %>DV-ownsAnnotation<% } %>" style="top:<%= top %>px;" id="DV-annotation-<%= id %>" data-id="<%= id %>">\n  <div class="DV-annotationTab">\n    <div class="DV-annotationClose DV-trigger">p. <%= pageNumber %></div>\n  </div>\n\n  <div class="DV-annotationContent">\n    <!-- Header -->\n    <div class="DV-annotationHeader DV-clearfix">\n      <div class="DV-pagination DV-editHidden">\n        <span class="DV-trigger DV-annotationPrevious" title="Previous Annotation">Previous</span>\n        <span class="DV-trigger DV-annotationNext" title="Next Annotation">Next</span>\n      </div>\n      <div class="DV-annotationGoto DV-editHidden"><div class="DV-trigger">p. <%= pageNumber %></div></div>\n      <div class="DV-annotationTitle DV-editHidden"><%= title %></div>\n      <input class="DV-annotationTitleInput DV-editVisible" type="text" placeholder="Annotation Title" value="<%= title.replace(/"/g, \'&quot;\') %>" />\n      <% if (access == \'exclusive\') { %>\n        <div class="DV-annotationDraftLabel DV-editHidden DV-interface">Draft</div>\n      <% } else if (access == \'private\') { %>\n        <div class="DV-privateLock DV-editHidden" title="Private note"></div>\n      <% } %>\n      <span class="DV-permalink DV-editHidden" title="Link to this note"></span>\n      <div class="DV-showEdit DV-editHidden <%= accessClass %>"></div>\n    </div>\n\n    <div class="DV-annotationBody DV-editHidden">\n      <%= text %>\n    </div>\n    <textarea class="DV-annotationTextArea DV-editVisible" style="width: <%= bWidth %>px;"><%= text %></textarea>\n\n    <div class="DV-annotationMeta <%= accessClass %>">\n      <% if (author) { %>\n        <div class="DV-annotationAuthor DV-interface DV-editHidden">\n          Annotated by: <%= author %><% if (author_organization) { %>, <i><%= author_organization %></i><% } %>\n        </div>\n      <% } %>\n      <% if (access == \'exclusive\') { %>\n        <div class="DV-annotationWarning DV-interface DV-editHidden">\n          This draft is only visible to you and collaborators.\n        </div>\n      <% } else if (access == \'private\') { %>\n        <div class="DV-annotationWarning DV-interface DV-editHidden">\n          This private note is only visible to you.\n        </div>\n      <% } %>\n      <div class="DV-annotationEditControls DV-editVisible">\n        <div class="DV-clearfix">\n          <div class="minibutton warn DV-deleteAnnotation float_left">Delete</div>\n          <div class="minibutton default DV-saveAnnotation float_right">\n            <% if (access == \'exclusive\') { %>\n              Publish\n            <% } else { %>\n              Save\n            <% } %>\n          </div>\n          <% if (access == \'public\' || access == \'exclusive\') { %>\n            <div class="minibutton DV-saveAnnotationDraft float_right">Save as Draft</div>\n          <% } %>\n          <div class="minibutton DV-cancelEdit float_right">Cancel</div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'),window.JST.pages=_.template('<div class="DV-set p<%= pageIndex %>" data-id="p<%= pageIndex %>" style="top:0;left:0px;height:893px;width:700px;">\n  <div class="DV-overlay"></div>\n  <div class="DV-pageNoteInsert" title="Click to Add a Page Note">\n    <div class="DV-annotationTab">\n      <div class="DV-annotationClose"></div>\n    </div>\n    <div class="DV-annotationDivider"></div>\n  </div>\n  <div class="DV-pageMeta"><span class="DV-pageNumber">p. <%= pageNumber %></span></div>\n  <div class="DV-annotations"></div>\n  <div class="DV-page" style="height:863px;width:700px;">\n    <span class="DV-loading-top">Loading</span>\n    <span class="DV-loading-bottom">Loading</span>\n    <div class="DV-cover"></div>\n    <img class="DV-pageImage" <%= pageImageSource ? \'src="\' + pageImageSource + \'"\' : \'\' %> height="863" />\n  </div>\n</div>'),window.JST.thumbnails=_.template('<% for (; page <= endPage; page++) { %>\n  <% var url = imageUrl.replace(/{page}/, page) ; %>\n  <div class="DV-thumbnail" id="DV-thumbnail-<%= page %>" data-pageNumber="<%= page %>">\n    <div class="DV-overlay">\n      <div class=\'DV-caret\'></div>\n    </div>\n    <div class="DV-thumbnail-page">\n      <div class="DV-thumbnail-select">\n        <div class="DV-thumbnail-shadow"></div>\n        <img class="DV-thumbnail-image" data-src="<%= url %>" />\n      </div>\n      <div class="DV-pageNumber DV-pageMeta"><span class="DV-pageNumberText"><span class="DV-pageNumberTextUnderline">p. <%= page %></span></span></div>\n    </div>\n  </div>\n<% } %>\n'),window.JST.unsupported=_.template('<div class="DV-unsupported">\n  <div class="DV-intro">\n    <% if (viewer.schema.document.resources && viewer.schema.document.resources.pdf) { %>\n      <a href="<%= viewer.schema.document.resources.pdf %>">Download this document as a PDF</a>\n    <% } %>\n    <br />\n    <br />\n    To use the Document Viewer you need to<br /> upgrade your browser:\n  </div>\n  <div class="DV-browsers">\n    <div class="DV-browser">\n      <a href="http://www.google.com/chrome">\n        <div class="DV-image DV-chrome"> </div>Chrome\n      </a>\n    </div>\n    <div class="DV-browser">\n      <a href="http://www.apple.com/safari/download/">\n        <div class="DV-image DV-safari"> </div>Safari\n      </a>\n    </div>\n    <div class="DV-browser">\n      <a href="http://www.mozilla.com/en-US/firefox/firefox.html">\n        <div class="DV-image DV-firefox"> </div>Firefox\n      </a>\n    </div>\n    <br style="clear:both;" />\n  </div>\n  <div class="DV-after">\n    Or, if you\'d like to continue using Internet Explorer 6,<br /> you can\n    <a href="http://www.google.com/chromeframe">install Google Chrome Frame</a>.\n  </div>\n</div>\n'),window.JST.viewer=_.template('<!--[if lte IE 8]><div class="DV-docViewer DV-clearfix DV-viewDocument DV-ie <% if (autoZoom) { %>DV-autoZoom<% } %> <% if (mini) { %>DV-mini<% } %> <% if (!options.sidebar) { %>DV-hideSidebar<% } else { %>DV-hideFooter<% } %>"><![endif]-->\n<!--[if (!IE)|(gte IE 9)]><!--><div class="DV-docViewer DV-clearfix DV-viewDocument <% if (autoZoom) { %>DV-autoZoom<% } %> <% if (mini) { %>DV-mini<% } %> <% if (!options.sidebar) { %>DV-hideSidebar<% } else { %>DV-hideFooter<% } %>"><!-- <![endif]-->\n  \n  <div class="DV-docViewerWrapper">\n  \n    <%= header %>\n    <div class="DV-docViewer-Container">\n    \n      <div class="DV-searchBarWrapper">\n        <div class="DV-searchBar">\n          <span class="DV-trigger DV-closeSearch">CLOSE</span>\n          <div class="DV-searchPagination DV-foundResult">\n            <div class="DV-searchResults">\n              <span class="DV-resultPrevious DV-trigger">Previous</span>\n              <span class="DV-currentSearchResult"></span>\n              <span class="DV-totalSearchResult"></span>\n              <span> for &ldquo;<span class="DV-searchQuery"></span>&rdquo;</span>\n              <span class="DV-resultNext DV-trigger">Next</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    \n      <div class="DV-pages <% if (!options.sidebar) { %>DV-hide-sidebar<% } %>">\n        <div class="DV-paper">\n          <div class="DV-thumbnails"></div>\n          <div class="DV-pageCollection">\n            <div class="DV-bar" style=""></div>\n            <div class="DV-allAnnotations">\n            </div>\n            <div class="DV-text">\n              <div class="DV-textSearch DV-clearfix">\n          \n              </div>\n              <div class="DV-textPage">\n                <span class="DV-textCurrentPage"></span>\n                <pre class="DV-textContents"></pre>\n              </div>\n            </div>\n            <%= pages %>\n          </div>\n        </div>\n      </div>\n    \n      <div width="265px" class="DV-sidebar <% if (!options.sidebar) { %>DV-hide<% } %>" style="display:none;">\n        <div class="DV-well">\n    \n          <div class="DV-sidebarSpacer"></div>\n          \n          <% if (options.sidebar) { %>\n            <div class="DV-navControlsContainer">\n            </div>\n          <% } %>\n              \n          <div class="DV-navigation">\n            <%= descriptionContainer %>\n            <div class="DV-contentsHeader">Contents</div>\n            <div class="DV-chaptersContainer">\n            </div>\n            <div class="DV-supplemental">\n              <% if (pdf_url) { %>\n                <div class="DV-pdfLink"><%= pdf_url %></div>\n              <% } %>\n              <% if (print_notes_url) { %>\n                <div class="DV-printNotesLink">\n                  <a target="_blank" href="<%= print_notes_url %>">Print Notes &raquo;</a>\n                </div>\n              <% } %>\n              <div class="DV-storyLink" style="<%= story_url ? \'\' : \'display:none\' %>">\n                <a target="_blank" href="<%= story_url %>">Related Article &raquo;</a>\n              </div>\n              <% if (contributors) { %>\n                <div class="DV-contributor">Contributed by: <%= contributors %></div>\n              <% } %>\n            </div>\n            <div class="DV-logo"><a class="DV-logoLink" href="http://www.documentcloud.org"></a></div>\n          </div>\n        </div>\n      </div>\n    </div>\n    \n    <%= footer %>\n    \n  </div>\n  \n  <div class="DV-printMessage">\n    To print the document, click the "Original Document" link to open the original \n    PDF. At this time it is not possible to print the document with annotations.\n  </div>\n\n</div>\n')}(),e});