define(["require","jquery","oae.core"],function(e,t,n){return function(r,i,s){var o=t("#"+r),u=!1,a=function(){s.previews&&s.previews.status==="pending"?(n.api.util.template().render(t("#filepreview-default-pending-template",o),{content:s},t("#filepreview-container",o)),u=setInterval(f,6e4)):n.api.util.template().render(t("#filepreview-default-template",o),{content:s},t("#filepreview-container",o))},f=function(){n.api.content.getContent(s.id,function(e,n){e?clearInterval(u):n.previews&&n.previews.status!=="pending"&&(clearInterval(u),t(document).trigger("oae.content.update",n))})},l=function(){n.api.util.template().render(t("#filepreview-image-template",o),{content:s},t("#filepreview-container",o))},c=function(){e(["../lib/document-viewer/assets/viewer.ea0d144e.js"],function(e){n.api.util.template().render(t("#filepreview-document-template",o),null,t("#filepreview-container",o));var i={id:s.id,title:s.displayName,pages:s.previews.pageCount,resources:{pdf:"/api/content/"+s.id+"/download",page:{image:"/api/content/"+s.id+"/revisions/"+s.latestRevisionId+"/previews/page.{page}.{size}.png?signature="+s.signature.signature+"&expires="+s.signature.expires+"&lastmodified="+s.signature.lastModified}}};e.load(i,{container:"#"+r+" #filepreview-document",width:"100%",height:700,sidebar:!1,text:!1})})},h=function(){e(["flowplayer"],function(){n.api.util.template().render(t("#filepreview-video-template",o),{content:s},t("#filepreview-container",o)),t("#filepreview-video",o).flowplayer()})},p=function(){s.mime.substring(0,6)==="image/"?l():s.previews&&s.previews.pageCount?c():s.mime.substring(0,6)==="video/"?h():a()};p()}});