define(["jquery","oae.core"],function(e,t){return function(n){var r=e("#"+n),i=null,s=function(){t.api.util.template().render(e("#editgroup-joinable-template",r),{joinable:i.joinable},e("#editgroup-joinable-container",r)),r.on("change",'.oae-large-options-container input[type="radio"]',function(){e(".oae-large-options",r).removeClass("checked"),e(".oae-large-options i",r).removeClass("selected"),e(this).parents(".oae-large-options").addClass("checked"),e(this).parents(".oae-large-options").find("i").addClass("selected")})},o=function(){e("#editgroup-form *",r).prop("disabled",!0);var n={displayName:e.trim(e("#editgroup-name",r).val()),description:e.trim(e("#editgroup-description",r).val()),joinable:e('.oae-large-options-container input[type="radio"]:checked',r).val()};t.api.group.updateGroup(i.id,n,function(n,i){e("#editgroup-form *",r).prop("disabled",!1),n?t.api.util.notification(t.api.i18n.translate("__MSG__GROUP_NOT_EDITED__","editgroup"),t.api.i18n.translate("__MSG__GROUP_EDIT_FAIL__","editgroup"),"error"):(e("#editgroup-modal",r).modal("hide"),t.api.util.notification(t.api.i18n.translate("__MSG__GROUP_EDITED__","editgroup"),t.api.i18n.translate("__MSG__GROUP_EDIT_SUCCESS__","editgroup"),"success"),e(document).trigger("oae.editgroup.done",i))})},u=function(){t.api.util.template().render(e("#editgroup-metadata-template",r),{group:i},e("#editgroup-metadata-container",r)),t.api.util.validation().validate(e("#editgroup-form",r),{submitHandler:o})},a=function(){e("#editgroup-modal").on("hidden",function(){var n=e("#editgroup-form",r);n[0].reset(),t.api.util.validation().clear(n)})},f=function(){e(document).on("click",".group-trigger-editgroup",function(){e("#editgroup-modal",r).modal({backdrop:"static"}),e(document).trigger("oae.context.get","editgroup")}),e(document).on("oae.context.send.editgroup",function(e,t){i=t,s(),u()}),e("#editgroup-modal",r).on("shown",function(){e("#editgroup-name",r).focus()})};a(),f()}});