define(["jquery","oae.core"],function(e,t){return function(n){var r=e("#"+n),i=null,s=function(){e("#deleteresource-delete",r).prop("disabled",!0);var n=null;i.resourceType==="content"?n=t.api.content.deleteContent:i.resourceType==="discussion"&&(n=t.api.discussion.deleteDiscussion),n(i.id,function(n){var s={err:n,contextProfile:i},o=t.api.util.template().render(e("#deleteresource-notification-title-template",r),s),u=t.api.util.template().render(e("#deleteresource-notification-body-template",r),s);t.api.util.notification(o,u,n?"error":"success"),n||(e("#deleteresource-modal",r).modal("hide"),setTimeout(t.api.util.redirect().me,2e3)),e("#deleteresource-delete",r).prop("disabled",!1)})},o=function(){t.api.util.template().render(e("#deleteresource-template",r),{contextProfile:i},e("#deleteresource-modal",r))},u=function(){e(document).on("click",".oae-trigger-deleteresource",function(){e("#deleteresource-modal",r).modal({backdrop:"static"})}),r.on("click","#deleteresource-delete",s),e(document).on("oae.context.send.deleteresource",function(e,t){i=t,o()}),e(document).trigger("oae.context.get","deleteresource")};u()}});