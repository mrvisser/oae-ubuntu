define(["jquery","oae.core"],function(e,t){return function(n){var r=e("#"+n),i=function(){var n={submitHandler:o};t.api.util.validation().validate(e("#editprofile-form",r),n)},s=function(){t.api.util.template().render(e("#editprofile-template",r),null,e(".modal-body",r)),i()},o=function(){e("#editprofile-form *",r).prop("disabled",!0);var n={displayName:e.trim(e("#editprofile-name",r).val()),email:e.trim(e("#editprofile-email",r).val()),visibility:e('.oae-large-options-container input[type="radio"]:checked',r).val()};return t.api.user.updateUser(n,function(n,i){n?(t.api.util.notification(t.api.i18n.translate("__MSG__PROFILE_NOT_EDITED__","editprofile"),t.api.i18n.translate("__MSG__PROFILE_DETAILS_EDIT_FAIL__","editprofile"),"error"),e("#editprofile-form *",r).prop("disabled",!1)):(e("#editprofile-modal",r).modal("hide"),t.api.util.notification(t.api.i18n.translate("__MSG__PROFILE_EDITED__","editprofile"),t.api.i18n.translate("__MSG__PROFILE_DETAILS_EDIT_SUCCESS__","editprofile")),e(document).trigger("oae.editprofile.done",i))}),!1},u=function(){e("#editprofile-modal",r).on("hidden",function(n){var i=e("#editprofile-form",r);i[0].reset(),t.api.util.validation().clear(i),e("#editprofile-form *",r).prop("disabled",!1)})},a=function(){e(document).on("click",".oae-trigger-editprofile",function(){e("#editprofile-modal",r).modal({backdrop:"static"}),s()}),r.on("change",'.oae-large-options-container input[type="radio"]',function(){e(".oae-large-options",r).removeClass("checked"),e(this).parents(".oae-large-options").addClass("checked")}),e("#editprofile-modal",r).on("shown",function(){e("#editprofile-name",r).focus()})};u(),a()}});