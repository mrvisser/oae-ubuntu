define(["oae.api.authentication","oae.api.config","oae.api.content","oae.api.comment","oae.api.discussion","oae.api.group","oae.api.i18n","oae.api.l10n","oae.api.profile","oae.api.user","oae.api.util","oae.api.widget"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h={api:{authentication:e,config:t,content:n,comment:r,discussion:i,group:s,i18n:o,l10n:u,profile:a,user:f,util:l,widget:c},data:{}},p=function(e){h.api.user.getMe(function(t,n){if(t){if(t.code===502)return l.redirect().unavailable();if(t.code===503)return l.redirect().maintenance();throw new Error("Could not load the me feed. Make sure that the server is running and properly configured")}h.data.me=n,h.api.config.init(function(t){if(t)throw new Error("Could not initialize the config API.");var n=h.data.me.locale?h.data.me.locale.locale:null;h.api.l10n.init(n,function(t){if(t)throw new Error("Could not initialize the l10n API.");h.api.i18n.init(n,function(t){if(t)throw new Error("Could not initialize the i18n API.");h.api.util.init(function(){h.api.widget.init(n,function(t){if(t)throw new Error("Could not initialize the widgets API.");e(h),h.api.widget.loadWidgets(null,null,null,function(){$("body").show()})})})})})})})};return{pluginBuilder:"pluginBuilder",load:function(e,t,n,r){p(n)}}});