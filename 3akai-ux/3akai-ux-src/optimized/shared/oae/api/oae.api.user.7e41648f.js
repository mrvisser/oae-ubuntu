define(["exports","jquery","underscore"],function(e,t,n){var r=e.createUser=function(e,n,r,i,s,o,u){if(!e)throw new Error("A username should be provided");if(!n)throw new Error("A password should be provided");if(!r)throw new Error("A display name should be provided");i=i||{};var a={username:e,password:n,displayName:r,recaptchaChallenge:s,recaptchaResponse:o,visibility:i.visibility,email:i.email,locale:i.locale,timezone:i.timezone,publicAlias:i.publicAlias};t.ajax({url:"/api/user/create",type:"POST",data:a,success:function(e){u(null,e)},error:function(e,t){u({code:e.status,msg:e.statusText})}})},i=e.getMe=function(e){t.ajax({url:"/api/me",success:function(t){e(null,t)},error:function(t,n){e({code:t.status,msg:t.statusText})}})},s=e.getUser=function(e,n){if(!e)throw new Error("A valid user id should be provided");t.ajax({url:"/api/user/"+e,success:function(e){n(null,e)},error:function(e,t){n({code:e.status,msg:e.statusText})}})},o=e.updateUser=function(e,r){if(!e||n.keys(e).length===0)throw new Error("At least 1 parameter should be provided");var i=require("oae.core").data.me.id;e.displayName&&t(".oae-my-displayname").text(e.displayName),t.ajax({url:"/api/user/"+i,type:"POST",data:e,success:function(e){r(null,e)},error:function(e,t){r({code:e.status,msg:e.statusText})}})}});