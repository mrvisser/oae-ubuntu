define(["exports","jquery","oae.api.config","oae.api.util","oae.api.l10n","jquery.properties-parser","jquery.timeago","jquery.validate"],function(e,t,n,r,i){var s=null,o={core:{},widgets:{}},u=e.init=function(e,r){s=e||n.getValue("oae-principals","user","defaultLanguage");if(s==="debug")return r();t("html").attr("lang",s.substr(0,2)),a(function(e){if(e)return r(e);var n=t("body").html(),i=c(n);t("body")[0].innerHTML=i,l(),r()})},a=function(e){var n=["/ui/bundles.0d30abd1/default.properties","/ui/bundles.0d30abd1/"+s+".properties"];r.staticBatch(n,function(r,i){if(r)return e(r);o.core["default"]=t.parseProperties(i[n[0]]),i[n[1]]&&(o.core[s]=t.parseProperties(i[n[1]])),e(null)})},f=e.parseWidgetBundles=function(e,n,r){o.widgets[e]={},o.widgets[e]["default"]=t.parseProperties(n),r&&(o.widgets[e][s]=t.parseProperties(r))},l=function(){t.timeago.settings.strings={prefixAgo:c("__MSG__JQUERY_TIMEAGO_PREFIXAGO__"),prefixFromNow:c("__MSG__JQUERY_TIMEAGO_PREFIXFROMNOW__"),suffixAgo:c("__MSG__JQUERY_TIMEAGO_SUFFIXAGO__"),suffixFromNow:c("__MSG__JQUERY_TIMEAGO_SUFFIXFROMNOW__"),seconds:c("__MSG__JQUERY_TIMEAGO_SECONDS__"),minute:c("__MSG__JQUERY_TIMEAGO_MINUTE__"),minutes:c("__MSG__JQUERY_TIMEAGO_MINUTES__"),hour:c("__MSG__JQUERY_TIMEAGO_HOUR__"),hours:c("__MSG__JQUERY_TIMEAGO_HOURS__"),day:c("__MSG__JQUERY_TIMEAGO_DAY__"),days:c("__MSG__JQUERY_TIMEAGO_DAYS__"),month:c("__MSG__JQUERY_TIMEAGO_MONTH__"),months:c("__MSG__JQUERY_TIMEAGO_MONTHS__"),year:c("__MSG__JQUERY_TIMEAGO_YEAR__"),years:c("__MSG__JQUERY_TIMEAGO_YEARS__")},t.validator.messages={creditcard:c("__MSG__PLEASE_ENTER_A_VALID_CREDIT_CARD_NUMBER__"),date:c("__MSG__PLEASE_ENTER_A_VALID_DATE__"),dateISO:c("__MSG__PLEASE_ENTER_A_VALID_DATE_ISO__"),digits:c("__MSG__PLEASE_ENTER_ONLY_DIGITS__"),email:c("__MSG__PLEASE_ENTER_A_VALID_EMAIL_ADDRESS__"),equalTo:c("__MSG__PLEASE_ENTER_THE_SAME_VALUE_AGAIN__"),max:c("__MSG__PLEASE_ENTER_A_VALUE_LESS_THAN_OR_EQUAL_TO__"),maxlength:c("__MSG__PLEASE_ENTER_MAXIMUM_X_CHARACTERS__"),"maxlength-long":c("__MSG__PLEASE_ENTER_NO_MORE_THAN_X_CHARACTERS__",null,{x:i.transformNumber(1e5)}),"maxlength-medium":c("__MSG__PLEASE_ENTER_NO_MORE_THAN_X_CHARACTERS__",null,{x:i.transformNumber(1e4)}),"maxlength-short":c("__MSG__PLEASE_ENTER_NO_MORE_THAN_X_CHARACTERS__",null,{x:i.transformNumber(1e3)}),min:c("__MSG__PLEASE_ENTER_A_VALUE_GREATER_THAN_OR_EQUAL_TO__"),minlength:c("__MSG__PLEASE_ENTER_AT_LEAST_X_CHARACTERS__"),nospaces:c("__MSG__NO_SPACES_ARE_ALLOWED__"),number:c("__MSG__PLEASE_ENTER_A_VALID_NUMBER__"),range:c("__MSG__PLEASE_ENTER_A_VALUE_BETWEEN_X_AND_Y__"),rangelength:c("__MSG__PLEASE_ENTER_A_VALUE_BETWEEN_X_AND_Y_CHARACTERS_LONG__"),remote:c("__MSG__PLEASE_FIX_THIS_FIELD__"),required:c("__MSG__THIS_FIELD_IS_REQUIRED__"),url:c("__MSG__PLEASE_ENTER_A_VALID_URL__")}},c=e.translate=function(e,n,r){return s==="debug"?e:(e=e.replace(/__MSG__(.*?)__/gm,function(e,i){var u=null;return n&&o.widgets[n]&&(o.widgets[n][s]&&o.widgets[n][s][i]!==undefined?u=o.widgets[n][s][i]:o.widgets[n]["default"]&&o.widgets[n]["default"][i]!==undefined&&(u=o.widgets[n]["default"][i])),u||(o.core[s]&&o.core[s][i]!==undefined?u=o.core[s][i]:o.core["default"]&&o.core["default"][i]!==undefined&&(u=o.core["default"][i])),u!==null?(r&&t.each(r,function(e,t){u=u.replace("${"+e+"}",t)}),u):(console.error("No translation could be found for "+e),e)}),e)}});