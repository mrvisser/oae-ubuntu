typeof TrimPath=="undefined"&&(TrimPath={}),function(){TrimPath==null&&(TrimPath=new Object),TrimPath.evalEx==null&&(TrimPath.evalEx=function(src){return eval(src)});var UNDEFINED;Array.prototype.pop==null&&(Array.prototype.pop=function(){return this.length===0?UNDEFINED:this[--this.length]}),Array.prototype.push==null&&(Array.prototype.push=function(){for(var e=0;e<arguments.length;++e)this[this.length]=arguments[e];return this.length}),TrimPath.parseTemplate=function(e,t,n){n==null&&(n=TrimPath.parseTemplate_etc);var r=parse(e,t,n),i=TrimPath.evalEx(r,t,1);return i!=null?new n.Template(t,e,r,i,n):null};try{String.prototype.process=function(e,t){var n=TrimPath.parseTemplate(this,null);return n!=null?n.process(e,t):this}}catch(e){}TrimPath.parseTemplate_etc={},TrimPath.parseTemplate_etc.statementTag="forelse|for|if|elseif|else|var|macro",TrimPath.parseTemplate_etc.statementDef={"if":{delta:1,prefix:"if (",suffix:") {",paramMin:1},"else":{delta:0,prefix:"} else {"},elseif:{delta:0,prefix:"} else if (",suffix:") {",paramDefault:"true"},"/if":{delta:-1,prefix:"}"},"for":{delta:1,paramMin:3,prefixFunc:function(e,t,n,r){if(e[2]!="in")throw new r.ParseError(n,t.line,"bad for loop statement: "+e.join(" "));var i=e[1],s="__LIST__"+i;return["var ",s," = ",e[3],";","var __LENGTH_STACK__;","if (typeof(__LENGTH_STACK__) == 'undefined' || !__LENGTH_STACK__.length) __LENGTH_STACK__ = new Array();","__LENGTH_STACK__[__LENGTH_STACK__.length] = 0;","if ((",s,") != null) { ","var ",i,"_ct = 0;","for (var ",i,"_index in ",s,") { ",i,"_ct++;","if (typeof(",s,"[",i,"_index]) == 'function') {continue;}","__LENGTH_STACK__[__LENGTH_STACK__.length - 1]++;","var ",i," = ",s,"[",i,"_index];"].join("")}},forelse:{delta:0,prefix:"} } if (__LENGTH_STACK__[__LENGTH_STACK__.length - 1] == 0) { if (",suffix:") {",paramDefault:"true"},"/for":{delta:-1,prefix:"} }; delete __LENGTH_STACK__[__LENGTH_STACK__.length - 1];"},"var":{delta:0,prefix:"var ",suffix:";"},macro:{delta:1,prefixFunc:function(e,t,n,r){var i=e[1].split("(")[0];return["var ",i," = function",e.slice(1).join(" ").substring(i.length),"{ var _OUT_arr = []; var _OUT = { write: function(m) { if (m) _OUT_arr.push(m); } }; "].join("")}},"/macro":{delta:-1,prefix:" return _OUT_arr.join(''); };"}},TrimPath.parseTemplate_etc.modifierDef={eat:function(e){return""},escape:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},capitalize:function(e){return String(e).toUpperCase()},"default":function(e,t){return e!=null?e:t}},TrimPath.parseTemplate_etc.modifierDef.h=TrimPath.parseTemplate_etc.modifierDef.escape,TrimPath.parseTemplate_etc.Template=function(e,t,n,r,i){this.process=function(e,t){e==null&&(e={}),e._MODIFIERS==null&&(e._MODIFIERS={}),e.defined==null&&(e.defined=function(t){return e[t]!=undefined});for(var n in i.modifierDef)e._MODIFIERS[n]==null&&(e._MODIFIERS[n]=i.modifierDef[n]);t==null&&(t={});var s=[],o={write:function(e){s.push(e)}};try{r(o,e,t)}catch(u){if(t.throwExceptions==1)throw u;var a=new String(s.join("")+"[ERROR: "+u.toString()+(u.message?"; "+u.message:"")+"]");return a.exception=u,a}return s.join("")},this.name=e,this.source=t,this.sourceFunc=n,this.toString=function(){return"TrimPath.Template ["+e+"]"}},TrimPath.parseTemplate_etc.ParseError=function(e,t,n){this.name=e,this.line=t,this.message=n},TrimPath.parseTemplate_etc.ParseError.prototype.toString=function(){return"TrimPath template ParseError in "+this.name+": line "+this.line+", "+this.message};var parse=function(e,t,n){e=cleanWhiteSpace(e);var r=["var TrimPath_Template_TEMP = function(_OUT, _CONTEXT, _FLAGS) { with (_CONTEXT) {"],i={stack:[],line:1},s=-1;while(s+1<e.length){var o=s;o=e.indexOf("{",o+1);while(o>=0){var u=e.indexOf("}",o+1),a=e.substring(o,u),f=a.match(/^\{(cdata|minify|eval)/);if(f){var l=f[1],c=o+l.length+1,h=e.indexOf("}",c);if(h>=0){var p;h-c<=0?p="{/"+l+"}":p=e.substring(c+1,h);var d=e.indexOf(p,h+1);if(d>=0){emitSectionText(e.substring(s+1,o),r);var v=e.substring(h+1,d);l=="cdata"?emitText(v,r):l=="minify"?emitText(scrubWhiteSpace(v),r):l=="eval"&&v!=null&&v.length>0&&r.push("_OUT.write( (function() { "+v+" })() );"),o=s=d+p.length-1}}}else if(e.charAt(o-1)!="$"&&e.charAt(o-1)!="\\"){var m=e.charAt(o+1)=="/"?2:1;if(e.substring(o+m,o+10+m).search(TrimPath.parseTemplate_etc.statementTag)==0)break}o=e.indexOf("{",o+1)}if(o<0)break;var u=e.indexOf("}",o+1);if(u<0)break;emitSectionText(e.substring(s+1,o),r),emitStatement(e.substring(o,u+1),i,r,t,n),s=u}emitSectionText(e.substring(s+1),r);if(i.stack.length!=0)throw new n.ParseError(t,i.line,"unclosed, unmatched statement(s): "+i.stack.join(","));return r.push("}}; TrimPath_Template_TEMP"),r.join("")},emitStatement=function(e,t,n,r,i){var s=e.slice(1,-1).split(" "),o=i.statementDef[s[0]];if(o==null){emitSectionText(e,n);return}if(o.delta<0){if(t.stack.length<=0)throw new i.ParseError(r,t.line,"close tag does not match any previous statement: "+e);t.stack.pop()}o.delta>0&&t.stack.push(e);if(o.paramMin!=null&&o.paramMin>=s.length)throw new i.ParseError(r,t.line,"statement needs more parameters: "+e);o.prefixFunc!=null?n.push(o.prefixFunc(s,t,r,i)):n.push(o.prefix);if(o.suffix!=null){if(s.length<=1)o.paramDefault!=null&&n.push(o.paramDefault);else for(var u=1;u<s.length;u++)u>1&&n.push(" "),n.push(s[u]);n.push(o.suffix)}},emitSectionText=function(e,t){if(e.length<=0)return;var n=0,r=e.length-1;while(n<e.length&&e.charAt(n)=="\n")n++;while(r>=0&&(e.charAt(r)==" "||e.charAt(r)=="	"))r--;r<n&&(r=n);if(n>0){t.push('if (_FLAGS.keepWhitespace == true) _OUT.write("');var i=e.substring(0,n).replace("\n","\\n");i.charAt(i.length-1)=="\n"&&(i=i.substring(0,i.length-1)),t.push(i),t.push('");')}var s=e.substring(n,r+1).split("\n");for(var o=0;o<s.length;o++)emitSectionTextLine(s[o],t),o<s.length-1&&t.push('_OUT.write("\\n");\n');if(r+1<e.length){t.push('if (_FLAGS.keepWhitespace == true) _OUT.write("');var i=e.substring(r+1).replace("\n","\\n");i.charAt(i.length-1)=="\n"&&(i=i.substring(0,i.length-1)),t.push(i),t.push('");')}},emitSectionTextLine=function(e,t){var n="}",r=-1;while(r+n.length<e.length){var i="${",s="}",o=e.indexOf(i,r+n.length);if(o<0)break;e.charAt(o+2)=="%"&&(i="${%",s="%}");var u=e.indexOf(s,o+i.length);if(u<0)break;emitText(e.substring(r+n.length,o),t);var a=e.substring(o+i.length,u).replace(/\|\|/g,"#@@#").split("|");for(var f in a)a[f].replace&&(a[f]=a[f].replace(/#@@#/g,"||"));t.push("_OUT.write("),emitExpression(a,a.length-1,t),t.push(");"),r=u,n=s}emitText(e.substring(r+n.length),t)},emitText=function(e,t){if(e==null||e.length<=0)return;e=e.replace(/\\/g,"\\\\"),e=e.replace(/\n/g,"\\n"),e=e.replace(/"/g,'\\"'),t.push('_OUT.write("'),t.push(e),t.push('");')},emitExpression=function(e,t,n){var r=e[t];if(t<=0){n.push(r);return}var i=r.split(":");n.push('_MODIFIERS["'),n.push(i[0]),n.push('"]('),emitExpression(e,t-1,n),i.length>1&&(n.push(","),n.push(i[1])),n.push(")")},cleanWhiteSpace=function(e){return e=e.replace(/\t/g,"    "),e=e.replace(/\r\n/g,"\n"),e=e.replace(/\r/g,"\n"),e=e.replace(/^(\s*\S*(\s+\S+)*)\s*$/,"$1"),e},scrubWhiteSpace=function(e){return e=e.replace(/^\s+/g,""),e=e.replace(/\s+$/g,""),e=e.replace(/\s+/g," "),e=e.replace(/^(\s*\S*(\s+\S+)*)\s*$/,"$1"),e};TrimPath.parseDOMTemplate=function(e,t,n){t==null&&(t=document);var r=t.getElementById(e),i=r.value;return i==null&&(i=r.innerHTML),i=i.replace(/&lt;/g,"<").replace(/&gt;/g,">"),TrimPath.parseTemplate(i,e,n)},TrimPath.processDOMTemplate=function(e,t,n,r,i){return TrimPath.parseDOMTemplate(e,r,i).process(t,n)}}();