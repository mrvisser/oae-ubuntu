define(["jquery"],function(e){(function(){var e=!1,t=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(n){function o(){!e&&this.init&&this.init.apply(this,arguments)}var r=this.prototype;e=!0;var i=new this;e=!1;for(var s in n)i[s]=typeof n[s]=="function"&&typeof r[s]=="function"&&t.test(n[s])?function(e,t){return function(){var n=this._super;this._super=r[e];var i=t.apply(this,arguments);return this._super=n,i}}(s,n[s]):n[s];return o.prototype=i,o.constructor=o,o.extend=arguments.callee,o}})(),function(e){var t={js:[",",".","_"," "]},n={"default":[",",".","-","_"," "]},r={width:["%"],height:["%"]},i={"default":["-"," ","%"],color:["#"," ","(",")"],image:["(",")",":","/","?","&","-",".",'"',"="," "]},s={background:["(",")",":","%","/","?","&","-"," ",".",'"',"=","#"],"background-image":i.image,"background-color":i.color,"border-color":i.color,"border-image":i.image,color:i.color,icon:i.image,"list-style-image":i.image,"outline-color":i.color},o={attr_name:["on[a-z]{1,}","style","href","src"],attr_val:["javascript:"],css_key:["behavior","-moz-behavior","-ms-behavior"],css_val:["expression"]},u={blacklist:!0},a=!1;e.encoder={author:"Chris Schmidt (chris.schmidt@owasp.org)",version:"${project.version}",init:function(t){if(a)throw"jQuery Encoder has already been initialized - cannot set options after initialization";a=!0,e.extend(u,t)},encodeForHTML:function(t){a=!0;var n=document.createElement("div");return e(n).text(t),e(n).html()},encodeForHTMLAttribute:function(t,i,s){a=!0,t=e.encoder.canonicalize(t).toLowerCase(),i=e.encoder.canonicalize(i);if(e.inArray(t,o.attr_name)>=0)throw"Unsafe attribute name used: "+t;for(var u=0;u<o.attr_val;u++)if(i.toLowerCase().match(o.attr_val[u]))throw"Unsafe attribute value used: "+i;immune=r[t],immune||(immune=n["default"]);var f="";if(!s){for(var l=0;l<t.length;l++){var c=t.charAt(l);if(!c.match(/[a-zA-Z\-0-9]/))throw"Invalid attribute name specified";f+=c}f+='="'}for(var h=0;h<i.length;h++){var p=i.charAt(h),d=i.charCodeAt(h);if(!p.match(/[a-zA-Z0-9]/)&&e.inArray(p,immune)<0){var v=d.toString(16);f+="&#x"+v+";"}else f+=p}return s||(f+='"'),f},encodeForCSS:function(t,n,r){a=!0,t=e.encoder.canonicalize(t).toLowerCase(),n=e.encoder.canonicalize(n);if(e.inArray(t,o.css_key)>=0)throw"Unsafe property name used: "+t;for(var u=0;u<o.css_val.length;u++)if(n.toLowerCase().indexOf(o.css_val[u])>=0)throw"Unsafe property value used: "+n;immune=s[t],immune||(immune=i["default"]);var f="";if(!r){for(var l=0;l<t.length;l++){var c=t.charAt(l);if(!c.match(/[a-zA-Z\-]/))throw"Invalid Property Name specified";f+=c}f+=": "}for(var h=0;h<n.length;h++){var p=n.charAt(h),d=n.charCodeAt(h);if(!p.match(/[a-zA-Z0-9]/)&&e.inArray(p,immune)<0){var v=d.toString(16),m="000000".substr(v.length);f+="\\"+m+v}else f+=p}return f},encodeForURL:function(t,n){a=!0;var r="";if(n){if(!n.match(/^[A-Za-z\-0-9]{1,}$/))throw"Illegal Attribute Name Specified";r+=e.encoder.canonicalize(n).toLowerCase(),r+='="'}return r+=encodeURIComponent(t),r+=n?'"':"",r},encodeForJavascript:function(n){a=!0,immune||(immune=t.js);var r="";for(var i=0;i<n.length;i++){var s=n.charAt(i),o=n.charCodeAt(i);if(e.inArray(s,immune)>=0||f[o]==null){r+=s;continue}var u=o.toString(16),l;o<256?(l="00".substr(u.length),r+="\\x"+l+u.toUpperCase()):(l="0000".substr(u.length),r+="\\u"+l+u.toUpperCase())}return r},canonicalize:function(e,t){a=!0;if(e===null)return null;var n=e,r=e,i=0,s=0,o=[new d,new v,new m];for(;;){r=n;for(var u=0;u<o.length;u++){var f=o[u].decode(n);f!=n&&(i++,n=f)}if(r==n)break;s++}if(t&&i>1)throw"Attack Detected - Multiple/Double Encodings used in input";return n}};var f=[];for(var l=0;l<255;l++)l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122?f[l]=null:f[l]=l.toString(16);var c={html:function(t){return e.encoder.encodeForHTML(t.unsafe)},css:function(t){var n=[],r=[];t.map?n=t.map:n[t.name]=t.unsafe;for(var i in n)typeof n[i]!="function"&&n.hasOwnProperty(i)&&(r[i]=e.encoder.encodeForCSS(i,n[i],!0));return r},attr:function(t){var n=[],r=[];t.map?n=t.map:n[t.name]=t.unsafe;for(var i in n)typeof n[i]!="function"&&n.hasOwnProperty(i)&&(r[i]=e.encoder.encodeForHTMLAttribute(i,n[i],!0));return r}};e.fn.encode=function(){a=!0;var t=arguments.length,n={context:"html",unsafe:null,name:null,map:null,setter:null,strict:!0};if(t==1&&typeof arguments[0]=="object")e.extend(n,arguments[0]);else{n.context=arguments[0];if(arguments.length==2){if(n.context=="html")n.unsafe=arguments[1];else if(n.content=="attr"||n.content=="css")n.map=arguments[1]}else n.name=arguments[1],n.unsafe=arguments[2]}return n.context=="html"?n.setter=this.html:n.context=="css"?n.setter=this.css:n.context=="attr"&&(n.setter=this.attr),n.setter.call(this,c[n.context].call(this,n))};var h=Class.extend({_input:null,_pushback:null,_temp:null,_index:0,_mark:0,_hasNext:function(){return this._input==null?!1:this._input.length==0?!1:this._index<this._input.length},init:function(e){this._input=e},pushback:function(e){this._pushback=e},index:function(){return this._index},hasNext:function(){return this._pushback!=null?!0:this._hasNext()},next:function(){if(this._pushback!=null){var e=this._pushback;return this._pushback=null,e}return this._hasNext()?this._input.charAt(this._index++):null},nextHex:function(){var e=this.next();return e==null?null:e.match(/[0-9A-Fa-f]/)?e:null},peek:function(e){return e?this._pushback&&this._pushback==e?!0:this._hasNext()?this._input.charAt(this._index)==e:!1:this._pushback?this._pushback:this._hasNext()?this._input.charAt(this._index):null},mark:function(){this._temp=this._pushback,this._mark=this._index},reset:function(){this._pushback=this._temp,this._index=this._mark},remainder:function(){var e=this._input.substr(this._index);return this._pushback!=null&&(e=this._pushback+e),e}}),p=Class.extend({decode:function(e){var t="",n=new h(e);while(n.hasNext()){var r=this.decodeCharacter(n);r!=null?t+=r:t+=n.next()}return t},decodeCharacter:function(e){return e.next()}}),d=p.extend({decodeCharacter:function(e){e.mark();var t=e.next();if(t==null||t!="&")return e.reset(),null;var n=e.next();if(n==null)return e.reset(),null;var r;if(n=="#"){r=this._getNumericEntity(e);if(r!=null)return r}else if(n.match(/[A-Za-z]/)){e.pushback(n),r=this._getNamedEntity(e);if(r!=null)return r}return e.reset(),null},_getNamedEntity:function(e){var t="",n,r;r=Math.min(e.remainder().length,S.getMaxKeyLength());for(var i=0;i<r;i++)t+=e.next().toLowerCase();n=S.getLongestMatch(t);if(n==null)return null;e.reset(),e.next(),r=n.getKey().length;for(var s=0;s<r;s++)e.next();return e.peek(";")&&e.next(),n.getValue()},_getNumericEntity:function(e){var t=e.peek();return t==null?null:t=="x"||t=="X"?(e.next(),this._parseHex(e)):this._parseNumber(e)},_parseHex:function(e){var t="";while(e.hasNext()){var n=e.peek();if(!!isNaN(parseInt(n,16))){if(n==";"){e.next();break}break}t+=n,e.next()}var r=parseInt(t,16);return!isNaN(r)&&y(r)?String.fromCharCode(r):null},_parseNumber:function(e){var t="";while(e.hasNext()){var n=e.peek();if(!!isNaN(parseInt(n,10))){if(n==";"){e.next();break}break}t+=n,e.next()}var r=parseInt(t,10);return!isNaN(r)&&y(r)?String.fromCharCode(r):null}}),v=p.extend({decodeCharacter:function(e){e.mark();var t=e.next();if(t==null)return e.reset(),null;if(t!="%")return e.reset(),null;var n="";for(var r=0;r<2;r++){var i=e.nextHex();i!=null&&(n+=i)}if(n.length==2){var s=parseInt(n,16);if(y(s))return String.fromCharCode(s)}return e.reset(),null}}),m=p.extend({decodeCharacter:function(e){e.mark();var t=e.next();if(t==null||t!="\\")return e.reset(),null;var n=e.next();if(n==null)return e.reset(),null;switch(n){case"\r":e.peek("\n")&&e.next();case"\n":case"\f":case"\0":return this.decodeCharacter(e)}if(parseInt(n,16)=="NaN")return n;var r=n;for(var i=0;i<5;i++){var s=e.next();if(s==null||b(s))break;if(parseInt(s,16)=="NaN"){e.pushback(s);break}r+=s}var o=parseInt(r,16);return y(o)?String.fromCharCode(o):"ï¿½"}}),g=Class.extend({root:null,maxKeyLen:0,size:0,init:function(){this.clear()},getLongestMatch:function(e){return this.root==null&&e==null?null:this.root.getLongestMatch(e,0)},getMaxKeyLength:function(){return this.maxKeyLen},clear:function(){this.root=null,this.maxKeyLen=0,this.size=0},put:function(e,t){var n,r;return this.root==null&&(this.root=new g.Node),(r=this.root.put(e,0,t))!=null?r:((n=e.length)>this.maxKeyLen&&(this.maxKeyLen=e.length),this.size++,null)}});g.Entry=Class.extend({_key:null,_value:null,init:function(e,t){this._key=e,this._value=t},getKey:function(){return this._key},getValue:function(){return this._value},equals:function(e){return e instanceof g.Entry?this._key==e._key&&this._value==e._value:!1}}),g.Node=Class.extend({_value:null,_nextMap:null,setValue:function(e){this._value=e},getNextNode:function(e){return this._nextMap?this._nextMap[e]:null},put:function(e,t,n){var r,i,s;return e.length==t?(s=this._value,this.setValue(n),s):(i=e.charAt(t),this._nextMap==null?(this._nextMap=g.Node.newNodeMap(),r=new g.Node,this._nextMap[i]=r):(r=this._nextMap[i])==null&&(r=new g.Node,this._nextMap[i]=r),r.put(e,t+1,n))},get:function(e,t){var n;return e.length<=t?this._value:(n=this.getNextNode(e.charAt(t)))==null?null:n.get(e,t+1)},getLongestMatch:function(e,t){var n,r;return e.length<=t?g.Entry.newInstanceIfNeeded(e,this._value):(n=this.getNextNode(e.charAt(t)))==null?g.Entry.newInstanceIfNeeded(e,t,this._value):(r=n.getLongestMatch(e,t+1))!=null?r:g.Entry.newInstanceIfNeeded(e,t,this._value)}}),g.Entry.newInstanceIfNeeded=function(){var e=arguments[0],t,n;return typeof arguments[1]=="string"?(t=arguments[1],n=e.length):(n=arguments[1],t=arguments[2]),t==null||e==null?null:(e.length>n&&(e=e.substr(0,n)),new g.Entry(e,t))},g.Node.newNodeMap=function(){return{}};var y=function(e){return e>=0&&e<=1114111},b=function(e){return e.match(/[\s]/)},w=[],E=[],S=new g;(function(){w["&quot"]="34",w["&amp"]="38",w["&lt"]="60",w["&gt"]="62",w["&nbsp"]="160",w["&iexcl"]="161",w["&cent"]="162",w["&pound"]="163",w["&curren"]="164",w["&yen"]="165",w["&brvbar"]="166",w["&sect"]="167",w["&uml"]="168",w["&copy"]="169",w["&ordf"]="170",w["&laquo"]="171",w["&not"]="172",w["&shy"]="173",w["&reg"]="174",w["&macr"]="175",w["&deg"]="176",w["&plusmn"]="177",w["&sup2"]="178",w["&sup3"]="179",w["&acute"]="180",w["&micro"]="181",w["&para"]="182",w["&middot"]="183",w["&cedil"]="184",w["&sup1"]="185",w["&ordm"]="186",w["&raquo"]="187",w["&frac14"]="188",w["&frac12"]="189",w["&frac34"]="190",w["&iquest"]="191",w["&Agrave"]="192",w["&Aacute"]="193",w["&Acirc"]="194",w["&Atilde"]="195",w["&Auml"]="196",w["&Aring"]="197",w["&AElig"]="198",w["&Ccedil"]="199",w["&Egrave"]="200",w["&Eacute"]="201",w["&Ecirc"]="202",w["&Euml"]="203",w["&Igrave"]="204",w["&Iacute"]="205",w["&Icirc"]="206",w["&Iuml"]="207",w["&ETH"]="208",w["&Ntilde"]="209",w["&Ograve"]="210",w["&Oacute"]="211",w["&Ocirc"]="212",w["&Otilde"]="213",w["&Ouml"]="214",w["&times"]="215",w["&Oslash"]="216",w["&Ugrave"]="217",w["&Uacute"]="218",w["&Ucirc"]="219",w["&Uuml"]="220",w["&Yacute"]="221",w["&THORN"]="222",w["&szlig"]="223",w["&agrave"]="224",w["&aacute"]="225",w["&acirc"]="226",w["&atilde"]="227",w["&auml"]="228",w["&aring"]="229",w["&aelig"]="230",w["&ccedil"]="231",w["&egrave"]="232",w["&eacute"]="233",w["&ecirc"]="234",w["&euml"]="235",w["&igrave"]="236",w["&iacute"]="237",w["&icirc"]="238",w["&iuml"]="239",w["&eth"]="240",w["&ntilde"]="241",w["&ograve"]="242",w["&oacute"]="243",w["&ocirc"]="244",w["&otilde"]="245",w["&ouml"]="246",w["&divide"]="247",w["&oslash"]="248",w["&ugrave"]="249",w["&uacute"]="250",w["&ucirc"]="251",w["&uuml"]="252",w["&yacute"]="253",w["&thorn"]="254",w["&yuml"]="255",w["&OElig"]="338",w["&oelig"]="339",w["&Scaron"]="352",w["&scaron"]="353",w["&Yuml"]="376",w["&fnof"]="402",w["&circ"]="710",w["&tilde"]="732",w["&Alpha"]="913",w["&Beta"]="914",w["&Gamma"]="915",w["&Delta"]="916",w["&Epsilon"]="917",w["&Zeta"]="918",w["&Eta"]="919",w["&Theta"]="920",w["&Iota"]="921",w["&Kappa"]="922",w["&Lambda"]="923",w["&Mu"]="924",w["&Nu"]="925",w["&Xi"]="926",w["&Omicron"]="927",w["&Pi"]="928",w["&Rho"]="929",w["&Sigma"]="931",w["&Tau"]="932",w["&Upsilon"]="933",w["&Phi"]="934",w["&Chi"]="935",w["&Psi"]="936",w["&Omega"]="937",w["&alpha"]="945",w["&beta"]="946",w["&gamma"]="947",w["&delta"]="948",w["&epsilon"]="949",w["&zeta"]="950",w["&eta"]="951",w["&theta"]="952",w["&iota"]="953",w["&kappa"]="954",w["&lambda"]="955",w["&mu"]="956",w["&nu"]="957",w["&xi"]="958",w["&omicron"]="959",w["&pi"]="960",w["&rho"]="961",w["&sigmaf"]="962",w["&sigma"]="963",w["&tau"]="964",w["&upsilon"]="965",w["&phi"]="966",w["&chi"]="967",w["&psi"]="968",w["&omega"]="969",w["&thetasym"]="977",w["&upsih"]="978",w["&piv"]="982",w["&ensp"]="8194",w["&emsp"]="8195",w["&thinsp"]="8201",w["&zwnj"]="8204",w["&zwj"]="8205",w["&lrm"]="8206",w["&rlm"]="8207",w["&ndash"]="8211",w["&mdash"]="8212",w["&lsquo"]="8216",w["&rsquo"]="8217",w["&sbquo"]="8218",w["&ldquo"]="8220",w["&rdquo"]="8221",w["&bdquo"]="8222",w["&dagger"]="8224",w["&Dagger"]="8225",w["&bull"]="8226",w["&hellip"]="8230",w["&permil"]="8240",w["&prime"]="8242",w["&Prime"]="8243",w["&lsaquo"]="8249",w["&rsaquo"]="8250",w["&oline"]="8254",w["&frasl"]="8260",w["&euro"]="8364",w["&image"]="8365",w["&weierp"]="8472",w["&real"]="8476",w["&trade"]="8482",w["&alefsym"]="8501",w["&larr"]="8592",w["&uarr"]="8593",w["&rarr"]="8594",w["&darr"]="8595",w["&harr"]="8596",w["&crarr"]="8629",w["&lArr"]="8656",w["&uArr"]="8657",w["&rArr"]="8658",w["&dArr"]="8659",w["&hArr"]="8660",w["&forall"]="8704",w["&part"]="8706",w["&exist"]="8707",w["&empty"]="8709",w["&nabla"]="8711",w["&isin"]="8712",w["&notin"]="8713",w["&ni"]="8715",w["&prod"]="8719",w["&sum"]="8721",w["&minus"]="8722",w["&lowast"]="8727",w["&radic"]="8730",w["&prop"]="8733",w["&infin"]="8734",w["&ang"]="8736",w["&and"]="8743",w["&or"]="8744",w["&cap"]="8745",w["&cup"]="8746",w["&int"]="8747",w["&there4"]="8756",w["&sim"]="8764",w["&cong"]="8773",w["&asymp"]="8776",w["&ne"]="8800",w["&equiv"]="8801",w["&le"]="8804",w["&ge"]="8805",w["&sub"]="8834",w["&sup"]="8835",w["&nsub"]="8836",w["&sube"]="8838",w["&supe"]="8839",w["&oplus"]="8853",w["&otimes"]="8855",w["&perp"]="8869",w["&sdot"]="8901",w["&lceil"]="8968",w["&rceil"]="8969",w["&lfloor"]="8970",w["&rfloor"]="8971",w["&lang"]="9001",w["&rang"]="9002",w["&loz"]="9674",w["&spades"]="9824",w["&clubs"]="9827",w["&hearts"]="9829",w["&diams"]="9830";for(var e in w)typeof w[e]!="function"&&w.hasOwnProperty(e)&&(E[w[e]]=e);for(var t in E)if(typeof E[t]!="function"&&E.hasOwnProperty(t)){var n=E[t].toLowerCase().substr(1);S.put(n,String.fromCharCode(t))}})(),Object.freeze?(e.encoder=Object.freeze(e.encoder),e.fn.encode=Object.freeze(e.fn.encode)):Object.seal?(e.encoder=Object.seal(e.encoder),e.fn.encode=Object.seal(e.fn.encode)):Object.preventExtensions&&(e.encoder=Object.preventExtensions(e.encoder),e.fn.encode=Object.preventExtensions(e.fn.encode))}(e)});