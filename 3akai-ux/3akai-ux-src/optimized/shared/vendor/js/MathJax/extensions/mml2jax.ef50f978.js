MathJax.Extension.mml2jax={version:"2.0",config:{preview:"alttext"},MMLnamespace:"http://www.w3.org/1998/Math/MathML",PreProcess:function(e){this.configured||(this.config=MathJax.Hub.CombineConfig("mml2jax",this.config),this.config.Augment&&MathJax.Hub.Insert(this,this.config.Augment),this.InitBrowser(),this.configured=!0),typeof e=="string"&&(e=document.getElementById(e)),e||(e=document.body),this.ProcessMathArray(e.getElementsByTagName("math")),e.getElementsByTagNameNS&&this.ProcessMathArray(e.getElementsByTagNameNS(this.MMLnamespace,"math"));var t,n;if(document.namespaces)for(t=0,n=document.namespaces.length;t<n;t++){var r=document.namespaces[t];r.urn===this.MMLnamespace&&this.ProcessMathArray(e.getElementsByTagName(r.name+":math"))}else{var i=document.getElementsByTagName("html")[0];if(i)for(t=0,n=i.attributes.length;t<n;t++){var s=i.attributes[t];s.nodeName.substr(0,6)==="xmlns:"&&s.nodeValue===this.MMLnamespace&&this.ProcessMathArray(e.getElementsByTagName(s.nodeName.substr(6)+":math"))}}},ProcessMathArray:function(e){var t;if(e.length)if(this.MathTagBug)for(t=e.length-1;t>=0;t--)e[t].nodeName==="MATH"?this.ProcessMathFlattened(e[t]):this.ProcessMath(e[t]);else for(t=e.length-1;t>=0;t--)this.ProcessMath(e[t])},ProcessMath:function(e){var t=e.parentNode,n=document.createElement("script");n.type="math/mml",t.insertBefore(n,e);if(this.AttributeBug){var r=this.OuterHTML(e);this.CleanupHTML&&(r=r.replace(/<\?import .*?>/i,"").replace(/<\?xml:namespace .*?\/>/i,""),r=r.replace(/&nbsp;/g,"&#xA0;")),MathJax.HTML.setScript(n,r),t.removeChild(e)}else{var i=MathJax.HTML.Element("span");i.appendChild(e),MathJax.HTML.setScript(n,i.innerHTML)}this.config.preview!=="none"&&this.createPreview(e,n)},ProcessMathFlattened:function(e){var t=e.parentNode,n=document.createElement("script");n.type="math/mml",t.insertBefore(n,e);var r="",i,s=e;while(e&&e.nodeName!=="/MATH")i=e,e=e.nextSibling,r+=this.NodeHTML(i),i.parentNode.removeChild(i);e&&e.nodeName==="/MATH"&&e.parentNode.removeChild(e),n.text=r+"</math>",this.config.preview!=="none"&&this.createPreview(s,n)},NodeHTML:function(e){var t,n,r;if(e.nodeName==="#text")t=this.quoteHTML(e.nodeValue);else if(e.nodeName==="#comment")t="<!--"+e.nodeValue+"-->";else{t="<"+e.nodeName.toLowerCase();for(n=0,r=e.attributes.length;n<r;n++){var i=e.attributes[n];if(i.specified){t+=" "+i.nodeName.toLowerCase().replace(/xmlns:xmlns/,"xmlns")+"=";var s=i.nodeValue;s==null&&i.nodeName==="style"&&e.style&&(s=e.style.cssText),t+='"'+this.quoteHTML(s)+'"'}}t+=">";if(e.outerHTML!=null&&e.outerHTML.match(/(.<\/[A-Z]+>|\/>)$/)){for(n=0,r=e.childNodes.length;n<r;n++)t+=this.OuterHTML(e.childNodes[n]);t+="</"+e.nodeName.toLowerCase()+">"}}return t},OuterHTML:function(e){if(e.nodeName.charAt(0)==="#")return this.NodeHTML(e);if(!this.AttributeBug)return e.outerHTML;var t=this.NodeHTML(e);for(var n=0,r=e.childNodes.length;n<r;n++)t+=this.OuterHTML(e.childNodes[n]);return t+="</"+e.nodeName.toLowerCase()+">",t},quoteHTML:function(e){return e==null&&(e=""),e.replace(/&/g,"&#x26;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},createPreview:function(e,t){var n;if(this.config.preview==="alttext"){var r=e.getAttribute("alttext");r!=null&&(n=[this.filterPreview(r)])}else this.config.preview instanceof Array&&(n=this.config.preview);n&&(n=MathJax.HTML.Element("span",{className:MathJax.Hub.config.preRemoveClass},n),t.parentNode.insertBefore(n,t))},filterPreview:function(e){return e},InitBrowser:function(){var e=MathJax.HTML.Element("span",{id:"<",className:"mathjax",innerHTML:"<math><mi>x</mi><mspace /></math>"}),t=e.outerHTML||"";this.AttributeBug=t!==""&&!(t.match(/id="&lt;"/)&&t.match(/class="mathjax"/)&&t.match(/<\/math>/)),this.MathTagBug=e.childNodes.length>1,this.CleanupHTML=MathJax.Hub.Browser.isMSIE}},MathJax.Hub.Register.PreProcessor(["PreProcess",MathJax.Extension.mml2jax]),MathJax.Ajax.loadComplete("[MathJax]/extensions/mml2jax.js");