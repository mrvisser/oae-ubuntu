(function(e,t,n,r,i,s){var o="2.0",u=MathJax.Extension,a=u.MathEvents={version:o},f=e.config.menuSettings,l={hover:500,frame:{x:3.5,y:5,bwidth:1,bcolor:"#A6D",hwidth:"15px",hcolor:"#83A"},button:{x:-4,y:-3,wx:-2,src:n.fileURL(i.imageDir+"/MenuArrow-15.png")},fadeinInc:.2,fadeoutInc:.05,fadeDelay:50,fadeoutStart:400,fadeoutDelay:15e3,styles:{".MathJax_Hover_Frame":{"border-radius":".25em","-webkit-border-radius":".25em","-moz-border-radius":".25em","-khtml-border-radius":".25em","box-shadow":"0px 0px 15px #83A","-webkit-box-shadow":"0px 0px 15px #83A","-moz-box-shadow":"0px 0px 15px #83A","-khtml-box-shadow":"0px 0px 15px #83A",border:"1px solid #A6D ! important",display:"inline-block",position:"absolute"},".MathJax_Hover_Arrow":{position:"absolute",width:"15px",height:"11px",cursor:"pointer"}}},c=a.Event={LEFTBUTTON:0,RIGHTBUTTON:2,MENUKEY:"altKey",Mousedown:function(e){return c.Handler(e,"Mousedown",this)},Mouseup:function(e){return c.Handler(e,"Mouseup",this)},Mousemove:function(e){return c.Handler(e,"Mousemove",this)},Mouseover:function(e){return c.Handler(e,"Mouseover",this)},Mouseout:function(e){return c.Handler(e,"Mouseout",this)},Click:function(e){return c.Handler(e,"Click",this)},DblClick:function(e){return c.Handler(e,"DblClick",this)},Menu:function(e){return c.Handler(e,"ContextMenu",this)},Handler:function(e,t,r){if(n.loadingMathMenu)return c.False(e);var s=i[r.jaxID];e||(e=window.event),e.isContextMenu=t==="ContextMenu";if(s[t])return s[t](e,r);if(u.MathZoom)return u.MathZoom.HandleEvent(e,t,r)},False:function(e){return e||(e=window.event),e&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!1),!1},ContextMenu:function(t,o,u){var l=i[o.jaxID],p=l.getJaxFromMath(o),d=(l.config.showMathMenu!=null?l:e).config.showMathMenu;if(!d||f.context!=="MathJax"&&!u)return;a.msieEventBug&&(t=window.event||t),c.ClearSelection(),h.ClearHoverTimer(),p.hover&&(p.hover.remove&&(clearTimeout(p.hover.remove),delete p.hover.remove),p.hover.nofade=!0);var v=MathJax.Menu;if(v){v.jax=p;var y=v.menu.Find("Show Math As").menu;y.items[1].name=s[p.inputJax].sourceMenuTitle||"Original Form",y.items[0].hidden=p.inputJax==="Error";var w=v.menu.Find("Math Settings","MathPlayer");return w.hidden=p.outputJax!=="NativeMML"||!e.Browser.hasMathPlayer,v.menu.Post(t)}if(!n.loadingMathMenu){n.loadingMathMenu=!0;var E={pageX:t.pageX,pageY:t.pageY,clientX:t.clientX,clientY:t.clientY};r.Queue(n.Require("[MathJax]/extensions/MathMenu.js"),function(){delete n.loadingMathMenu,MathJax.Menu||(MathJax.Menu={})},["ContextMenu",this,E,o,u])}return c.False(t)},AltContextMenu:function(t,n){var r=i[n.jaxID],s=(r.config.showMathMenu!=null?r:e).config.showMathMenu;if(s){s=(r.config.showMathMenuMSIE!=null?r:e).config.showMathMenuMSIE;if(f.context==="MathJax"&&!f.mpContext&&s){if(!a.noContextMenuBug||t.button!==c.RIGHTBUTTON)return}else if(!t[c.MENUKEY]||t.button!==c.LEFTBUTTON)return;return r.ContextMenu(t,n,!0)}},ClearSelection:function(){a.safariContextMenuBug&&setTimeout("window.getSelection().empty()",0),document.selection&&setTimeout("document.selection.empty()",0)},getBBox:function(e){e.appendChild(a.topImg);var t=a.topImg.offsetTop,n=e.offsetHeight-t,r=e.offsetWidth;return e.removeChild(a.topImg),{w:r,h:t,d:n}}},h=a.Hover={Mouseover:function(t,n){if(f.discoverable||f.zoom==="Hover"){var r=t.fromElement||t.relatedTarget,i=t.toElement||t.target;if(r&&i&&(r.isMathJax!=i.isMathJax||e.getJaxFor(r)!==e.getJaxFor(i))){var s=this.getJaxFromMath(n);return s.hover?h.ReHover(s):h.HoverTimer(s,n),c.False(t)}}},Mouseout:function(t,n){if(f.discoverable||f.zoom==="Hover"){var r=t.fromElement||t.relatedTarget,i=t.toElement||t.target;if(r&&i&&(r.isMathJax!=i.isMathJax||e.getJaxFor(r)!==e.getJaxFor(i))){var s=this.getJaxFromMath(n);return s.hover?h.UnHover(s):h.ClearHoverTimer(),c.False(t)}}},Mousemove:function(e,t){if(f.discoverable||f.zoom==="Hover"){var n=this.getJaxFromMath(t);if(n.hover)return;if(h.lastX==e.clientX&&h.lastY==e.clientY)return;return h.lastX=e.clientX,h.lastY=e.clientY,h.HoverTimer(n,t),c.False(e)}},HoverTimer:function(e,t){this.ClearHoverTimer(),this.hoverTimer=setTimeout(r(["Hover",this,e,t]),l.hover)},ClearHoverTimer:function(){this.hoverTimer&&(clearTimeout(this.hoverTimer),delete this.hoverTimer)},Hover:function(n,r){if(u.MathZoom&&u.MathZoom.Hover({},r))return;var s=i[n.outputJax],o=s.getHoverSpan(n,r),f=s.getHoverBBox(n,o,r),c=(s.config.showMathMenu!=null?s:e).config.showMathMenu,h=l.frame.x,p=l.frame.y,d=l.frame.bwidth;a.msieBorderWidthBug&&(d=0),n.hover={opacity:0,id:n.inputID+"-Hover"};var v=t.Element("span",{id:n.hover.id,isMathJax:!0,style:{display:"inline-block",width:0,height:0,position:"relative"}},[["span",{className:"MathJax_Hover_Frame",isMathJax:!0,style:{display:"inline-block",position:"absolute",top:this.Px(-f.h-p-d-(f.y||0)),left:this.Px(-h-d+(f.x||0)),width:this.Px(f.w+2*h),height:this.Px(f.h+f.d+2*p),opacity:0,filter:"alpha(opacity=0)"}}]]),m=t.Element("span",{isMathJax:!0,id:n.hover.id+"Menu",style:{display:"inline-block","z-index":1,width:0,height:0,position:"relative"}},[["img",{className:"MathJax_Hover_Arrow",isMathJax:!0,math:r,src:l.button.src,onclick:this.HoverMenu,jax:s.id,style:{left:this.Px(f.w+h+d+(f.x||0)+l.button.x),top:this.Px(-f.h-p-d-(f.y||0)-l.button.y),opacity:0,filter:"alpha(opacity=0)"}}]]);f.width&&(v.style.width=m.style.width=f.width,v.style.marginRight=m.style.marginRight="-"+f.width,v.firstChild.style.width=f.width,m.firstChild.style.left="",m.firstChild.style.right=this.Px(l.button.wx)),o.parentNode.insertBefore(v,o),c&&o.parentNode.insertBefore(m,o),o.style&&(o.style.position="relative"),this.ReHover(n)},ReHover:function(e){e.hover.remove&&clearTimeout(e.hover.remove),e.hover.remove=setTimeout(r(["UnHover",this,e]),l.fadeoutDelay),this.HoverFadeTimer(e,l.fadeinInc)},UnHover:function(e){e.hover.nofade||this.HoverFadeTimer(e,-l.fadeoutInc,l.fadeoutStart)},HoverFade:function(e){delete e.hover.timer,e.hover.opacity=Math.max(0,Math.min(1,e.hover.opacity+e.hover.inc)),e.hover.opacity=Math.floor(1e3*e.hover.opacity)/1e3;var t=document.getElementById(e.hover.id),n=document.getElementById(e.hover.id+"Menu");t.firstChild.style.opacity=e.hover.opacity,t.firstChild.style.filter="alpha(opacity="+Math.floor(100*e.hover.opacity)+")",n&&(n.firstChild.style.opacity=e.hover.opacity,n.firstChild.style.filter=t.style.filter);if(e.hover.opacity===1)return;if(e.hover.opacity>0){this.HoverFadeTimer(e,e.hover.inc);return}t.parentNode.removeChild(t),n&&n.parentNode.removeChild(n),e.hover.remove&&clearTimeout(e.hover.remove),delete e.hover},HoverFadeTimer:function(e,t,n){e.hover.inc=t,e.hover.timer||(e.hover.timer=setTimeout(r(["HoverFade",this,e]),n||l.fadeDelay))},HoverMenu:function(e){return e||(e=window.event),i[this.jax].ContextMenu(e,this.math,!0)},ClearHover:function(e){e.hover.remove&&clearTimeout(e.hover.remove),e.hover.timer&&clearTimeout(e.hover.timer),h.ClearHoverTimer(),delete e.hover},Px:function(e){return Math.abs(e)<.006?"0px":e.toFixed(2).replace(/\.?0+$/,"")+"px"},getImages:function(){var e=new Image;e.src=l.button.src}},p=a.Touch={last:0,delay:500,start:function(e){var t=(new Date).getTime(),n=t-p.last<p.delay;p.last=t,n&&(p.timeout=setTimeout(p.menu,p.delay,e,this),e.preventDefault())},end:function(e){if(p.timeout)return clearTimeout(p.timeout),delete p.timeout,p.last=0,e.preventDefault(),c.Handler(e.touches[0]||e.touch,"DblClick",this)},menu:function(e,t){return delete p.timeout,p.last=0,c.Handler(e.touches[0]||e.touch,"ContextMenu",t)}};if(e.Browser.isMobile){var d=l.styles[".MathJax_Hover_Arrow"];d.width="25px",d.height="18px",l.button.x=-6}e.Browser.Select({MSIE:function(e){var t=document.documentMode||0,n=e.versionAtLeast("8.0");a.msieBorderWidthBug=document.compatMode==="BackCompat",a.msieEventBug=e.isIE9,a.msieAlignBug=!n||t<8,t<9&&(c.LEFTBUTTON=1)},Safari:function(e){a.safariContextMenuBug=!0},Opera:function(e){a.operaPositionBug=!0},Konqueror:function(e){a.noContextMenuBug=!0}}),a.topImg=a.msieAlignBug?t.Element("img",{style:{width:0,height:0,position:"relative"},src:"about:blank"}):t.Element("span",{style:{width:0,height:0,display:"inline-block"}}),a.operaPositionBug&&(a.topImg.style.border="1px solid"),a.config=l=e.CombineConfig("MathEvents",l);var v=function(){var e=l.styles[".MathJax_Hover_Frame"];e.border=l.frame.bwidth+"px solid "+l.frame.bcolor+" ! important",e["box-shadow"]=e["-webkit-box-shadow"]=e["-moz-box-shadow"]=e["-khtml-box-shadow"]="0px 0px "+l.frame.hwidth+" "+l.frame.hcolor};r.Queue(e.Register.StartupHook("End Config",{}),[v],["getImages",h],["Styles",n,l.styles],["Post",e.Startup.signal,"MathEvents Ready"],["loadComplete",n,"[MathJax]/extensions/MathEvents.js"])})(MathJax.Hub,MathJax.HTML,MathJax.Ajax,MathJax.Callback,MathJax.OutputJax,MathJax.InputJax);